<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Wikirate</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.7.1/application.js' type='text/javascript'></script>    
    <link href='./assets/0.7.1/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.7.1/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.7.1/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.7.1/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2014-09-03T11:53:33+01:00">2014-09-03T11:53:33+01:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="red">53.33%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         14.57
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>20</b> files in total.
    <b>480</b> relevant lines. 
    <span class="green"><b>256</b> lines covered</span> and
    <span class="red"><b>224</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#634dc7a8785fab1fa4fd562ecf08fedadb9c4a80" class="src_link" title="tmp/set/all/1022-base.rb">tmp/set/all/1022-base.rb</a></td>
        <td class="red strong">51.52 %</td>
        <td>151</td>
        <td>66</td>
        <td>34</td>
        <td>32</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#87a11e86e82fa754fb440ebfa2f907796db6aee9" class="src_link" title="tmp/set/all/1034-base.rb">tmp/set/all/1034-base.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#689eb16f279b12e74f270dd588dfc5b72f46216d" class="src_link" title="tmp/set/all/1035-wikirate.rb">tmp/set/all/1035-wikirate.rb</a></td>
        <td class="red strong">31.11 %</td>
        <td>175</td>
        <td>90</td>
        <td>28</td>
        <td>62</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3780876e663bfd6cdade7ab8f5dc360e03137b55" class="src_link" title="tmp/set/right/1021-cited_claims.rb">tmp/set/right/1021-cited_claims.rb</a></td>
        <td class="red strong">31.25 %</td>
        <td>31</td>
        <td>16</td>
        <td>5</td>
        <td>11</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#455c8f31abfc48aba90710ae41177ad66c11f9df" class="src_link" title="tmp/set/right/1022-related_articles.rb">tmp/set/right/1022-related_articles.rb</a></td>
        <td class="red strong">27.78 %</td>
        <td>40</td>
        <td>18</td>
        <td>5</td>
        <td>13</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#17d12a8c83bd5ca95b574bed0c009923a349f7b7" class="src_link" title="tmp/set/right/1023-source.rb">tmp/set/right/1023-source.rb</a></td>
        <td class="red strong">66.67 %</td>
        <td>26</td>
        <td>6</td>
        <td>4</td>
        <td>2</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#00189b2b51ad33567d385603cd95c6a37393eedb" class="src_link" title="tmp/set/right/1024-wikirate_article.rb">tmp/set/right/1024-wikirate_article.rb</a></td>
        <td class="red strong">41.18 %</td>
        <td>37</td>
        <td>17</td>
        <td>7</td>
        <td>10</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a4ed11e133bc03ec733816271b5478ae5b4535a3" class="src_link" title="tmp/set/right/1025-wikirate_claim_count.rb">tmp/set/right/1025-wikirate_claim_count.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>11</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d3cf134503e75d613c5213adfb92805563afe932" class="src_link" title="tmp/set/right/1026-wikirate_link.rb">tmp/set/right/1026-wikirate_link.rb</a></td>
        <td class="green strong">92.31 %</td>
        <td>55</td>
        <td>13</td>
        <td>12</td>
        <td>1</td>
        <td>3.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#704cbaa7b49b6d6da7a4934e788d5c17fcbb4876" class="src_link" title="tmp/set/right/1027-wikirate_tag.rb">tmp/set/right/1027-wikirate_tag.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c0740d2b72f975b265bdfb7eead32f7f75be449c" class="src_link" title="tmp/set/right/1028-wikirate_title.rb">tmp/set/right/1028-wikirate_title.rb</a></td>
        <td class="red strong">50.0 %</td>
        <td>15</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0b965011272eeb015e624f5c3c156829a4408e2e" class="src_link" title="tmp/set/self/1042-webpage.rb">tmp/set/self/1042-webpage.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>68</td>
        <td>42</td>
        <td>42</td>
        <td>0</td>
        <td>2.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#080a4d9756d34ac8b72ef61e41036f3ee8fb56d9" class="src_link" title="tmp/set/self/1043-wikirate_company_comparison.rb">tmp/set/self/1043-wikirate_company_comparison.rb</a></td>
        <td class="red strong">9.09 %</td>
        <td>88</td>
        <td>33</td>
        <td>3</td>
        <td>30</td>
        <td>0.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f6f1f03561f9e0f1921eccd28795907334192856" class="src_link" title="tmp/set/type/1013-image.rb">tmp/set/type/1013-image.rb</a></td>
        <td class="red strong">45.95 %</td>
        <td>75</td>
        <td>37</td>
        <td>17</td>
        <td>20</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#515401d7524052ddd5696d146b639835763f23cc" class="src_link" title="tmp/set/type/1022-claim.rb">tmp/set/type/1022-claim.rb</a></td>
        <td class="red strong">54.72 %</td>
        <td>165</td>
        <td>53</td>
        <td>29</td>
        <td>24</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9cb1f8392342f56d3e3b730617576647c780a538" class="src_link" title="tmp/set/type/1023-image.rb">tmp/set/type/1023-image.rb</a></td>
        <td class="red strong">42.86 %</td>
        <td>17</td>
        <td>7</td>
        <td>3</td>
        <td>4</td>
        <td>0.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#991027501c3801a8755b8324f6fef10a31c78771" class="src_link" title="tmp/set/type/1024-webpage.rb">tmp/set/type/1024-webpage.rb</a></td>
        <td class="yellow strong">84.62 %</td>
        <td>80</td>
        <td>39</td>
        <td>33</td>
        <td>6</td>
        <td>4.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#366ed7f536e3491e9790fb1f0b178be5699aad08" class="src_link" title="tmp/set/type/1025-wikirate_company.rb">tmp/set/type/1025-wikirate_company.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>13</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#53bd637beb4aa1b789150ebcbfccdab056ca9c86" class="src_link" title="tmp/set/type/1026-wikirate_topic.rb">tmp/set/type/1026-wikirate_topic.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0ae7b98bd7e820302a5b67a6275f7265dcac2ac7" class="src_link" title="tmp/set_pattern/108-ltype_rtype.rb">tmp/set_pattern/108-ltype_rtype.rb</a></td>
        <td class="yellow strong">85.71 %</td>
        <td>33</td>
        <td>14</td>
        <td>12</td>
        <td>2</td>
        <td>264.9</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
          <div class="file_list_container" id="Wikirate">
  <h2>
    <span class="group_name">Wikirate</span>
    (<span class="covered_percent"><span class="red">53.33%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         14.57
       </span>
    </span> hits/line)
  </h2>
  <a name="Wikirate"></a>
  <div>
    <b>20</b> files in total.
    <b>480</b> relevant lines. 
    <span class="green"><b>256</b> lines covered</span> and
    <span class="red"><b>224</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#634dc7a8785fab1fa4fd562ecf08fedadb9c4a80" class="src_link" title="tmp/set/all/1022-base.rb">tmp/set/all/1022-base.rb</a></td>
        <td class="red strong">51.52 %</td>
        <td>151</td>
        <td>66</td>
        <td>34</td>
        <td>32</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#87a11e86e82fa754fb440ebfa2f907796db6aee9" class="src_link" title="tmp/set/all/1034-base.rb">tmp/set/all/1034-base.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#689eb16f279b12e74f270dd588dfc5b72f46216d" class="src_link" title="tmp/set/all/1035-wikirate.rb">tmp/set/all/1035-wikirate.rb</a></td>
        <td class="red strong">31.11 %</td>
        <td>175</td>
        <td>90</td>
        <td>28</td>
        <td>62</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3780876e663bfd6cdade7ab8f5dc360e03137b55" class="src_link" title="tmp/set/right/1021-cited_claims.rb">tmp/set/right/1021-cited_claims.rb</a></td>
        <td class="red strong">31.25 %</td>
        <td>31</td>
        <td>16</td>
        <td>5</td>
        <td>11</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#455c8f31abfc48aba90710ae41177ad66c11f9df" class="src_link" title="tmp/set/right/1022-related_articles.rb">tmp/set/right/1022-related_articles.rb</a></td>
        <td class="red strong">27.78 %</td>
        <td>40</td>
        <td>18</td>
        <td>5</td>
        <td>13</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#17d12a8c83bd5ca95b574bed0c009923a349f7b7" class="src_link" title="tmp/set/right/1023-source.rb">tmp/set/right/1023-source.rb</a></td>
        <td class="red strong">66.67 %</td>
        <td>26</td>
        <td>6</td>
        <td>4</td>
        <td>2</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#00189b2b51ad33567d385603cd95c6a37393eedb" class="src_link" title="tmp/set/right/1024-wikirate_article.rb">tmp/set/right/1024-wikirate_article.rb</a></td>
        <td class="red strong">41.18 %</td>
        <td>37</td>
        <td>17</td>
        <td>7</td>
        <td>10</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a4ed11e133bc03ec733816271b5478ae5b4535a3" class="src_link" title="tmp/set/right/1025-wikirate_claim_count.rb">tmp/set/right/1025-wikirate_claim_count.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>11</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d3cf134503e75d613c5213adfb92805563afe932" class="src_link" title="tmp/set/right/1026-wikirate_link.rb">tmp/set/right/1026-wikirate_link.rb</a></td>
        <td class="green strong">92.31 %</td>
        <td>55</td>
        <td>13</td>
        <td>12</td>
        <td>1</td>
        <td>3.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#704cbaa7b49b6d6da7a4934e788d5c17fcbb4876" class="src_link" title="tmp/set/right/1027-wikirate_tag.rb">tmp/set/right/1027-wikirate_tag.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c0740d2b72f975b265bdfb7eead32f7f75be449c" class="src_link" title="tmp/set/right/1028-wikirate_title.rb">tmp/set/right/1028-wikirate_title.rb</a></td>
        <td class="red strong">50.0 %</td>
        <td>15</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0b965011272eeb015e624f5c3c156829a4408e2e" class="src_link" title="tmp/set/self/1042-webpage.rb">tmp/set/self/1042-webpage.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>68</td>
        <td>42</td>
        <td>42</td>
        <td>0</td>
        <td>2.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#080a4d9756d34ac8b72ef61e41036f3ee8fb56d9" class="src_link" title="tmp/set/self/1043-wikirate_company_comparison.rb">tmp/set/self/1043-wikirate_company_comparison.rb</a></td>
        <td class="red strong">9.09 %</td>
        <td>88</td>
        <td>33</td>
        <td>3</td>
        <td>30</td>
        <td>0.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f6f1f03561f9e0f1921eccd28795907334192856" class="src_link" title="tmp/set/type/1013-image.rb">tmp/set/type/1013-image.rb</a></td>
        <td class="red strong">45.95 %</td>
        <td>75</td>
        <td>37</td>
        <td>17</td>
        <td>20</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#515401d7524052ddd5696d146b639835763f23cc" class="src_link" title="tmp/set/type/1022-claim.rb">tmp/set/type/1022-claim.rb</a></td>
        <td class="red strong">54.72 %</td>
        <td>165</td>
        <td>53</td>
        <td>29</td>
        <td>24</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9cb1f8392342f56d3e3b730617576647c780a538" class="src_link" title="tmp/set/type/1023-image.rb">tmp/set/type/1023-image.rb</a></td>
        <td class="red strong">42.86 %</td>
        <td>17</td>
        <td>7</td>
        <td>3</td>
        <td>4</td>
        <td>0.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#991027501c3801a8755b8324f6fef10a31c78771" class="src_link" title="tmp/set/type/1024-webpage.rb">tmp/set/type/1024-webpage.rb</a></td>
        <td class="yellow strong">84.62 %</td>
        <td>80</td>
        <td>39</td>
        <td>33</td>
        <td>6</td>
        <td>4.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#366ed7f536e3491e9790fb1f0b178be5699aad08" class="src_link" title="tmp/set/type/1025-wikirate_company.rb">tmp/set/type/1025-wikirate_company.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>13</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#53bd637beb4aa1b789150ebcbfccdab056ca9c86" class="src_link" title="tmp/set/type/1026-wikirate_topic.rb">tmp/set/type/1026-wikirate_topic.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0ae7b98bd7e820302a5b67a6275f7265dcac2ac7" class="src_link" title="tmp/set_pattern/108-ltype_rtype.rb">tmp/set_pattern/108-ltype_rtype.rb</a></td>
        <td class="yellow strong">85.71 %</td>
        <td>33</td>
        <td>14</td>
        <td>12</td>
        <td>2</td>
        <td>264.9</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Sets">
  <h2>
    <span class="group_name">Sets</span>
    (<span class="covered_percent"><span class="red">52.36%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         1.39
       </span>
    </span> hits/line)
  </h2>
  <a name="Sets"></a>
  <div>
    <b>19</b> files in total.
    <b>466</b> relevant lines. 
    <span class="green"><b>244</b> lines covered</span> and
    <span class="red"><b>222</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#634dc7a8785fab1fa4fd562ecf08fedadb9c4a80" class="src_link" title="tmp/set/all/1022-base.rb">tmp/set/all/1022-base.rb</a></td>
        <td class="red strong">51.52 %</td>
        <td>151</td>
        <td>66</td>
        <td>34</td>
        <td>32</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#87a11e86e82fa754fb440ebfa2f907796db6aee9" class="src_link" title="tmp/set/all/1034-base.rb">tmp/set/all/1034-base.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#689eb16f279b12e74f270dd588dfc5b72f46216d" class="src_link" title="tmp/set/all/1035-wikirate.rb">tmp/set/all/1035-wikirate.rb</a></td>
        <td class="red strong">31.11 %</td>
        <td>175</td>
        <td>90</td>
        <td>28</td>
        <td>62</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3780876e663bfd6cdade7ab8f5dc360e03137b55" class="src_link" title="tmp/set/right/1021-cited_claims.rb">tmp/set/right/1021-cited_claims.rb</a></td>
        <td class="red strong">31.25 %</td>
        <td>31</td>
        <td>16</td>
        <td>5</td>
        <td>11</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#455c8f31abfc48aba90710ae41177ad66c11f9df" class="src_link" title="tmp/set/right/1022-related_articles.rb">tmp/set/right/1022-related_articles.rb</a></td>
        <td class="red strong">27.78 %</td>
        <td>40</td>
        <td>18</td>
        <td>5</td>
        <td>13</td>
        <td>0.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#17d12a8c83bd5ca95b574bed0c009923a349f7b7" class="src_link" title="tmp/set/right/1023-source.rb">tmp/set/right/1023-source.rb</a></td>
        <td class="red strong">66.67 %</td>
        <td>26</td>
        <td>6</td>
        <td>4</td>
        <td>2</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#00189b2b51ad33567d385603cd95c6a37393eedb" class="src_link" title="tmp/set/right/1024-wikirate_article.rb">tmp/set/right/1024-wikirate_article.rb</a></td>
        <td class="red strong">41.18 %</td>
        <td>37</td>
        <td>17</td>
        <td>7</td>
        <td>10</td>
        <td>0.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a4ed11e133bc03ec733816271b5478ae5b4535a3" class="src_link" title="tmp/set/right/1025-wikirate_claim_count.rb">tmp/set/right/1025-wikirate_claim_count.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>11</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d3cf134503e75d613c5213adfb92805563afe932" class="src_link" title="tmp/set/right/1026-wikirate_link.rb">tmp/set/right/1026-wikirate_link.rb</a></td>
        <td class="green strong">92.31 %</td>
        <td>55</td>
        <td>13</td>
        <td>12</td>
        <td>1</td>
        <td>3.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#704cbaa7b49b6d6da7a4934e788d5c17fcbb4876" class="src_link" title="tmp/set/right/1027-wikirate_tag.rb">tmp/set/right/1027-wikirate_tag.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>18</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c0740d2b72f975b265bdfb7eead32f7f75be449c" class="src_link" title="tmp/set/right/1028-wikirate_title.rb">tmp/set/right/1028-wikirate_title.rb</a></td>
        <td class="red strong">50.0 %</td>
        <td>15</td>
        <td>6</td>
        <td>3</td>
        <td>3</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0b965011272eeb015e624f5c3c156829a4408e2e" class="src_link" title="tmp/set/self/1042-webpage.rb">tmp/set/self/1042-webpage.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>68</td>
        <td>42</td>
        <td>42</td>
        <td>0</td>
        <td>2.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#080a4d9756d34ac8b72ef61e41036f3ee8fb56d9" class="src_link" title="tmp/set/self/1043-wikirate_company_comparison.rb">tmp/set/self/1043-wikirate_company_comparison.rb</a></td>
        <td class="red strong">9.09 %</td>
        <td>88</td>
        <td>33</td>
        <td>3</td>
        <td>30</td>
        <td>0.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f6f1f03561f9e0f1921eccd28795907334192856" class="src_link" title="tmp/set/type/1013-image.rb">tmp/set/type/1013-image.rb</a></td>
        <td class="red strong">45.95 %</td>
        <td>75</td>
        <td>37</td>
        <td>17</td>
        <td>20</td>
        <td>0.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#515401d7524052ddd5696d146b639835763f23cc" class="src_link" title="tmp/set/type/1022-claim.rb">tmp/set/type/1022-claim.rb</a></td>
        <td class="red strong">54.72 %</td>
        <td>165</td>
        <td>53</td>
        <td>29</td>
        <td>24</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9cb1f8392342f56d3e3b730617576647c780a538" class="src_link" title="tmp/set/type/1023-image.rb">tmp/set/type/1023-image.rb</a></td>
        <td class="red strong">42.86 %</td>
        <td>17</td>
        <td>7</td>
        <td>3</td>
        <td>4</td>
        <td>0.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#991027501c3801a8755b8324f6fef10a31c78771" class="src_link" title="tmp/set/type/1024-webpage.rb">tmp/set/type/1024-webpage.rb</a></td>
        <td class="yellow strong">84.62 %</td>
        <td>80</td>
        <td>39</td>
        <td>33</td>
        <td>6</td>
        <td>4.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#366ed7f536e3491e9790fb1f0b178be5699aad08" class="src_link" title="tmp/set/type/1025-wikirate_company.rb">tmp/set/type/1025-wikirate_company.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>13</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#53bd637beb4aa1b789150ebcbfccdab056ca9c86" class="src_link" title="tmp/set/type/1026-wikirate_topic.rb">tmp/set/type/1026-wikirate_topic.rb</a></td>
        <td class="red strong">75.0 %</td>
        <td>12</td>
        <td>4</td>
        <td>3</td>
        <td>1</td>
        <td>1.5</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Setpatterns">
  <h2>
    <span class="group_name">Set patterns</span>
    (<span class="covered_percent"><span class="yellow">85.71%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         264.9
       </span>
    </span> hits/line)
  </h2>
  <a name="Setpatterns"></a>
  <div>
    <b>1</b> files in total.
    <b>14</b> relevant lines. 
    <span class="green"><b>12</b> lines covered</span> and
    <span class="red"><b>2</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#0ae7b98bd7e820302a5b67a6275f7265dcac2ac7" class="src_link" title="tmp/set_pattern/108-ltype_rtype.rb">tmp/set_pattern/108-ltype_rtype.rb</a></td>
        <td class="yellow strong">85.71 %</td>
        <td>33</td>
        <td>14</td>
        <td>12</td>
        <td>2</td>
        <td>264.9</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Formats">
  <h2>
    <span class="group_name">Formats</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Formats"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Chunks">
  <h2>
    <span class="group_name">Chunks</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Chunks"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.7.1 
        and simplecov-html v0.7.1<br/>
        using RSpec
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="634dc7a8785fab1fa4fd562ecf08fedadb9c4a80">
  <div class="header">
    <h3>tmp/set/all/1022-base.rb</h3>
    <h4><span class="red">51.52 %</span> covered</h4>
    <div>
      <b>66</b> relevant lines. 
      <span class="green"><b>34</b> lines covered</span> and
      <span class="red"><b>32</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module All; module Base</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /opt/wagn/mod/05_standard/set/all/base.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">format do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  def show view, args</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">    view ||= :core</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">    render view, args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  # NAME VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">                                                                              </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  view :name,     :perms=&gt;:none  do |args|  card.name                    end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  view :codename, :perms=&gt;:none  do |args|  card.codename.to_s           end  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  view :key,      :perms=&gt;:none  do |args|  card.key                     end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">  view :id,       :perms=&gt;:none  do |args|  card.id                      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  view :type,     :perms=&gt;:none  do |args|  card.type_name               end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  view :linkname, :perms=&gt;:none  do |args|  card.cardname.url_key        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  view :url,      :perms=&gt;:none  do |args|  wagn_url _render_linkname    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  view :link, :perms=&gt;:none  do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">    card_link card.name, showname( args[:title] ), card.known?, args[:type]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">  # DATE VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">  view :created_at, :perms=&gt;:none do |args| time_ago_in_words card.created_at end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  view :updated_at, :perms=&gt;:none do |args| time_ago_in_words card.updated_at end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  # CONTENT VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">  view :raw do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">    scard = args[:structure] ? Card[ args[:structure] ] : card</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">    scard ? scard.raw_content : _render_blank</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">  view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">    process_content _render_raw(args)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">  view :content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">    _render_core args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">  view :open_content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">    _render_core args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">  view :closed_content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">    Card::Content.truncatewords_with_closing_tags _render_core(args) #{ yield }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">  # note: content and open_content may look like they should be aliased to core, but it&#39;s important that they render</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">  # core explicitly so that core view overrides work.  the titled and labeled views below, however, are not intended</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  # for frequent override, so this shortcut is fine.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  # NAME + CONTENT VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">  view :titled do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">    &quot;#{ card.name }\n\n#{ _render_core args }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">  view :open, :titled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">  view :labeled do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">    &quot;#{ card.name }: #{ _render_closed_content args }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">  view :closed, :labeled</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">  # SPECIAL VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">  view :array do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    card.item_cards(:limit=&gt;0).map do |item_card|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="80">
          
          
          <code class="ruby">      subformat(item_card)._render_core(args)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="81">
          
          
          <code class="ruby">    end.inspect</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">  # ERROR VIEWS</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">  view :blank,          :perms=&gt;:none do |args| &#39;&#39; end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="90">
          <span class="hits">1</span>
          
          <code class="ruby">  view :closed_missing, :perms=&gt;:none do |args| &#39;&#39; end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="91">
          <span class="hits">1</span>
          
          <code class="ruby">  view :missing,        :perms=&gt;:none do |args| &#39;&#39; end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="93">
          <span class="hits">1</span>
          
          <code class="ruby">  view :not_found, :perms=&gt;:none, :error_code=&gt;404 do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">    %{ Could not find #{card.name.present? ? %{&quot;#{card.name}&quot;} : &#39;the card requested&#39;}. }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">  view :server_error, :perms=&gt;:none, :error_code=&gt;500 do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    %{ Wagn Hitch!  Server Error. Yuck, sorry about that.\n}+</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="99">
          
          
          <code class="ruby">    %{ To tell us more and follow the fix, add a support ticket at http://wagn.org/new/Support_Ticket }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="102">
          <span class="hits">1</span>
          
          <code class="ruby">  view :denial, :perms=&gt;:none, :error_code=&gt;403 do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">    focal? ? &#39;Permission Denied&#39; : &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="106">
          <span class="hits">1</span>
          
          <code class="ruby">  view :bad_address, :perms=&gt;:none, :error_code=&gt;404 do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">    %{ 404: Bad Address }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">  view :too_deep, :perms=&gt;:none do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">    %{ Man, you&#39;re too deep.  (Too many levels of inclusions at a time) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="114">
          <span class="hits">1</span>
          
          <code class="ruby">  view :too_slow, :perms=&gt;:none do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">    %{ Timed out! #{ showname } took too long to load. }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">  #none of the below belongs here!!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="122">
          <span class="hits">1</span>
          
          <code class="ruby">  view :template_rule, :tags=&gt;:unknown_ok do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">    #FIXME - relativity should be handled in smartname</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="125">
          
          
          <code class="ruby">    name = args[:inc_name] or return &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">    regexp = /\b_(left|right|whole|self|user|main|\d+|L*R?)\b/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="127">
          
          
          <code class="ruby">    absolute = name !~ regexp &amp;&amp; name !~ /^\+/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="129">
          
          
          <code class="ruby">    tname = name.gsub regexp, &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">    if tname !~ /^\+/ and !absolute</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">      &quot;{{#{args[:inc_syntax]}}}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">      set_name = if absolute # find the most appropriate set to use as prototype for inclusion</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">        &quot;#{name}+#{Card[:self].name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">        tmpl_set_name = parent.card.cardname.trunk_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">        if tmpl_set_class_name = tmpl_set_name.tag_name and Card[tmpl_set_class_name].codename == &#39;type&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="138">
          
          
          <code class="ruby">          &quot;#{tmpl_set_name.left_name}#{name}+#{Card[:type_plus_right].name}&quot;  # *type plus right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">          &quot;#{tname.gsub /^\+/,&#39;&#39;}+#{Card[:right].name}&quot;                                      # *right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="144">
          
          
          <code class="ruby">      subformat( Card.fetch(set_name) ).render_template_link args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /opt/wagn/mod/05_standard/set/all/base.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="87a11e86e82fa754fb440ebfa2f907796db6aee9">
  <div class="header">
    <h3>tmp/set/all/1034-base.rb</h3>
    <h4><span class="red">75.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module All; module Base</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/all/base.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">view :paragraph do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">  Card::Content.truncatewords_with_closing_tags _render_core(args), words=100</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/all/base.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="689eb16f279b12e74f270dd588dfc5b72f46216d">
  <div class="header">
    <h3>tmp/set/all/1035-wikirate.rb</h3>
    <h4><span class="red">31.11 %</span> covered</h4>
    <div>
      <b>90</b> relevant lines. 
      <span class="green"><b>28</b> lines covered</span> and
      <span class="red"><b>62</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module All; module Wikirate</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/all/wikirate.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">require &quot;net/https&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">require &quot;uri&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">format do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  view :cite do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">    &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  view :raw_or_blank, :perms=&gt;:none do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">    _render(:raw) or &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  attr_accessor :citations</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  view :menu_link do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">    &#39;&lt;a class=&quot;fa fa-pencil-square-o&quot;&gt;&lt;/a&gt;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  view :name_fieldset do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    #force showing help text</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">    args[:help] ||= true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">    super args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">  view :cite do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">    href_root = parent ? parent.card.cardname.trunk_name.url_key : &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">    href = &quot;#{ href_root }##{ card.cardname.url_key }&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">    %{&lt;sup&gt;&lt;a class=&quot;citation&quot; href=&quot;#{ href }&quot;&gt;#{ cite! }&lt;/a&gt;&lt;/sup&gt;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">  def cite!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">    holder = parent.parent || parent || self</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">    holder.citations ||= []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">    holder.citations &lt;&lt; card.key</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">    holder.citations.size</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">  view :modal do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">    card_name = Card::Env.params[:show_modal]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="51">
          
          
          <code class="ruby">    if card_name.present?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">      after_card = Card[card_name]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">      if !after_card</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">         Rails.logger.info &quot;Expect #{card_name} exist&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">         &quot;&quot; #otherwise it will return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="57">
          
          
          <code class="ruby">         &quot;&lt;div class=&#39;modal-window&#39;&gt;#{ subformat( after_card ).render_core } &lt;/div&gt;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">      &quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">CLAIM_SUBJECT_SQL = %{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  select subjects.`key` as subject, claims.id from cards claims </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">  join cards as pointers on claims.id   = pointers.left_id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">  join card_references   on pointers.id = referer_id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  join cards as subjects on referee_id  = subjects.id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">  where claims.type_id =    #{ Card::ClaimID }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">  and pointers.right_id in (#{ [ Card::WikirateTopicID, Card::WikirateCompanyID ] * &#39;, &#39; })</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">  and claims.trash   is false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">  and pointers.trash is false    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">  and subjects.trash is false; </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="80">
          <span class="hits">1</span>
          
          <code class="ruby">module ClassMethods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="82">
          <span class="hits">1</span>
          
          <code class="ruby">  def claim_count_cache</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="83">
          <span class="hits">3</span>
          
          <code class="ruby">    Wagn::Cache[Card::Set::Right::WikirateClaimCount]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">  def claim_counts subj</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="87">
          
          
          <code class="ruby">    ccc = claim_count_cache</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    ccc.read subj  or begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="89">
          
          
          <code class="ruby">      subjname = subj.to_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="90">
          
          
          <code class="ruby">      count = claim_subjects.find_all do |id, subjects|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="91">
          
          
          <code class="ruby">        if subjname.simple? </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="92">
          
          
          <code class="ruby">          subjects_apply? subjects, subj</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="94">
          
          
          <code class="ruby">          subjects_apply? subjects, subjname.left and subjects_apply? subjects, subjname.right</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      end.size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="97">
          
          
          <code class="ruby">      ccc.write subj, count</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="98">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="101">
          <span class="hits">1</span>
          
          <code class="ruby">  def subjects_apply? references, test_list</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    !!Array.wrap(test_list).find do |subject|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="103">
          
          
          <code class="ruby">      references.member? subject</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="104">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="108">
          <span class="hits">1</span>
          
          <code class="ruby">  def claim_subjects</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">    ccc = claim_count_cache</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    ccc.read &#39;CLAIM-SUBJECTS&#39; or begin</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">      hash = {}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="112">
          
          
          <code class="ruby">      sql = </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      ActiveRecord::Base.connection.select_all( CLAIM_SUBJECT_SQL ).each do |row|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="114">
          
          
          <code class="ruby">        hash[ row[&#39;id&#39;] ] ||= []</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="115">
          
          
          <code class="ruby">        hash[ row[&#39;id&#39;] ] &lt;&lt; row[&#39;subject&#39;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="117">
          
          
          <code class="ruby">      ccc.write &#39;CLAIM-SUBJECTS&#39;, hash</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="118">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="121">
          <span class="hits">1</span>
          
          <code class="ruby">  def reset_claim_counts</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="122">
          <span class="hits">3</span>
          
          <code class="ruby">    claim_count_cache.reset hard=true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="129">
          <span class="hits">1</span>
          
          <code class="ruby">format :json do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="130">
          <span class="hits">1</span>
          
          <code class="ruby">  def isIframable url,counter</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="132">
          
          
          <code class="ruby">    return false if counter&gt;5</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="133">
          
          
          <code class="ruby">    begin </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">      uri = URI.parse(url)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="135">
          
          
          <code class="ruby">      http = Net::HTTP.new(uri.host, uri.port)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="136">
          
          
          <code class="ruby">      request = Net::HTTP::Get.new(uri.request_uri)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="137">
          
          
          <code class="ruby">      request.initialize_http_header({&quot;User-Agent&quot; =&gt; &quot;My Ruby Script&quot;})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="139">
          
          
          <code class="ruby">      response = http.request(request)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">      if response.code==&quot;301&quot; or response.code==&quot;302&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">        #redirection</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="142">
          
          
          <code class="ruby">        counter+=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="143">
          
          
          <code class="ruby">        return isIframable(response[&quot;location&quot;],counter)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="145">
          
          
          <code class="ruby">        xFrameOptions = response[&quot;x-frame-options&quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="146">
          
          
          <code class="ruby">        if xFrameOptions and ( xFrameOptions.upcase.include? &quot;DENY&quot; or xFrameOptions.upcase.include? &quot;SAMEORIGIN&quot; )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="147">
          
          
          <code class="ruby">          return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">    rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="151">
          
          
          <code class="ruby">      return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="153">
          
          
          <code class="ruby">    return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="155">
          <span class="hits">1</span>
          
          <code class="ruby">  view :id_atom do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="156">
          
          
          <code class="ruby">    h = _render_atom</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="157">
          
          
          <code class="ruby">    h[:id] = card.id if card.id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="158">
          
          
          <code class="ruby">    h    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="160">
          <span class="hits">1</span>
          
          <code class="ruby">  view :isSource do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="161">
          
          
          <code class="ruby">    Card::Env.params[:url]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="162">
          
          
          <code class="ruby">    Card::Set::Self::Webpage.find_duplicates url</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="164">
          <span class="hits">1</span>
          
          <code class="ruby">  view :check_iframable do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">    url = Card::Env.params[:url]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">    result = Hash.new </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="167">
          
          
          <code class="ruby">    counter = 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="168">
          
          
          <code class="ruby">    result[:result]=isIframable url, counter</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="169">
          
          
          <code class="ruby">    result.to_json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/all/wikirate.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="3780876e663bfd6cdade7ab8f5dc360e03137b55">
  <div class="header">
    <h3>tmp/set/right/1021-cited_claims.rb</h3>
    <h4><span class="red">31.25 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>11</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module CitedClaims</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/cited_claims.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">    if parent.citations.present?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">      results = parent.citations.map do |name|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">        Card.fetch name, :new=&gt; { :type_id=&gt;Card::ClaimID }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="13">
          
          
          <code class="ruby">      card_list results, args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">      super args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  def card_list results, args</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">    items = (results.each_with_index.map do |claim, num|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">      citation_number = %{&lt;span class=&quot;cited-claim-number&quot;&gt;#{ num + 1 }&lt;/span&gt;}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">      item = nest claim, :citation_number=&gt;citation_number</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="23">
          
          
          <code class="ruby">      %{&lt;div class=&quot;search-result-item item-#{ inclusion_defaults[:view] }&quot;&gt;#{ item}&lt;/div&gt;}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">    end.join )   </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">    %{&lt;div class=&quot;search-result-list&quot;&gt;#{items}&lt;/div&gt;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">end  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/cited_claims.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="455c8f31abfc48aba90710ae41177ad66c11f9df">
  <div class="header">
    <h3>tmp/set/right/1022-related_articles.rb</h3>
    <h4><span class="red">27.78 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>13</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module RelatedArticles</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/related_articles.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">    if claim = card.left and claim.type_id == Card::ClaimID and analysis_names = claim.analysis_names</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # unnecessary if we do this as type plus right</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">      process_content( analysis_names.map do |analysis_name|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="12">
          
          
          <code class="ruby">        company_name = %{&lt;span class=&quot;company&quot;&gt;#{analysis_name.to_name.trunk_name}&lt;/span&gt;}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="13">
          
          
          <code class="ruby">        topic_name   = %{&lt;span class=&quot;topic&quot;&gt;#{  analysis_name.to_name.tag_name  }&lt;/span&gt;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">        %{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">          &lt;div class=\&quot;analysis-link\&quot;&gt;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">            [[#{analysis_name}|#{company_name}#{topic_name}]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">            #{ next_action_link analysis_name.to_name}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">          &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      end.join &#39; &#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  def next_action_link analysis_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">    article = Card[&quot;#{analysis_name}+Article&quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">    act = case</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">      when !article;                                &#39;Start a new Article&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">      when !article.includees.include?( card.left); &#39;Cite this Claim&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">      else                                          &#39;Edit Article&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">    opts = { :edit_article=&gt;true }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">    opts[ :citable ] = card.cardname.trunk_name unless act =~ /^Edit/</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">    %{ &lt;span class=&quot;claim-next-action&quot;&gt;[[/#{analysis_name.url_key}?#{opts.to_param} | #{ act }]]&lt;/span&gt; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/related_articles.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="17d12a8c83bd5ca95b574bed0c009923a349f7b7">
  <div class="header">
    <h3>tmp/set/right/1023-source.rb</h3>
    <h4><span class="red">66.67 %</span> covered</h4>
    <div>
      <b>6</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module Source</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/source.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  view :editor do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">    with_inclusion_mode :normal do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      %{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">        &lt;div class=&quot;source-editor nodblclick&quot;&gt;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">          #{ form.hidden_field :content, :class=&gt;&#39;card-content&#39; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">          &lt;div class=&quot;sourcebox&quot;&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">            #{ text_field_tag :sourcebox, nil, :placeholder=&gt;&#39;http://&#39; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">            #{ button_tag &#39;Add&#39; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">          &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">          #{ _render_core args }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">        &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/source.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="00189b2b51ad33567d385603cd95c6a37393eedb">
  <div class="header">
    <h3>tmp/set/right/1024-wikirate_article.rb</h3>
    <h4><span class="red">41.18 %</span> covered</h4>
    <div>
      <b>17</b> relevant lines. 
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>10</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module WikirateArticle</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_article.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  view :content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">    handle_edit_article( args ) { super args }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="12">
          
          
          <code class="ruby">    handle_edit_article( args ) { super args }    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  view :editor do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">    if claim_name = params[:citable] and claim = Card[claim_name]      </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="17">
          
          
          <code class="ruby">      prompt = with_inclusion_mode :normal do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">        nest claim, :view=&gt;:sample_citation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">      %{ #{ prompt } #{ super args } }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">      super args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  def handle_edit_article args</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">    if params[:edit_article] &amp;&amp; card.ok?(:update)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">      render :edit, args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">      yield</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_article.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="a4ed11e133bc03ec733816271b5478ae5b4535a3">
  <div class="header">
    <h3>tmp/set/right/1025-wikirate_claim_count.rb</h3>
    <h4><span class="red">75.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module WikirateClaimCount</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_claim_count.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :raw do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  Card.claim_counts( card.left.key ).to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_claim_count.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="d3cf134503e75d613c5213adfb92805563afe932">
  <div class="header">
    <h3>tmp/set/right/1026-wikirate_link.rb</h3>
    <h4><span class="green">92.31 %</span> covered</h4>
    <div>
      <b>13</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module WikirateLink</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_link.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;link_thumbnailer&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">=begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">view :core do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">#  site_card = Card[&quot;#{card.name.to_name.trunk_name}+Website&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  #site = site_card &amp;&amp; site_card.item_names.first</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  link_to &quot;source page&quot;, card.raw_content, :target=&gt;&#39;source&#39;, :class=&gt;&#39;wikirate-source-link external-link&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">=end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">view :editor do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">  form.text_field :content, :class=&gt;&#39;card-content&#39;,:placeholder=&gt;&quot;http://example.com&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">event :validate_content, :before=&gt;:approve, :on=&gt;:save do</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="21">
          <span class="hits">9</span>
          
          <code class="ruby">  begin</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="22">
          <span class="hits">9</span>
          
          <code class="ruby">    @host = nil</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="23">
          <span class="hits">9</span>
          
          <code class="ruby">    @host = URI(content).host</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  ensure</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="26">
          <span class="hits">9</span>
          
          <code class="ruby">    errors.add :link, &#39;invalid uri&#39; unless @host</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">event :block_url_changing, :before=&gt;:approve, :on=&gt;:update do </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">  if real? and updates.for(:content)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">    errors.add :link, &quot;is not allowed to be changed.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">=begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">view :iframe do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">#  return &#39;iframe&#39; if Rails.env.development?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">#  subformat( Card.fetch( &quot;#{card.cardname.left}+source frame&quot; ) ).render_content</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  %{&lt;iframe sandbox=&quot;allow-same-origin allow-scripts allow-popups allow-forms&quot; src=&quot;#{_render_raw}&quot;&gt;&lt;/iframe&gt;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">view :edit_in_form do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">  if !card.content.blank? and card.left and card.left.type_id == Card::WebpageID</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    view = args[:home_view] || :core</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    render view, args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    super args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">=end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_link.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="704cbaa7b49b6d6da7a4934e788d5c17fcbb4876">
  <div class="header">
    <h3>tmp/set/right/1027-wikirate_tag.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>7</b> relevant lines. 
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module WikirateTag</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_tag.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">event :create_missing_tags, :after=&gt;:store, :on=&gt;:save do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  new_tags = self.item_names</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  new_tags.each do |tag|</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">    if !Card.exists? tag  </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">      Card.create! :type_id=&gt;Card::WikirateTagID, :name=&gt;tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_tag.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c0740d2b72f975b265bdfb7eead32f7f75be449c">
  <div class="header">
    <h3>tmp/set/right/1028-wikirate_title.rb</h3>
    <h4><span class="red">50.0 %</span> covered</h4>
    <div>
      <b>6</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Right; module WikirateTitle</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_title.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :needed, :perms=&gt;:none do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  if card.real?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">    render_core</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">    %(&lt;span class=&quot;wanted-card&quot;&gt;title needed&lt;/span&gt;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/right/wikirate_title.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="0b965011272eeb015e624f5c3c156829a4408e2e">
  <div class="header">
    <h3>tmp/set/self/1042-webpage.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>42</b> relevant lines. 
      <span class="green"><b>42</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Self; module Webpage</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/self/webpage.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">def self.find_duplicates url</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="8">
          <span class="hits">11</span>
          
          <code class="ruby">  duplicate_wql = { :right=&gt;Card[:wikirate_link].name, :content=&gt;url ,:left=&gt;{:type_id=&gt;Card::WebpageID}}</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="9">
          <span class="hits">11</span>
          
          <code class="ruby">  duplicates = Card.search duplicate_wql</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">format :json do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  view :metadata do |args|</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="14">
          <span class="hits">4</span>
          
          <code class="ruby">    metadata = MetaData.new</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="15">
          <span class="hits">4</span>
          
          <code class="ruby">    url = Card::Env.params[:url]||args[:url] ||&quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="16">
          <span class="hits">4</span>
          
          <code class="ruby">    if url.empty?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">      metadata.error = &#39;empty url&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">      return metadata.to_json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="20">
          <span class="hits">3</span>
          
          <code class="ruby">    begin      </code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="21">
          <span class="hits">3</span>
          
          <code class="ruby">      metadata.website = URI(url).host</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    rescue    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="24">
          <span class="hits">3</span>
          
          <code class="ruby">    if !metadata.website</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">      metadata.error = &#39;invalid url&#39; </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">      return metadata.to_json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">    duplicates = Webpage.find_duplicates url</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">    if duplicates.any?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">      origin_page_card = duplicates.first.left</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">      title =  Card[&quot;#{origin_page_card.name}+title&quot;] ? Card[&quot;#{origin_page_card.name}+title&quot;].content : &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">      description =  Card[&quot;#{origin_page_card.name}+description&quot;] ? Card[&quot;#{origin_page_card.name}+description&quot;].content : &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">      image_url = Card[&quot;#{origin_page_card.name}+image_url&quot;] ? Card[&quot;#{origin_page_card.name}+image_url&quot;].content : &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">      metadata.set_meta_data title,description,image_url</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">      begin </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">        preview = LinkThumbnailer.generate url</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">        if preview.images.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">          image_url = preview.images.first.src.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">          metadata.set_meta_data preview.title, preview.description, image_url</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="45">
          <span class="hits">2</span>
          
          <code class="ruby">    metadata.to_json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">class MetaData  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby">  attr_accessor :title,:description,:image_url,:website,:error</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">  def initialize()  </code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="52">
          <span class="hits">4</span>
          
          <code class="ruby">    @title = &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="53">
          <span class="hits">4</span>
          
          <code class="ruby">    @description = &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="54">
          <span class="hits">4</span>
          
          <code class="ruby">    @image_url  =&quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="55">
          <span class="hits">4</span>
          
          <code class="ruby">    @website = &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="56">
          <span class="hits">4</span>
          
          <code class="ruby">    @error = &quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  end  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  def set_meta_data title,desc,image_url</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">    @title = title</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="60">
          <span class="hits">2</span>
          
          <code class="ruby">    @description = desc</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="61">
          <span class="hits">2</span>
          
          <code class="ruby">    @image_url = image_url</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">end  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/self/webpage.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="080a4d9756d34ac8b72ef61e41036f3ee8fb56d9">
  <div class="header">
    <h3>tmp/set/self/1043-wikirate_company_comparison.rb</h3>
    <h4><span class="red">9.09 %</span> covered</h4>
    <div>
      <b>33</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>30</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Self; module WikirateCompanyComparison</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/self/wikirate_company_comparison.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  if topic = params[:topic]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">    if topic_card = Card[topic]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">      topic_name = topic_card.name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="10">
          
          
          <code class="ruby">      topic_image = Card[&quot;#{topic_name}+image&quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">      topic = topic_card.key</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">  topics = Card.search :type_id=&gt;WikirateTopicID, :sort=&gt;:name, :return=&gt;:name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">  topic_options = topics.map { |t| [t,t.to_name.key] }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="17">
          
          
          <code class="ruby">  topic_options.unshift [ &#39;-- Select Topic --&#39;, &#39;&#39; ]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">  topic_select = select_tag &quot;topic&quot;, options_for_select(topic_options, topic)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">  all_companies = Card.search :type_id=&gt;WikirateCompanyID, :sort=&gt;:name, :return=&gt;:name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">#  all_company_options = all_companies.map { |c| [c,c.to_name.key] }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">  company_selects, analyses = [],[]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">  %w{ 1 2 }.each do |i|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="26">
          
          
          <code class="ruby">    if key = params[&quot;company#{i}&quot;]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">      if ccard = Card[key]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">        cname = ccard.name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">        ckey = ccard.key</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">    analyses &lt;&lt; ( cname &amp;&amp; topic_name ? Card.fetch(&quot;#{cname}+#{topic_name}&quot;) : nil )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="33">
          
          
          <code class="ruby">    company_options = all_companies.map do |company_name|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="34">
          
          
          <code class="ruby">      label = company_name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">      if topic.present?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="36">
          
          
          <code class="ruby">        claim_count = Card.claim_counts &quot;#{company_name.to_name.key}+#{topic}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">        if claim_count &gt; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">          label = &quot;#{company_name} -- #{ pluralize claim_count, &#39;claim&#39; }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">      [ label, company_name.to_name.key ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">    empty_option = [[ &quot;-- Select Company #{i} --&quot;, &#39;&#39; ]]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">    company_selects &lt;&lt; select_tag( &quot;company#{i}&quot;, options_for_select(empty_option + company_options, ckey))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">  analysis_args = { :view=&gt;:titled, :show=&gt;&#39;title_link&#39;, :structure=&gt;&#39;analysis comparison&#39;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  %{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    &lt;form&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">      &lt;table&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">        &lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;Topic&lt;/th&gt;&lt;/tr&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">        &lt;tr&gt;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="56">
          
          
          <code class="ruby">          &lt;td&gt;#{ topic_select }&lt;/td&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">          &lt;td&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">            #{ </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">              if topic_image</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">                link_to_page( raw( nest topic_image, :view=&gt;:content, :size=&gt;:small ), topic)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">            }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">            #{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">              if topic.present?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">                link_to_page( topic_name )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">            }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">          &lt;/td&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">        &lt;/tr&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">        &lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;Companies&lt;/th&gt;&lt;/tr&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">        &lt;tr&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">          &lt;td&gt;#{ company_selects[0] }&lt;/td&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">          &lt;td&gt;#{ company_selects[1] }&lt;/td&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">        &lt;/tr&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">      &lt;/table&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">    &lt;/form&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">    &lt;div class=&quot;left-side&quot; &gt;#{ nest analyses[0], analysis_args.clone if analyses[0] } &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    &lt;div class=&quot;right-side&quot;&gt;#{ nest analyses[1], analysis_args       if analyses[1] } &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">          </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/self/wikirate_company_comparison.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="f6f1f03561f9e0f1921eccd28795907334192856">
  <div class="header">
    <h3>tmp/set/type/1013-image.rb</h3>
    <h4><span class="red">45.95 %</span> covered</h4>
    <div>
      <b>37</b> relevant lines. 
      <span class="green"><b>17</b> lines covered</span> and
      <span class="red"><b>20</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module Image</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /opt/wagn/mod/05_standard/set/type/image.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">include File</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">format do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  include File::Format</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  view :closed_content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">    _render_core :size=&gt;:icon</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  view :source do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">    style = case</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="19">
          
          
          <code class="ruby">      when @mode==:closed ;  :icon</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">      when args[:size]    ;  args[:size]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">      when main?          ;  :large</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">      else                ;  :medium</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">    style = :original if style.to_sym == :full</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="25">
          
          
          <code class="ruby">    card.attach.url style</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  include File::HtmlFormat</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">  view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="34">
          
          
          <code class="ruby">    handle_source args do |source|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">      source == &#39;missing&#39; ? &quot;&lt;!-- image missing #{@card.name} --&gt;&quot; : image_tag(source)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">  view :diff do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="41">
          
          
          <code class="ruby">    out = &#39;&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">    if @show_diff and @previous_revision</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">      card.selected_revision_id=@previous_revision.id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="44">
          
          
          <code class="ruby">      out &lt;&lt; _render_core</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="46">
          
          
          <code class="ruby">    card.selected_revision_id=@revision.id</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">    out &lt;&lt; _render_core</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">    out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">format :css do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">  view :core do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="55">
          
          
          <code class="ruby">    render_source</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  view :content do |args|  #why is this necessary?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="59">
          
          
          <code class="ruby">    render_core</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">format :file do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">  include File::FileFormat</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">  view :style do |args|  #should this be in model?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">    [&#39;&#39;, &#39;full&#39;].member?( args[:style].to_s ) ? :original : args[:style]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /opt/wagn/mod/05_standard/set/type/image.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="515401d7524052ddd5696d146b639835763f23cc">
  <div class="header">
    <h3>tmp/set/type/1022-claim.rb</h3>
    <h4><span class="red">54.72 %</span> covered</h4>
    <div>
      <b>53</b> relevant lines. 
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>24</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module Claim</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/claim.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"># changes label of name on claims (should be obviatable)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  view :name_fieldset do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">    #rename &quot;name&quot; to &quot;Claim&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">    #add a div for claim word counting</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    %{</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="13">
          
          
          <code class="ruby">      #{ fieldset &#39;Claim&#39;, raw( name_field form ), :editor=&gt;&#39;name&#39;, :help=&gt;true }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">      &lt;div class=&#39;claim-counting&#39;&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">        &lt;span class=&#39;claim-counting-number&#39;&gt;100&lt;/span&gt; character(s) left</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">      &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    }   </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  view :new do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">    #hide all help text under title </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="23">
          
          
          <code class="ruby">    super args.merge( :optional_help =&gt; :hide )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  def edit_slot args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">    # :core_edit means the new and edit views will render form fields from within the core view</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby">    # (which in this case is defined by Claim+*type+*structure), as opposed to the default behavior,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">    # which is to strip out the inclusions and render them alone.</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">    super args.merge( :core_edit=&gt;true )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">  view :tip, :perms=&gt;:update do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    # special view for prompting users with next steps</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    if tip = args[:tip] || next_step_tip</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">      %{</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">        &lt;div class=&quot;claim-tip&quot;&gt;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="39">
          
          
          <code class="ruby">          Tip: You can #{ tip }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">          &lt;span id=&quot;close-tip&quot; class=&quot;fa fa-times-circle&quot;&gt;&lt;/span&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">        &lt;/div&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="43">
          
          
          <code class="ruby">    end.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">  def next_step_tip</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="47">
          
          
          <code class="ruby">    if (not topics = Card[&quot;#{card.name}+topics&quot;]) || topics.item_names.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="48">
          
          
          <code class="ruby">      &quot;improve this claim by adding a topic.&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="49">
          
          
          <code class="ruby">    elsif (not companies = Card[&quot;#{card.name}+company&quot;]) || companies.item_names.empty?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="50">
          
          
          <code class="ruby">      &quot;improve this claim by adding a company.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="52">
          
          
          <code class="ruby">      cited_in = Card.search :refer_to =&gt; card.name, :left=&gt;{:type=&gt;&#39;Analysis&#39;}, :right=&gt;{:name=&gt;&#39;article&#39;}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">      if card.analysis_names.size &gt; cited_in.size</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">        &quot;cite this claim in related articles.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">  view :sample_citation do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="60">
          
          
          <code class="ruby">    tip = &quot;easily cite this claim by pasting the following:&quot; +</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">      text_area_tag( :citable_claim, card.default_citation )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">    %{ &lt;div class=&quot;sample-citation&quot;&gt;#{ render :tip, :tip=&gt;tip }&lt;/div&gt; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">def analysis_names</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">  if topics   = Card[&quot;#{name}+#{Card[:wikirate_topic  ].name}&quot;] and </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="70">
          
          
          <code class="ruby">    companies = Card[&quot;#{name}+#{Card[:wikirate_company].name}&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="72">
          
          
          <code class="ruby">    companies = companies.item_cards.reject { |c| c.new_card? || c.type_id != Card::WikirateCompanyID }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="73">
          
          
          <code class="ruby">    topics    = topics   .item_cards.reject { |c| c.new_card? || c.type_id != Card::WikirateTopicID   }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    companies.map do |company|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="76">
          
          
          <code class="ruby">      topics.map do |topic|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="77">
          
          
          <code class="ruby">        &quot;#{company.name}+#{topic.name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="79">
          
          
          <code class="ruby">    end.flatten</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="83">
          <span class="hits">1</span>
          
          <code class="ruby">event :reset_claim_counts, :after=&gt;:store do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="84">
          <span class="hits">3</span>
          
          <code class="ruby">  Card.reset_claim_counts</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="88">
          <span class="hits">1</span>
          
          <code class="ruby">event :validate_claim, :before=&gt;:approve, :on=&gt;:save do </code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="89">
          <span class="hits">10</span>
          
          <code class="ruby">  errors.add :claim, &quot;is too long (100 character maximum)&quot; if name.length &gt; 100</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="92">
          <span class="hits">1</span>
          
          <code class="ruby">event :validate_source, :after=&gt;:approve, :on=&gt;:save do </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">  # 1. it correctly validates when adding a claim</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">  # 2. it correctly validates when editing a claim with +source</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">  # 3. it doesn&#39;t break anything when editing a claim without +source (eg renaming)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">  #first, get the source card from request</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="98">
          <span class="hits">10</span>
          
          <code class="ruby">  source_card = subcards[&quot;+source&quot;]||subcards[&quot;+Source&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="100">
          <span class="hits">10</span>
          
          <code class="ruby">  if source_card || new_card?</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="101">
          <span class="hits">9</span>
          
          <code class="ruby">    check_source source_card</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="105">
          <span class="hits">1</span>
          
          <code class="ruby">def check_source source_card</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="107">
          <span class="hits">9</span>
          
          <code class="ruby">  if !source_card or !source_card.content.present?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="108">
          <span class="hits">2</span>
          
          <code class="ruby">    errors.add :source, &quot;is empty&quot; </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="110">
          <span class="hits">7</span>
          
          <code class="ruby">    source_card.item_cards.each do |item_card|</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="111">
          <span class="hits">8</span>
          
          <code class="ruby">      if !item_card.real? </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="112">
          <span class="hits">2</span>
          
          <code class="ruby">        errors.add :source, &quot;#{item_card.name} does not exist&quot; </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      elsif item_card.type_id != Card::WebpageID</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="114">
          <span class="hits">1</span>
          
          <code class="ruby">        errors.add :source, &quot;#{item_card.name} is not a valid Source Page&quot; </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    end   </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="120">
          <span class="hits">1</span>
          
          <code class="ruby">view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">  _render_link args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="124">
          <span class="hits">1</span>
          
          <code class="ruby">view :title do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">  %{ </code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="126">
          
          
          <code class="ruby">    #{ args[:citation_number] }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    #{ super args }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    #{ optional_render :clipboard, args, :hide }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="132">
          <span class="hits">1</span>
          
          <code class="ruby">view :clipboard do |args|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">  %{</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="134">
          
          
          <code class="ruby">    &lt;i class=&quot;fa fa-clipboard claim-clipboard&quot; id=&quot;copy-button&quot; title=&quot;copy claim citation to clipboard&quot; data-clipboard-text=&quot;#{h card.default_citation}&quot;&gt;&lt;/i&gt;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="139">
          <span class="hits">1</span>
          
          <code class="ruby">def default_citation</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="140">
          
          
          <code class="ruby">  &quot;#{name} {{#{name}|cite}}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">=begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">event :sort_tags, :before=&gt;:approve_subcards, :on=&gt;:create do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">  tag_key = &quot;+tags&quot; #FIXME - hardcoded card name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">  if tags_card = subcards[tag_key]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">    tags_card.item_names.each do |tag|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">      if tag_card = Card.fetch( tag )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">        if tagtype = tag_card.type_code and [ :wikirate_company, :wikirate_topic ].member?(tagtype)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">          type_key = &quot;+#{ Card[tagtype].name }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">          subcards[type_key] ||= Card.new :name=&gt;type_key, :supercard=&gt;self, :type_id=&gt;Card::PointerID</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">          subcards[type_key].add_item tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">          tags_card.drop_item tag</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">        </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">=end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/claim.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="9cb1f8392342f56d3e3b730617576647c780a538">
  <div class="header">
    <h3>tmp/set/type/1023-image.rb</h3>
    <h4><span class="red">42.86 %</span> covered</h4>
    <div>
      <b>7</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module Image</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/image.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  core = subformat( Card[&#39;missing image&#39;] )._render_core args</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">  if args[:denied_view] == :core</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">    core</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">    wrap :no_slot=&gt;true do core end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/image.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="991027501c3801a8755b8324f6fef10a31c78771">
  <div class="header">
    <h3>tmp/set/type/1024-webpage.rb</h3>
    <h4><span class="yellow">84.62 %</span> covered</h4>
    <div>
      <b>39</b> relevant lines. 
      <span class="green"><b>33</b> lines covered</span> and
      <span class="red"><b>6</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module Webpage</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/webpage.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;link_thumbnailer&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">event :process_source_url, :before=&gt;:process_subcards, :on=&gt;:create, :when=&gt;proc{ </code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="9">
          <span class="hits">10</span>
          
          <code class="ruby">   |c| Card::Env.params[:sourcebox] == &#39;true&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  } do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="12">
          <span class="hits">10</span>
          
          <code class="ruby">  linkparams = subcards[&quot;+#{ Card[:wikirate_link].name }&quot;]</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="13">
          <span class="hits">10</span>
          
          <code class="ruby">  url = linkparams &amp;&amp; linkparams[:content] or raise &quot;don&#39;t got it&quot;</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="14">
          <span class="hits">10</span>
          
          <code class="ruby">  if url.length == 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">    errors.add :link, &quot;is empty&quot; </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="17">
          <span class="hits">9</span>
          
          <code class="ruby">    duplicates = Card::Set::Self::Webpage.find_duplicates url</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="18">
          <span class="hits">9</span>
          
          <code class="ruby">    if duplicates.any?</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">      self.name = duplicates.first.cardname.left</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">      abort :success</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="24">
          <span class="hits">9</span>
          
          <code class="ruby">  parse_source_page url</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">def parse_source_page url</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="28">
          <span class="hits">9</span>
          
          <code class="ruby">  if errors.empty?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="29">
          <span class="hits">8</span>
          
          <code class="ruby">    preview = LinkThumbnailer.generate url</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="30">
          <span class="hits">8</span>
          
          <code class="ruby">    if preview.images.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="31">
          <span class="hits">8</span>
          
          <code class="ruby">     subcards[&quot;+image url&quot; ] = preview.images.first.src.to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="33">
          <span class="hits">8</span>
          
          <code class="ruby">    subcards[&quot;+title&quot;      ] = preview.title</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="34">
          <span class="hits">8</span>
          
          <code class="ruby">    subcards[&quot;+description&quot;] = preview.description</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">rescue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">  Rails.logger.info &quot;Fail to extract information from the #{ url }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">event :autopopulate_website, :after=&gt;:approve_subcards, :on=&gt;:create do</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="42">
          <span class="hits">9</span>
          
          <code class="ruby">  if link_card = subcards[&quot;+#{ Card[:wikirate_link].name }&quot;] and link_card.errors.empty?</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="43">
          <span class="hits">8</span>
          
          <code class="ruby">    host = link_card.instance_variable_get &#39;@host&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="45">
          <span class="hits">8</span>
          
          <code class="ruby">    website = Card[:wikirate_website].name    </code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="46">
          <span class="hits">8</span>
          
          <code class="ruby">    website_card = Card.new :name=&gt;&quot;+#{website}&quot;, :content =&gt; &quot;[[#{host}]]&quot;, :supercard=&gt;self</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="47">
          <span class="hits">8</span>
          
          <code class="ruby">    website_card.approve</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="49">
          <span class="hits">8</span>
          
          <code class="ruby">    subcards[&quot;+#{website}&quot;] = website_card</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">#    self.name = generate_name host</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="52">
          <span class="hits">8</span>
          
          <code class="ruby">    if !Card.exists? host</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="53">
          
          
          <code class="ruby">      Card.create :name=&gt;host, :type_id=&gt;Card::WikirateWebsiteID</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">format :html do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">  def edit_slot args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    # see claim.rb for explanation of core_edit</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="62">
          
          
          <code class="ruby">    super args.merge(:core_edit=&gt;true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">  view :content do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="66">
          
          
          <code class="ruby">    add_name_context</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="67">
          
          
          <code class="ruby">    super args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">  view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="71">
          
          
          <code class="ruby">    _view_link args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">end  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/webpage.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="366ed7f536e3491e9790fb1f0b178be5699aad08">
  <div class="header">
    <h3>tmp/set/type/1025-wikirate_company.rb</h3>
    <h4><span class="red">75.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module WikirateCompany</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/wikirate_company.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  _render_link args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/wikirate_company.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="53bd637beb4aa1b789150ebcbfccdab056ca9c86">
  <div class="header">
    <h3>tmp/set/type/1026-wikirate_topic.rb</h3>
    <h4><span class="red">75.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">class Card; module Set; module Type; module WikirateTopic</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">extend Card::Set</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/wikirate_topic.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">view :missing do |args|</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  _render_link args</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set/type/wikirate_topic.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">end;end;end;end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="0ae7b98bd7e820302a5b67a6275f7265dcac2ac7">
  <div class="header">
    <h3>tmp/set_pattern/108-ltype_rtype.rb</h3>
    <h4><span class="yellow">85.71 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby"># -*- encoding : utf-8 -*-</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">class Card::LtypeRtypeSet &lt; Card::SetPattern</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  cattr_accessor :options</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">  class &lt;&lt; self</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># ~~~~~~~~~~~ above autogenerated; below pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set_pattern/ltype_rtype.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">@@options = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">  :junction_only =&gt; true,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  :assigns_type  =&gt; true, </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  :index         =&gt; 4</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">def label name</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">  %{All &quot;#{name.to_name.left_name}&quot; + &quot;#{name.to_name.tag}&quot; cards}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">def prototype_args anchor</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">  { }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">def anchor_name card</code>
        </li>
      
        <li class="covered" data-hits="925" data-linenumber="22">
          <span class="hits">925</span>
          
          <code class="ruby">  left, right = card.left, card.right</code>
        </li>
      
        <li class="covered" data-hits="925" data-linenumber="23">
          <span class="hits">925</span>
          
          <code class="ruby">  ltype_name = (left &amp;&amp; left.type_name) || Card[ Card.default_type_id ].name</code>
        </li>
      
        <li class="covered" data-hits="925" data-linenumber="24">
          <span class="hits">925</span>
          
          <code class="ruby">  rtype_name = (right &amp;&amp; right.type_name) || Card[ Card.default_type_id ].name</code>
        </li>
      
        <li class="covered" data-hits="925" data-linenumber="25">
          <span class="hits">925</span>
          
          <code class="ruby">  &quot;#{ltype_name}+#{rtype_name}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"># ~~~~~~~~~~~ below autogenerated; above pulled from /Users/henrytai/Dev/Cambridge/wikirate/wikirate/mod/wikirate/set_pattern/ltype_rtype.rb ~~~~~~~~~~~</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  register &quot;ltype_rtype&quot;, (options || {})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
