{
  "url": null,
  "timestamp": "2015-06-11 14:13:26 +0100",
  "card": {
    "name": "export",
    "type": "Pointer",
    "content": "[[webpage source preview script]]\n[[style: source preview]]\n[[*all+*style]]",
    "value": [
      {
        "name": "webpage source preview script",
        "type": "JavaScript",
        "content": "var pageName = \"\";\r\nvar url = \"\";\r\nvar decodedUrl = \"\";\r\nvar userId = \"\";\r\nvar company = \"\";\r\nvar topic = \"\";\r\nvar encodedCompany = \"\";\r\nvar encodedTopic = \"\";\r\nvar encodedUrl = \"\";\r\nvar loadingImageUrl = \"{{loading gif|source;size:large}}\";\r\nvar markedIrrelevant = false;\r\nfunction escapeHtml(string) {\r\n  return String(string).replace(/[&<>\"'\\/]/g, function(s) {\r\n    return entityMap[s];\r\n  });\r\n}\r\n\r\nfunction unescapeHtml(string) {\r\n  return $(\"<div/>\").html(string).text();\r\n}\r\n\r\nfunction testSameOrigin(testUrl) {\r\n  $.getJSON(\"Source.json?view=check_iframable&url=\" + testUrl, function(data) {\r\n    if (!data.result) { //remove iframe and show redirection message\r\n      $('#webpage-preview').html(\"\");\r\n       $redirectNotice = $(\"<div>\", {\r\n        \"class\": \"redirect-notice\"\r\n      });\r\n      if(pageName===\"\")\r\n      {\r\n        //from certh\r\n      }else\r\n      {\r\n        //locally\r\n        //Page_000001545?view=content&slot[structure]=source%20item%20preview\r\n        $.ajax(\"/\"+pageName+\"?view=content&slot[structure]=source%20item%20preview\")\r\n        .done(function(claimFormHtml) {\r\n          $redirectNotice.append(claimFormHtml);\r\n          $redirectNotice.trigger('slotReady');\r\n        })\r\n        .fail(function(xhr, ajaxOptions, thrownError) {\r\n          var html = $(xhr.responseText);\r\n          html.find('.card-header').remove();\r\n          $redirectNotice.append(html);\r\n        });\r\n      }\r\n      $('#webpage-preview').append($redirectNotice);\r\n      $('#webpage-preview').addClass(\"non-previewable\");\r\n    }\r\n  });\r\n\r\n}\r\nfunction getPopup(popupId)\r\n{\r\n  var $popupWindow = $('#'+popupId);\r\n  if($popupWindow.length===0){\r\n    $(\"#main\").prepend('<div id=\"'+popupId+'\" style=\"display:none;\"></div>');//create one\r\n    $popupWindow = $('#'+popupId);\r\n  }\r\n  return $popupWindow;\r\n}\r\nfunction enableMakeClaimButton() {\r\n  $(\"#make-a-claim-button\").removeAttr(\"disabled\");\r\n}\r\n//=====for claim ====\r\nvar makeClaimButtonOnClicked = function() {\r\n  var $img = $('<img id=\"make_claim_loading_image_div\">'); //Equivalent: $(document.createElement('img'))\r\n  $img.attr('src', loadingImageUrl);\r\n\r\n  $popupWindow = getPopup(\"claim-form\");\r\n\r\n  $makeClaimButton = $(this);\r\n  $makeClaimButton.attr(\"disabled\", \"disabled\");\r\n\r\n  //show loading dialog\r\n  if($popupWindow.html().trim().length===0)\r\n  {\r\n    $popupWindow.html($img);\r\n    //create the source, get the html in source preview structure\r\n    if(pageName === \"\")\r\n    {\r\n      sendFeedback(\"relevant\", function() {\r\n        createSource(sourceCreatedWithHtml, sourceCreatedFailCallback);\r\n      }, function(xhr, ajaxOptions, thrownError) {\r\n        if (xhr.responseText == \"Permission Denied\") {\r\n          showPermissionDenial(\"claim-form\");\r\n        } else {\r\n          showErrorMsg(xhr.responseText);\r\n        }\r\n        enableMakeClaimButton();\r\n      });\r\n    }else\r\n    {\r\n      getSource(pageName,sourceCreatedWithHtml, sourceCreatedFailCallback);\r\n    }\r\n\r\n  }\r\n  $popupWindow.dialog({\r\n    height: 'auto',\r\n    minWidth: 500,\r\n    position: {\r\n      of: $(\".navbar\"),\r\n      my: \"right top\",\r\n      at: \"right bottom\",\r\n      collision: \"none none\"\r\n    },\r\n    title: '<i class=\"fa fa-arrows\"></i>',\r\n    closeOnEscape: false,\r\n    resizable: false\r\n  });\r\n}\r\nfunction handleSourceHtmlAndNewClaimHtml(sourceHtml, newClaimFormHtml) {\r\n\r\n\r\n  var _sourceHtml = $(sourceHtml);\r\n\r\n  var html = $(newClaimFormHtml);\r\n\r\n  var $claimForm = $('#claim-form');\r\n  $claimForm.html(newClaimFormHtml);\r\n  $claimForm.find('.card-header').remove();\r\n  $claimForm.find('form:first').find('.create-cancel-button:first').on('click', function() {\r\n    $claimForm.empty();\r\n    $claimForm.dialog(\"close\");\r\n  });\r\n  $claimForm.prepend(_sourceHtml);\r\n  if($(\"#source-name\").html().trim().length===0)\r\n    $claimForm.prepend(\"<span>Source added.</span>\");\r\n\r\n  //handle comapny and topic name\r\n  if ($('.RIGHT-company select option[value=\"' + unescapeHtml(decodeURIComponent(company)) + '\"]').length === 0) { //add company to select\r\n    $companySelect = $('.RIGHT-company select');\r\n    $companySelect.append('<option selected >' + decodeURIComponent(decodeURIComponent(company)) + '</option>');\r\n    $companySelect.trigger(\"chosen:updated\");\r\n\r\n  }\r\n  if ($('.RIGHT-topic select option[value=\"' + unescapeHtml(decodeURIComponent(topic)) + '\"]').length === 0) { //add company to select\r\n    $topicSelect = $('.RIGHT-topic select');\r\n    $topicSelect.append('<option selected >' + decodeURIComponent(decodeURIComponent(topic)) + '</option>');\r\n    $topicSelect.trigger(\"chosen:updated\");\r\n  }\r\n  wagn.initializeEditors($claimForm.find(\".new-view:first\"));\r\n  $('<input class=\"card-content\" id=\"card_subcards__Source_content\" name=\"card[subcards][+Source][content]\" value=\"' + pageName + '\" type=\"hidden\" />')\r\n    .insertAfter(\"#card_type_id\");\r\n\r\n}\r\nvar sourceCreatedFailCallback = function(xhr, ajaxOptions, thrownError) {\r\n  var html = $(xhr.responseText);\r\n  html.find('.card-header').remove();\r\n  $('#claim-form').html(html);\r\n  $('#claim-form').find('div:first').trigger('slotReady');\r\n  enableMakeClaimButton();\r\n};\r\n\r\nfunction createSource(callback, failCallback) {\r\n  var url = \"/card/create?\";\r\n  url += \"success[view]=content\";\r\n  url += \"&slot[structure]=source+preview\";\r\n  url += \"&sourcebox=true\";\r\n  url += \"&card[type_code]=source\";\r\n  url += \"&card[subcards][\" + encodeURIComponent(\"+\") + \"Link][content]=\" + encodedUrl;\r\n  if (!markedIrrelevant) {\r\n    url += \"&card[subcards][\" + encodeURIComponent(\"+\") + \"Company][content]=\" + encodedCompany;\r\n    url += \"&card[subcards][\" + encodeURIComponent(\"+\") + \"Topic][content]=\" + encodedTopic;\r\n  }\r\n  var jqxhr = $.ajax(url)\r\n    .done(callback)\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      if (failCallback)\r\n        failCallback(xhr, ajaxOptions, thrownError);\r\n    });\r\n}\r\n\r\nfunction getSource(pageName,callback, failCallback) {\r\n  var url = pageName;\r\n  url += \"?view=content\";\r\n  url += \"&slot[structure]=source+preview\";\r\n\r\n  var jqxhr = $.ajax(url)\r\n    .done(callback)\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      if (failCallback)\r\n        failCallback(xhr, ajaxOptions, thrownError);\r\n    });\r\n}\r\n\r\nvar sourceCreatedWithHtml = function(data) {\r\n  //get the claim form html\r\n\r\n  var sourceHtml = data;\r\n  $.ajax(\"/new/Claim?view=new&main=claim&slot[structure]=claim_source_preview&is_main=true&slot%5Bhome_view%5D=open&slot%5Binc_name%5D=_main&slot%5Binc_syntax%5D=_main\" + (!markedIrrelevant ? (\"&_Companies=\" + encodedCompany + \"&_Topics=\" + encodedTopic) : \"\"))\r\n    .done(function(claimFormHtml) {\r\n      gotNewClaimHtml(sourceHtml, claimFormHtml);\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      var html = $(xhr.responseText);\r\n      html.find('.card-header').remove();\r\n      $('#claim-form').html(html);\r\n      $('#claim-form').find('div:first').trigger('slotReady');\r\n      enableMakeClaimButton();\r\n    });\r\n\r\n};\r\nvar gotNewClaimHtml = function(sourceHtml, newClaimFormHtml) {\r\n\r\n  //show the source and new claim form\r\n  //override the claim form buttons\r\n  //override the cancel button on click event to dismiss the dialogue only\r\n  var pageNumer = sourceHtml.match(/data-card-name=\"Page-(\\d+)\"/)[1];\r\n  pageName = \"Page-\" + pageNumer;\r\n  if (!markedIrrelevant)\r\n  {\r\n    reloadTopBarAsExisitingSource(sourceHtml,newClaimFormHtml);\r\n    $(\"#company-and-topic-detail-link\").show();\r\n  }\r\n\r\n};\r\n\r\nfunction refreshClaimNumber(pageName) {\r\n  var jqxhr = $.ajax(\"/\" + pageName + decodeURIComponent(\"+\") + \"claim count?view=core\")\r\n    .done(function(data) {\r\n      if (data > 0) {\r\n        $(\"#claim-count-number\").html(data);\r\n        $('#claim-count').show();\r\n        $('.show-link-in-popup').each(function(){\r\n          $(this).off(\"click\").click(linkOnClick);\r\n        });\r\n      }\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n    });\r\n}\r\nvar reloadTopBarAsExisitingSource = function(sourceHtml,newClaimFormHtml) {\r\n  var url = pageName+\"?view=preview_options\"\r\n\r\n  var jqxhr = $.ajax(url)\r\n    .done(function(data) {\r\n      $('.menu-options:first').replaceWith(data);\r\n      rebindAllOnClickListener();\r\n      handleSourceHtmlAndNewClaimHtml(sourceHtml, newClaimFormHtml);\r\n      $('#claim-form').find('div:first').trigger('slotReady');\r\n      $('#claim-form').find('.TYPE-claim:first').trigger('slotReady');\r\n      existingSource = true;\r\n      $('#claim-form').find('form:first').on('ajax:success', function(_event, data, xhr) {\r\n        if (!markedIrrelevant)\r\n          refreshClaimNumber(pageName);\r\n        //remove the claim\r\n        //show success\r\n        var $html = $(data);\r\n\r\n\r\n        $('.card-slot.new-view.card-frame.ALL.TYPE-claim:first').remove();\r\n        var $claimSuccess = $(\"<div id='claim-success'></div>\");\r\n        $claimSuccess.append(\"<span>Success! Thanks for making a claim.</span>\");\r\n        $claimSuccess.append(\"<a target='_blank' href='/\" + $html.attr('id') + \"'>Visit the claim.</a>\");\r\n        $claimSuccess.append(\"<a id='keep-reading' href='#'>Keep Reading.</a>\");\r\n        $('#claim-form').append($claimSuccess);\r\n\r\n        $('#keep-reading').click(function() {\r\n          $('#claim-form').dialog(\"close\");\r\n        });\r\n        return true;\r\n      });\r\n\r\n      enableMakeClaimButton();\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      showErrorMsg(xhr.responseText);\r\n    });\r\n};\r\nvar createClaim = function(pageName) {\r\n\r\n  $('<input class=\"card-content\" id=\"card_subcards__Source_content\" name=\"card[subcards][+Source][content]\" value=\"' + pageName + '\" type=\"hidden\" />')\r\n    .insertAfter(\"#card_type_id\");\r\n  $_form = $('#claim-form').find('form:first');\r\n  $_form.setContentFieldsFromMap();\r\n  var result = \"\";\r\n  var url = \"/card/create/\";\r\n  $.ajax({\r\n      type: \"POST\",\r\n      url: url,\r\n      data: $_form.serialize()\r\n    })\r\n    .done(function(data) {\r\n      $('#claim-form').empty();\r\n      if (!markedIrrelevant)\r\n        refreshClaimNumber(pageName);\r\n      $('#claim-form').dialog(\"close\");\r\n    }).fail(function() {\r\n\r\n      $_submitButton = $_form.find('.create-submit-button:first');\r\n      $_submitButton.removeAttr(\"disabled\");\r\n      $_submitButton.html(\"Submit\");\r\n\r\n    });\r\n};\r\n//=====for irrelevant\r\nfunction prepareForAfterIrrelevantFeedback() {\r\n  $('#irrelevant-options').dialog(\"close\");\r\n  var $img = $('<img id=\"feedback_loading_image_div\">'); //Equivalent: $(document.createElement('img'))\r\n  $img.attr('src', loadingImageUrl);\r\n\r\n  var $feedbackOptions = getPopup('after-irrelevant-options');\r\n  $feedbackOptions.html($img);\r\n  $feedbackOptions.css('maxHeight', $(window).height() - $('#logo-bar').height());\r\n  $feedbackOptions.dialog({\r\n    height: 'auto',\r\n    width: '400',\r\n\r\n    position: {\r\n      of: $(\"#logo-bar\"),\r\n      my: \"right top\",\r\n      at: \"right bottom\",\r\n      collision: \"none none\"\r\n    },\r\n    title: '<i class=\"fa fa-arrows\"></i>',\r\n    closeOnEscape: false,\r\n    resizable: false\r\n  });\r\n}\r\nvar irrelevantClicked = function() {\r\n  //update the name of buttons\r\n  markedIrrelevant = true;\r\n\r\n\r\n\r\n\r\n  var $irrelevantDialog = getPopup('irrelevant-options');\r\n  $irrelevantDialog.html('<span>This source is not related to:</span> \\\r\n    <br /> \\\r\n    <div id=\"company-irrelevant\" class=\"button-primary  button-secondary\"> \\\r\n      <a href=\"#\" id=\"company-irrelevant-button\">Company</a> \\\r\n    </div> \\\r\n    <div id=\"topic-irrelevant\" class=\"button-primary  button-secondary\"> \\\r\n      <a href=\"#\" id=\"topic-irrelevant-button\">Topic</a> \\\r\n    </div> \\\r\n \\\r\n    <div id=\"either-irrelevant\" class=\"button-primary  button-secondary\"> \\\r\n      <a href=\"#\" id=\"either-irrelevant-button\">Either</a> \\\r\n    </div>');\r\n  $('#company-irrelevant-button').html(company);\r\n  $('#topic-irrelevant-button').html(topic);\r\n  //bind the click events\r\n  $('#company-irrelevant-button').click(function() {\r\n    prepareForAfterIrrelevantFeedback();\r\n    sendFeedback(\"company\", afterSendingIrrelevantFeedback, sendingIrrelevantFeedbackFailCallback);\r\n\r\n  });\r\n  $('#topic-irrelevant-button').click(function() {\r\n    prepareForAfterIrrelevantFeedback();\r\n    sendFeedback(\"topic\", afterSendingIrrelevantFeedback, sendingIrrelevantFeedbackFailCallback);\r\n  });\r\n  $('#either-irrelevant-button').click(function() {\r\n    prepareForAfterIrrelevantFeedback();\r\n    sendFeedback(\"either\", afterSendingIrrelevantFeedback, sendingIrrelevantFeedbackFailCallback);\r\n  });\r\n  $irrelevantDialog.dialog({\r\n    height: 'auto',\r\n    width: '300',\r\n    position: {\r\n      of: $(\"#logo-bar\"),\r\n      my: \"right top\",\r\n      at: \"right bottom\",\r\n      collision: \"none none\"\r\n    },\r\n    title: '<i class=\"fa fa-arrows\"></i>',\r\n    closeOnEscape: false,\r\n    resizable: false\r\n  });\r\n  return false;\r\n}\r\n\r\nvar sendingIrrelevantFeedbackFailCallback = function(xhr, ajaxOptions, thrownError) {\r\n\r\n  if (xhr.responseText == \"Permission Denied\")\r\n    showPermissionDenial(\"after-irrelevant-options\");\r\n  else {\r\n    showErrorMsg(xhr.responseText);\r\n  }\r\n}\r\nvar afterSendingIrrelevantFeedback = function() {\r\n  $('#irrelevant-options').dialog(\"close\");\r\n  var $irrelevantButton = $('#mark-irrelevant-button');\r\n  $irrelevantButton.find(\"span:first\").html(\"Marked irrelevant\");\r\n  $irrelevantButton.replaceWith($irrelevantButton.html());\r\n  $('#mark-irrelevant').attr('disabled', 'disabled');\r\n  $('#mark-irrelevant').css(\"pointer-events\", \"none\");\r\n  $('#mark-irrelevant').css(\"cursor\", \"default\");\r\n  $('#mark-relevant').hide();\r\n\r\n\r\n  var $afterIrrelevantOption = $('#after-irrelevant-options');\r\n  var claimButtonHtml = $('#make-claim').html();\r\n  var $claimButton = $('<button class=\"create-submit-button\" id=\"make-claim-after-irrelevant\" name=\"button\">Make a claim</button>');\r\n  $afterIrrelevantOption.html($claimButton);\r\n  $claimButton = $('#make-claim-after-irrelevant');\r\n  $afterIrrelevantOption.prepend(\"<br /><span>You can still make a cliam on this source:</span><br />\");\r\n  // $afterIrrelevantOption.append(\"<br /><span>Try other sources:</span><br />\");\r\n  // $afterIrrelevantOption.append(\"<img id='loading_gif' src='{{loading_gif|source;size:medium;}}' />\");\r\n\r\n  $claimButton.click(function() {\r\n    makeClaimButtonOnClicked();\r\n    $('#after-irrelevant-options').dialog(\"close\");\r\n  });\r\n\r\n  //refer to suggested source script\r\n  //addSuggestedSource($afterIrrelevantOption, userId, company, topic);\r\n\r\n}\r\nfunction sendFeedback(type, successCallback, failcallback) {\r\n\r\n  var jqxhr = $.ajax(\"/Source.json?view=feedback&url=\" + encodedUrl + \"&company=\" + encodedCompany + \"&topic=\" + encodedTopic + \"&type=\" + type)\r\n    .done(function(data) {\r\n      if (successCallback)\r\n        successCallback();\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      // console.log(\"Fail to send feedback\");\r\n      if (failcallback)\r\n        failcallback(xhr, ajaxOptions, thrownError);\r\n    });\r\n}\r\nvar showPermissionDenial = function(elementId) {\r\n  var jqxhr = $.ajax(\"/\"+pageName+\"?view=denial\")\r\n    .done(function(data) {\r\n      //not possible i guess\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      var $elementToShowPermissionDenial = $('#' + elementId);\r\n      $denialHtml = $(xhr.responseText);\r\n      $denialHtml.find('.card-header').remove();\r\n      $elementToShowPermissionDenial.html($denialHtml);\r\n\r\n    });\r\n}\r\n//=====for company and topic detail\r\nvar comapnyAndTopicDetailLinkClicked = function(event) {\r\n  event.preventDefault();\r\n  var img = $('<img id=\"company_and_topic_detail_loading_image_div\">'); //Equivalent: $(document.createElement('img'))\r\n  img.attr('src', loadingImageUrl);\r\n\r\n\r\n\r\n  var $popupWindow = getPopup(\"company-and-topic-detail\");\r\n\r\n  $popupWindow.html(img);\r\n  $popupWindow.dialog({\r\n    height: 'auto',\r\n    minWidth: 500,\r\n    position: {\r\n      of: $(\"#company-and-topic\"),\r\n      my: \"center top\",\r\n      at: \"center bottom\",\r\n      collision: \"none none\"\r\n    },\r\n    title: '<i class=\"fa fa-arrows\"></i>',\r\n    closeOnEscape: false,\r\n    resizable: false\r\n  });\r\n\r\n  $.ajax($(\"#company-and-topic-detail-link\").attr(\"href\"))\r\n    .done(companyAndTopicHtmlGot)\r\n    .fail(companyAndTopicHtmlErrorGot);\r\n}\r\nvar companyAndTopicHtmlErrorGot = function(xhr, ajaxOptions, thrownError) {\r\n  var html = $(xhr.responseText);\r\n  html.find('.card-header').remove();\r\n  $('#company-and-topic-detail').html(html);\r\n  $(\"#company-and-topic-detail\").find(\"div:first\").trigger('slotReady');\r\n}\r\nvar companyAndTopicHtmlGot = function(_html) {\r\n  var html = $(_html);\r\n  html.find('.card-header').remove();\r\n  var $companyAndTopicDetail = $(\"#company-and-topic-detail\");\r\n  $companyAndTopicDetail.html(html);\r\n  $companyAndTopicDetail.find('.cancel-button:first').on('click', function() {\r\n\r\n  $companyAndTopicDetail.empty();\r\n  $companyAndTopicDetail.dialog(\"close\");\r\n\r\n  });\r\n\r\n  $companyAndTopicDetail.find('form:first').on('ajax:success', function(data, c, d) {\r\n    $companyAndTopicDetail.empty();\r\n    refreshCompanyAndTopic();\r\n    $companyAndTopicDetail.dialog(\"close\");\r\n    return true;\r\n  });\r\n\r\n  $companyAndTopicDetail.find(\"div:first\").trigger('slotReady');\r\n\r\n}\r\nfunction refreshCompanyAndTopic(){\r\n  var jqxhr = $.ajax(\"/\"+pageName+\"?view=company_and_topic_detail\")\r\n    .done(function(data) {\r\n      $('#company-and-topic').replaceWith(data);\r\n      $(\"#add-company-link\").click(comapnyAndTopicDetailLinkClicked);\r\n      $(\"#add-topic-link\").click(comapnyAndTopicDetailLinkClicked);\r\n      $(\"#company-and-topic-detail-link\").click(comapnyAndTopicDetailLinkClicked);\r\n    })\r\n    .fail(function(xhr, ajaxOptions, thrownError) {\r\n      showErrorMsg(xhr.responseText);\r\n    });\r\n}\r\nfunction rebindAllOnClickListener(){\r\n\r\n  $(\"#add-company-link\").off(\"click\").click(comapnyAndTopicDetailLinkClicked);\r\n  $(\"#add-topic-link\").off(\"click\").click(comapnyAndTopicDetailLinkClicked);\r\n  $(\"#company-and-topic-detail-link\").off(\"click\").click(comapnyAndTopicDetailLinkClicked);\r\n  $('#mark-irrelevant-button').off(\"click\").click(irrelevantClicked);\r\n  $(\"#make-a-claim-button\").off(\"click\").click(makeClaimButtonOnClicked);\r\n  $(\"#mark-relevant-button\").off(\"click\").click(makeClaimButtonOnClicked);\r\n  $('.show-link-in-popup').each(function(){\r\n    $(this).off(\"click\").click(linkOnClick);\r\n  });\r\n}\r\n\r\nfunction resizeIframe() {\r\n  $(\".webpage-preview\").height($(window).height() - $('.navbar').height()-1);\r\n  //$(\".webpage-preview\").css('margin-top',$('.navbar').height()+1);\r\n}\r\n$(document).ready(function() {\r\n\r\n  if($(\"body\").attr(\"id\")==\"source-preview-page-layout\"){\r\n    $('[data-toggle=\"source_preview_tab_ajax\"]').click(function(e) {\r\n      var $this = $(this),\r\n          loadurl = $this.attr('href'),\r\n          targ = $this.attr('data-target');\r\n      if (undefined != loadurl){\r\n          $.get(loadurl, function(data) {\r\n              $(targ).html(data);\r\n          });\r\n      }\r\n\r\n      $this.tab('show');\r\n      return false;\r\n    });\r\n\r\n    $(\"#logo-bar\").dblclick(function() {\r\n      return false;\r\n    });\r\n\r\n    pageName = $(\"#source-name\").html();\r\n    userId = $(\"#user-id\").html();\r\n    url = $(\"#source_url\").html();\r\n    company = $(\"#source_company\").html();\r\n    topic = $(\"#source_topic\").html();\r\n\r\n    encodedUrl = encodeURIComponent(url);\r\n    encodedCompany = encodeURIComponent(company);\r\n    encodedTopic = encodeURIComponent(topic);\r\n\r\n    if (url) {\r\n      testSameOrigin(url);\r\n      decodedUrl = decodeURIComponent(url);\r\n    }\r\n\r\n    rebindAllOnClickListener();\r\n    resizeIframe();\r\n    // $('.show-link-in-popup').each(function(){\r\n    //   $(this).off(\"click\").click(linkOnClick);\r\n    // });\r\n    $(window).resize(function() {\r\n      resizeIframe();\r\n    });\r\n  }\r\n\r\n});\r\n"
      },
      {
        "name": "style: source preview",
        "type": "SCSS",
        "content": ".preview-view{\r\n  .nav-tabs>li>a {\r\n    margin-right: -1px;\r\n    line-height: 1.42857;\r\n    border: 1px solid #ebebeb;\r\n    border-radius: 0px;\r\n    padding: 15px 18px;\r\n    background-color: #fafafa;\r\n    margin-bottom: -1px;\r\n    color: #666!important;\r\n    .count-number{\r\n      margin-left:2px;\r\n    }\r\n    i {\r\n      margin: 0px 6px;\r\n    }\r\n    \r\n  }\r\n  .nav-tabs>li.active > a{\r\n      background-color: #fff;\r\n      border-bottom-color: #fff;\r\n  }\r\n  \r\n  .col-1{\r\n    width: 13px;\r\n    padding: 8px;\r\n    float:left;\r\n  }\r\n}\r\n\r\n"
      },
      {
        "name": "*all+*style",
        "type": "Pointer",
        "content": "[[customized classic skin]]"
      }
    ]
  }
}