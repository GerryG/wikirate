{
  "url": "http://cutch:3000/export.json?pretty=true",
  "timestamp": "2014-03-19 23:20:33 -0600",
  "card": {
    "name": "export",
    "type": "Pointer",
    "content": "[[wikirate coffee\r]]\n[[Page+Topics+*type plus right+*help]]",
    "value": [
      {
        "name": "wikirate coffee",
        "type": "CoffeeScript",
        "content": "\r\n$(window).ready ->\r\n  getFrameslot = (field)->\r\n    fieldset = field.closest 'fieldset'\r\n    frameslot = fieldset.find '.card-slot'\r\n    if frameslot[0]\r\n      frameslot = $(frameslot[0])\r\n    else\r\n      frameslot = $('<div class=\"card-slot\"></div>')\r\n      fieldset.append frameslot\r\n    frameslot\r\n  \r\n\r\n  $('.TYPE-claim .RIGHT-link').on 'change', 'input', ->\r\n    field = $(this)\r\n    frameslot = getFrameslot field\r\n    frameslot.empty()\r\n    $.ajax wagn.rootPath + '/card/create', {\r\n      data : {\r\n        success: { view : 'content' }\r\n        slot: { structure: 'labeled source frame' } #fixme -- need codename\r\n        quickframe: true\r\n        card: {\r\n          type_code: 'webpage'\r\n          subcards    : { '+Link' : { 'content' : field.val() } }\r\n        }\r\n      }\r\n      success: (data) -> frameslot.slotSuccess data\r\n      error: (xhr) -> frameslot.slotError xhr.status, xhr.responseText      \r\n    }\r\n    false #disable other events\r\n\r\n  $('.TYPE-page .RIGHT-link').on 'change', 'input', ->  \r\n    field = $(this)\r\n    frameslot = getFrameslot field\r\n    frameslot.html $('<iframe src=\"' + field.val()  + '\"></iframe>')\r\n\r\n  $('body').on 'click', '.wikirate-topic-list', (event) ->\r\n    listlink = $(this)\r\n    dialogDiv = listlink.data 'dialog'\r\n    dialogOptions = { minWidth: 400, maxHeight:400, position: { my: \"center\", at: \"center\", of: window } }\r\n    if dialogDiv\r\n      dialogDiv.dialog dialogOptions\r\n    else\r\n      $.ajax( url: listlink.attr('href') ).done (data)->\r\n        dialogDiv = listlink.slot().find '.wikirate-topic-dialog'\r\n        wagn.dd = dialogDiv\r\n        dialogDiv.html data\r\n        listlink.data 'dialog', dialogDiv\r\n        dialogDiv.dialog dialogOptions\r\n        dialogDiv.find('a').attr 'target','topics'\r\n    event.preventDefault()\r\n  \r\n  $('#menu').on 'mouseenter', '.main-links > div', ->\r\n    ul = $(this).find('ul').first()\r\n    ul.menu()\r\n    ul.show()\r\n    ul.position my: 'left top', at: 'left bottom', of: this\r\n    \r\n  $('#menu').on 'mouseleave', '.main-links > div', ->\r\n    ul = $(this).find('ul').first()\r\n    ul.hide()\r\n  \r\n#warn = (stuff) -> console.log stuff if console?",
        "codename": "wikirate_coffee"
      },
      {
        "name": "Page+Topics+*type plus right+*help",
        "type": "HTML",
        "content": "<a href=\"/Topics_List?layout=simple&view=content\" class=\"external-link wikirate-topic-list\">see list</a>\r\n<div id=\"wikirate-topic-dialog\" class=\"wikirate-topic-dialog\" title=\"Topics\"></div>"
      }
    ]
  }
}