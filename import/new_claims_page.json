{
  "url": "http://dev.wikirate.org/export.json",
  "timestamp": "2014-07-12 00:29:36 +0200",
  "card": {
    "name": "export",
    "type": "Pointer",
    "content": "[[*css\r]]\n[[chosen style\r]]\n[[customized classic skin\r]]\n[[tooltipjs\r]]\n[[chosen proto script\r]]\n[[chosen script\r]]\n[[wikirate coffee\r]]\n[[claim chosen\r]]\n[[newClaimJs\r]]\n[[*all+*script\r]]\n[[related articles\r]]\n[[related articles+*right+*structure\r]]\n[[Claim+*type+*structure\r]]\n[[Page+*type+*structure\r]]\n[[companies+*right+*input\r]]\n[[tags+*right+*input\r]]\n[[topics+*right+*input\r]]\n[[source preview\r]]\n[[creator credit\r]]\n[[Claim+Companies+*type plus right+*options\r]]\n[[Claim+Topic+*type plus right+*options\r]]\n[[Year+*right+*default\r]]\n[[Year+*right+*input\r]]\n[[Year+*right+*options]]",
    "value": [
      {
        "name": "*css",
        "type": "SCSS",
        "content": "@import url(\"http://fonts.googleapis.com/css?family=Droid+Sans:400,700\");\r\n\r\n//***ALL COLOR VARS & MIXINS***//\r\n$heading_color: #555;\r\n$body_background: #ebebeb;\r\n$primary_color: #555;\r\n$anchor_color: #03998D;\r\n$body-txt-color: #777;\r\n$wanted-card-color: #b6060a;\r\n$closed-content-a-color: #729;\r\n$infographic-heading: #949494;\r\n$button-color: #03998D;\r\n\r\n//claim colors\r\n$claim-tag-companybg: #D3741C;\r\n$claim-tag-companybg-hover:#BB5B00;\r\n$claim-tag-topicbg:#2B7EA0;\r\n$claim-tag-topicbg-hover:#01648D;\r\n\r\n//navigation colors\r\n$nav-srch-background:#FFF;\r\n$nav-srch-txt-color:#a8a8a8;\r\n$navmenu-anchor-color: #fff;\r\n$navmenu-hover-bgcolor: #03998D;\r\n$navsbmenu-bgcolor: #03998D;\r\n$navsbmenu-anchor-color: #00AC9E;\r\n\r\n@mixin searchbox-color{\r\n  background: $nav-srch-background !important;\r\n  color: $nav-srch-txt-color !important;\r\n}\r\n@mixin searchbox-color-focus{\r\n  background-color: #f3f4de !important;\r\n  color: #a8a8a8 !important;\r\n}\r\n\r\n$card-header-color: #dbdbdb;\r\n\r\n//card colors\r\n@mixin card-txt-color{\r\n  color: #646464;\r\n  a {\r\n    color: #646464;\r\n  }\r\n}\r\n//***COLOR VARS - END***//\r\n\r\n\r\nbody {\r\n  color: $body-txt-color;\r\n  font-family: 'Droid Sans', sans-serif;\r\n  line-height: 1.5em;\r\n  font-size: 0.9em;\r\n}\r\n\r\nbody#wagn {\r\n  min-height: 100%;\r\n  min-width: 480px;\r\n  background: $body_background;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\nbody#tinymce {\r\n   padding: 4px;\r\n}\r\n\r\na {\r\n  color: $anchor_color;\r\n}\r\n\r\na.wanted-card {\r\n  color: $wanted-card-color;\r\n}\r\n\r\n/* many sites may want this external link behavior; it's here because it's a nuisance to override when not desired */\r\na.external-link,\r\n.closed-content a.external-link {\r\n  color: $closed-content-a-color;\r\n  background: url(/assets/external_link.png) center right no-repeat;\r\n  padding-right: 13px !important;\r\n}\r\n\r\nimg {\r\n  border: 0\r\n}\r\n\r\nh1, h2 {\r\n  color: $heading_color;\r\n}\r\n\r\nh1 {\r\n  font-size: 1.2em;\r\n  font-weight: normal;\r\n  line-height: 1.8em;\r\n  padding: 5px 0;\r\n}\r\n\r\n// Search box\r\ninput.navbox {\r\n  @include searchbox-color;\r\n  border: 0px solid #AAA !important;\r\n  padding-left: 3px;\r\n  border-radius: 3px;\r\n\r\n  &:focus {\r\n    @include searchbox-color-focus;\r\n    outline: none;\r\n  }\r\n}\r\n\r\n#logo-bar {\r\n  padding: 0 3%;\r\n  background:#fff;\r\n  img {\r\n    margin-top: 3px;\r\n    height: 40px;\r\n    border:none;\r\n  }\r\n  #logging {\r\n    float:right;\r\n    font-size: 1.1em;\r\n    margin-top: 10px;\r\n    a {\r\n      /*color: #72b671;*/\r\n      color: $anchor_color;\r\n      /*text-shadow: #fff 1px 1px 0px;*/\r\n      margin-left: 10px;\r\n    }\r\n    a:hover {\r\n      color: $body-txt-color;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n#menu-bar {\r\n  background: $primary_color;\r\n  padding: 0 3%;\r\n  // border-bottom: 1px solid #999;\r\n  // -moz-box-shadow: 0px 0px 2px 0px #ccc;\r\n  // -webkit-box-shadow: 0px 0px 2px 0px #ccc;\r\n  // box-shadow: 0px 0px 2px 0px #ccc;\r\n  // text-shadow: #5c995b 1px 1px 0px;\r\n  margin-bottom: 20px;\r\n\r\n  .navbox-form {\r\n    display: inline-block;\r\n    float: right;\r\n    width: 33%\r\n  }\r\n  .navbox {\r\n    height: 25px;\r\n    width: 100%;\r\n    margin-top: 8px;\r\n  }\r\n  a {\r\n    color: $navmenu-anchor-color;\r\n    display: block;\r\n    margin: 0;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.1em;\r\n  }\r\n\r\n  .main-links {\r\n    min-height: 40px;\r\n    > div {\r\n      float: left;\r\n      padding: 10px 3%;\r\n      cursor: pointer;\r\n      span {\r\n        display: block;\r\n        margin: 0;\r\n        text-transform: uppercase;\r\n        letter-spacing: 0.1em;\r\n        color: $navmenu-anchor-color;\r\n      }\r\n    }\r\n    > div:hover {\r\n      background: $navmenu-hover-bgcolor;\r\n    }\r\n  }\r\n\r\n\r\n  ul {\r\n    display: none;\r\n    position: absolute;\r\n    z-index: 1;\r\n    border-radius: 0;\r\n    border: none;\r\n    padding: 0;\r\n    > li {\r\n      padding: 0;\r\n    }\r\n    a {\r\n      border: 0;\r\n      font-size: 0.9em;\r\n      width: auto;\r\n      min-width: 120px;\r\n      padding: 5px 28px;\r\n      background: $navsbmenu-bgcolor;\r\n      border-radius: inherit;\r\n    }\r\n    a:hover {\r\n      background: $navsbmenu-anchor-color;\r\n    }\r\n  }\r\n}\r\n\r\n.more-link {\r\n  float: right;\r\n}\r\n\r\n.card-header {\r\n  font-family: 'Droid Sans';\r\n}\r\n\r\n.card-frame {\r\n  border-radius: 4px;\r\n  border: 0px solid #E5E5E5;\r\n  > .card-header {\r\n    background: $card-header-color;\r\nfont-size: 1.1em;\r\n// font-weight: bold;\r\n    @include card-txt-color;\r\n  }\r\n  > .instruction {\r\n    background: #bbb;\r\n  }\r\n}\r\n\r\n\r\n#main {\r\n  font-size: 1.1em;\r\n  clear: both;\r\n  padding: 20px 3%;\r\n  .card-frame > .card-body > .titled-view {\r\n    margin: 15px 0;\r\n    > .card-body {\r\n      margin: 5px 0 5px 3%;\r\n    }\r\n    > .card-content {\r\n      padding: 10px 20px 15px 20px;\r\n    }\r\n  }\r\n  .card-frame {\r\n    border-radius: 4px;\r\n    > .card-body > h1 {\r\n      font-size: 2em;\r\n      font-weight: normal;\r\n      line-height: 2em;\r\n      padding: 5px 0 0 0;\r\n    }\r\n  }\r\n  > .card-slot > h1 {\r\n    font-size: 1.5em;\r\n    padding: 0 5px;\r\n    .card-title {\r\n      text-align: center;\r\n      display: inline-block;\r\n      width: 90%;\r\n      text-indent: 10%;\r\n    }\r\n  }\r\n}\r\n.card-slot > .card-header .card-menu-link {\r\n  display: none;\r\n}\r\n.card-slot.closed-view,\r\n.card-slot:hover {\r\n  > .card-header .card-menu-link {\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n.revision-navigation,\r\n.current {\r\n  background: #FFFFFF;\r\n}\r\n\r\n\r\nbody.home-layout #main {\r\n  > .card-content {\r\n    .SELF-wikirate_infographic {\r\n      text-align: center;\r\n      background: #fff;\r\n      padding: 10px;\r\n      border-radius: 4px;\r\n      -moz-border-radius: 4px;\r\n      border: 0px solid #E5E5E5;\r\n      > .SELF-infographic {\r\n        float: left;\r\n        display: inline-block;\r\n        width:68%;\r\n      }\r\n      span {\r\n       font-size: 1.8em;\r\n       color: $infographic-heading;\r\n      }\r\n      p {\r\n        line-height: 2em;\r\n        color: #d5d5d5;\r\n        font-size: 1.3em;\r\n      }\r\n      > .wikirate-video-container {\r\n        position: relative;\r\n        padding-bottom: 17%;\r\n        padding-top: 0px;\r\n        height: 0;\r\n        overflow: hidden;\r\n        left: 14px;\r\n        top: -14px;\r\n        width: 30.2%;\r\n        margin: 0px;\r\n        iframe {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      }\r\n    }\r\n    .SELF-industry_of_the_month.content-view {\r\n      min-width: 90%;\r\n      text-align: center;\r\n      padding: 20px 3%;\r\n    }\r\n    .home-left {\r\n      width: 65%;\r\n      float: left;\r\n      .SELF-featured_topic.card-frame {\r\n        margin-top: 40px;\r\n      }\r\n    }\r\n    .home-right {\r\n      width: 33%;\r\n      float: right;\r\n    }\r\n    > #wikirate_tagline {\r\n      text-align: center;\r\n      overflow: visible;\r\n      font-size: 2em;\r\n      padding: 1.5em;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.STRUCTURE-company_feature,\r\n.STRUCTURE-topic_feature {\r\n  clear: both;\r\n  padding: 20px 0;\r\n  min-height: 200px;\r\n}\r\n\r\n.STRUCTURE-company_feature,\r\n.STRUCTURE-topic_feature {\r\n  > a {\r\n    font-size: 1.3em;\r\n  }\r\n\r\n  h1 {\r\n    font-size: 0.9em;\r\n    font-style: italic;\r\n    color: #aaa;\r\n  }\r\n\r\n  .TYPE-image.content-view {\r\n    width: 25%;\r\n    max-width: 100px;\r\n    padding: 0 3% 10px 0;\r\n    min-height: 200px;\r\n\r\n    img {\r\n        border-radius: 10px;\r\n       -moz-border-radius: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n\r\nbody > .SELF-wikirate_footer {\r\n  clear: both;\r\n  display: block;\r\n  padding: 45px 30px 10px 30px;\r\n  text-align: center;\r\n  font-size: 0.9em;\r\n  background: #fff;\r\n  border: 1px solid #E5E5E5;\r\na.external-link {\r\n  padding-right: 0 !important;\r\n  background: inherit !important;\r\n}\r\n[class*=\"SELF-logo_\"] {\r\ndisplay: inline-block;\r\n}\r\n}\r\n\r\n#credit,\r\n#credit a {\r\n  padding: 0 !important;\r\n  background: none;\r\n  border: 0px;\r\n  margin-bottom: 15px;\r\n  position: relative;\r\n}\r\n\r\n#credit {\r\n  z-index: -0;\r\n  left: 8px;\r\n  display: block;\r\n  a {\r\n    right: 16px;\r\n    position: relative;\r\n    z-index: -1;\r\n  }\r\n}\r\n\r\n.RIGHT-claim_count.content-view {\r\n  display: inline;\r\n  float: right;\r\n  color: #999;\r\n}\r\n\r\n.search-result-item > .TYPE-page.content-view {\r\n  .RIGHT-website .pointer-list {\r\n    font-size: 1.1em;\r\n    font-weight: bold;\r\n    padding-bottom: 0;\r\n  }\r\n  .RIGHT-title {\r\n    font-size: 0.9em;\r\n    margin: 0 0 7px 3%;\r\n  }\r\n}\r\n\r\n\r\n\r\n.RIGHT-image_source.content-view {\r\n  font-size: 0.8em;\r\n  font-style: italic;\r\n}\r\n\r\n.TYPE-analysi,\r\n.TYPE-company,\r\n.TYPE-topic {\r\n  &.STRUCTURE-analysi_comparison a.internal-link,\r\n  >.source-side > a {\r\n    display: block;\r\n    padding: 10px;\r\n    margin: 10px 5%;\r\n    float: right;\r\n    border: 2px solid #555;\r\n    border-radius: 10px;\r\n    background: #eee;\r\n    font-size: 1.2em;\r\n  }\r\n}\r\n.TYPE-analysi {\r\n  &.STRUCTURE-analysi_comparison a.internal-link,\r\n  >.source-side > a {\r\n    float: none;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n\r\n\r\n.TYPE-topic .STRUCTURE-topic_analysi_blurb,\r\n.TYPE-company .STRUCTURE-company_analysi_blurb {\r\n  padding: 20px 0 20px 5%;\r\n  border-radius: 10px;\r\n  -moz-border-radius: 10px;\r\n  border-bottom: 1px solid #eee;\r\n  > h1 {\r\n    font-size: 1.2em;\r\n  }\r\n  > a {\r\n    float: right;\r\n  }\r\n}\r\n\r\n.STRUCTURE-analysi_blurb {\r\n  > .card-body,\r\n  .RIGHT-claim {\r\n    padding-left: 5%;\r\n  }\r\n  .RIGHT-claim {\r\n    > .card-content {\r\n      padding: 0 0 0 10%;\r\n    }\r\n    .search-result-item {\r\n      padding-bottom: 10px;\r\n    }\r\n  }\r\n  > a {\r\n    display: inline-block;\r\n    color: #555;\r\n    font-style: italic;\r\n    padding-top: 5px;\r\n  }\r\n}\r\n\r\n\r\n.STRUCTURE-icon_and_link.content-view > a > img,\r\n.STRUCTURE-company_analysi_link.content-view > a > img,\r\n.STRUCTURE-topic_analysi_link.content-view > a > img,\r\n.STRUCTURE-company_link.content-view > a > img,\r\n.STRUCTURE-topic_link.content-view > a > img {\r\n  border-radius: 3px;\r\n  -moz-border-radius: 3px;\r\n  margin-right: 5px;\r\n}\r\n\r\n.STRUCTURE-topic_analysi_link_and_compare .STRUCTURE-compare_link,\r\n.RIGHT-link_and_compare .RIGHT-compare_link {\r\n  float: right;\r\n}\r\n\r\n.STRUCTURE-claim_summary {\r\n  > h1 {\r\n    font-size: 1.1em;\r\n    padding-bottom: 0;\r\n  }\r\n  > .card-body {\r\n    padding:  5px 0 18px 5%;\r\n    margin: 0 0 5px 0px;\r\n    border-bottom: 1px solid #eee;\r\n    font-size: 0.8em;\r\n    .fa {\r\n      padding-right: 5px;\r\n    }\r\n    > div {\r\n      margin-left: 5%;\r\n      padding: 2px 0;\r\n      text-indent: -3%;\r\n      div {\r\n        display: inline;\r\n      }\r\n    }\r\n    .missing-view {\r\n      display: none;\r\n    }\r\n    .RIGHT-source .source-title {\r\n      font-style: italic;\r\n    }\r\n    .pointer-item, .search-result-item {\r\n       text-indent: 10px;\r\n       margin: 0;\r\n       margin-right: 0px !important;\r\n       padding: 2px;\r\n      :after {\r\n        content: ' ';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n#claim-sourcelink .pointer-item a {\r\n  color: $body-txt-color;\r\n    &:hover{\r\n      color:$anchor_color;\r\n    }\r\n }\r\n //.TYPE-claim.open-view .known-card\r\n#claim-tag .known-card, .TYPE-claim.open-view .RIGHT-company .known-card, .RIGHT-topic .known-card {\r\npadding: 2px 3px !important;\r\nborder-radius: 3px;\r\nfont-size: 0.9em;\r\ncolor: #fff;\r\ntext-decoration: none;\r\n}\r\n//, .TYPE-claim.open-view .RIGHT-tag .known-card\r\n#claim-tag .known-card{\r\nbackground:#ccc;\r\n}\r\n\r\n\r\n#claim-tag .RIGHT-company> .pointer-list .known-card, .TYPE-claim.open-view .RIGHT-company .known-card{\r\nbackground: $claim-tag-companybg;\r\n&:hover{\r\nbackground: $claim-tag-companybg-hover;\r\n}\r\n}\r\n#claim-tag .RIGHT-topic> .pointer-list .known-card, .TYPE-claim.open-view .RIGHT-topic .known-card{\r\nbackground:  $claim-tag-topicbg;\r\n&:hover{\r\nbackground: $claim-tag-topicbg-hover;\r\n}\r\n}\r\n\r\n#main > .SELF-topic,\r\n#main > .SELF-company {\r\n  > .card-content > .TYPE-search.card-content > .search-result-list > .search-result-item {\r\n    display: inline-block;\r\n    min-width: 130px;\r\n    width: 17%;\r\n    padding: 10px 1%;\r\n  }\r\n}\r\n\r\n.STRUCTURE-topic_overview,\r\n.STRUCTURE-company_overview {\r\n  box-shadow: 0px 0px 12px 1px rgba(221, 221, 221, 0.87);\r\n  border-radius: 10px;\r\n  -moz-border-radius: 10px;\r\n  text-align: center;\r\n  border: 1px solid rgb(213, 213, 213);\r\n  width: 100%;\r\n  min-height: 250px;\r\n  > a {\r\n    font-size: 1em;\r\n    line-height: 1.6em;\r\n    display: block;\r\n    padding: 5px;\r\n  }\r\n  :hover{\r\n    background: #f8f8f8;\r\n  }\r\n  .card-title {\r\n    display: inline-block;\r\n    height: 60px;\r\n  }\r\n  .TYPE-image {\r\n    width: 80%;\r\n    padding: 5px 10%;\r\n    height: 150px;\r\n    overflow: hidden;\r\n    img {\r\n      max-height: 100%;\r\n    }\r\n  }\r\n  .claim-count {\r\n    color: #999;\r\n    .RIGHT-claim_count {\r\n      color: #444;\r\n      float: none;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.STRUCTURE-labeled_source_frame {\r\n  label {\r\n    display: inline-block;\r\n    padding-right: 10px;\r\n    float: left;\r\n  }\r\n  .RIGHT-title {\r\n    display: inline-block;\r\n    font-size: 1.2em;\r\n    line-height: 1.2em;\r\n  }\r\n  em {\r\n    float: right;\r\n  }\r\n  .pointer-list,\r\n  .pointer-item {\r\n    display: inline;\r\n    padding-left: 0;\r\n  }\r\n}\r\n\r\n\r\nfieldset.RIGHT-link input.card-content {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n\r\n\r\n.comment-box {\r\n  background: inherit;\r\n}\r\n\r\n.TYPE-analysi.card-content {\r\n  .search-no-results {\r\n    display: none;\r\n  }\r\n  > .search-result-list {\r\n    padding: 0;\r\n  }\r\n  .SELF-analysi_image img {\r\n    height: 50px;\r\n    padding-bottom: 25px;\r\n  }\r\n  .side-by-side {\r\n    .RIGHT-logo,\r\n    .SELF-analysi_image,\r\n    .RIGHT-image {\r\n      display: inline-block;\r\n      padding: 10px;\r\n    }\r\n    text-align: center;\r\n    > a {\r\n      > .RIGHT-logo img,\r\n      > .RIGHT-image img {\r\n        border: 4px solid #666;\r\n        border-radius: 10px;\r\n        -moz-border-radius: 10px;\r\n        max-height: 130px;\r\n      }\r\n    }\r\n  }\r\n  > .source-side > .TYPE-search > .card-content {\r\n    padding-left: 3%;\r\n  }\r\n  .RIGHT-right_sidebar.card-content {\r\n    > h1 {\r\n      padding: 0;\r\n    }\r\n    > h2 {\r\n      font-weight: normal;\r\n      font-size: 1em;\r\n      padding: 0 0 15px 3%;\r\n    }\r\n    > .card-content  {\r\n      padding-bottom: 25px;\r\n    }\r\n  }\r\n}\r\n\r\n.RIGHT-right_sidebar .source-title {\r\n  display: block;\r\n  padding: 3px 0 3px 5%\r\n}\r\n.RIGHT-wikirate_source .content-editor select {\r\n  height: 200px;\r\n}\r\n\r\n.STRUCTURE-website_summary.titled-view {\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid #ddd;\r\n  margin-bottom: 20px;\r\n  > .card-content {\r\n    padding-left: 5%;\r\n  }\r\n  .RIGHT-page {\r\n    > h1 {\r\n      font-size: 0.8em;\r\n    }\r\n    padding-left: 5%;\r\n    .search-result-item {\r\n      line-height: 2em;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.SELF-company_comparison.card-content {\r\n  table {\r\n    width: 100%;\r\n  }\r\n  th {\r\n    padding: 5px 1%;\r\n  }\r\n  td {\r\n    padding: 5px 2%;\r\n    width: 50%\r\n  }\r\n  > div {\r\n    width: 46%;\r\n    padding: 5px 2%;\r\n  }\r\n  .left-side {\r\n    float: left;\r\n  }\r\n  .right-side {\r\n    float: right;\r\n  }\r\n\r\n}\r\n\r\n.closed-content label {\r\n  display: inline;\r\n}\r\n\r\n.TYPE_PLUS_RIGHT-company-label img {\r\n  margin: 0 2px 5px 0;\r\n  border-radius: 4px;\r\n  -moz-border-radius: 4px;\r\n}\r\n\r\nfieldset {\r\n > .button-area,\r\n > .editor,\r\n > legend,\r\n > legend > .instruction {\r\n   float: none;\r\n   text-align: left;\r\n   display:inline-block;\r\n   width: 90%;\r\n   padding: 0 5%;\r\n  position:relative;\r\n\r\n>p {\r\ndisplay: none;\r\nposition: absolute;\r\nleft: 18px;\r\nopacity: 0.8;\r\ntop: 50%;\r\nmargin-top: -18px;\r\nmargin-left: 8px;\r\nwidth: auto;\r\ncolor: #FFFFFF;\r\nbackground: #000000;\r\nheight: 30px;\r\nline-height: 30px;\r\npadding: 2px 10px;\r\ntext-align: center;\r\nvisibility: visible;\r\nborder-radius: 6px;\r\nfont-size: 0.8em;\r\n\r\n&:after {\r\ncontent: '';\r\nposition: absolute;\r\ntop: 50%;\r\nright: 100%;\r\nmargin-top: -8px;\r\nwidth: 0;\r\nheight: 0;\r\nborder-right: 8px solid #000000;\r\nborder-top: 8px solid transparent;\r\nborder-bottom: 8px solid transparent;\r\n}\r\n}\r\n }\r\n > legend\r\n   h2{\r\n     display:inline;\r\n   }\r\n > legend > .instruction {\r\n   padding: 4px 0;\r\n   width: 70%;\r\n }\r\n}\r\n\r\n\r\n.source-side, .meta-side{\r\nfloat: left;\r\npadding: 0;\r\nmargin-left: 2.5%;\r\n}\r\n.TYPE-analysi .source-side,.TYPE-company .source-side,.TYPE-topic .source-side{\r\nwidth: 65%;\r\n}\r\n.TYPE-analysi .meta-side,.TYPE-company .meta-side,.TYPE-topic .meta-side{\r\nwidth: 30%;\r\n}\r\n\r\n.TYPE-claim .creator-credit{\r\n  text-align:center;\r\n  .search-result-list{\r\n    display:inline-block;\r\n  }\r\n}\r\n.TYPE-claim .preview-visit-link{\r\n  float:right;\r\n}\r\n.TYPE-claim .analysis-link{\r\n  margin: 3px 0px;\r\n  float: left;\r\n  width: 100%;\r\n}\r\n.TYPE-claim .remove-source{\r\n  display:none;\r\n  float:right;\r\n  cursor:pointer; \r\n}\r\n\r\n.TYPE-claim .source-side {\r\n width: 45%;\r\nmargin-left: 2.5%;\r\nmargin-right: 2.5%;\r\nmargin-top:20px;\r\n  iframe {\r\n    width: 100%;\r\n    height: 500px;\r\n  }\r\n}\r\n\r\n.TYPE-claim .meta-side {\r\nwidth: 44.5%;\r\nposition: static;\r\nmargin: 0 0%;\r\n  > .card-slot {\r\n    margin: 20px 0;\r\n  }\r\n}\r\n.TYPE-claim .meta-side .RIGHT-source, .sourcebox > input{\r\nwidth:100%;\r\n.sourcebox {\r\n      background: #FAFAFA;\r\n      display: inline-block;\r\n      height: 66px;\r\n      width: 96%;\r\n     padding: 12px;\r\n  >button {\r\n      float: right;\r\n      margin: 11px 0px;\r\n     }\r\n  }\r\n.RIGHT-title{\r\nfont-weight: bold;\r\nmargin: 10px 0px;\r\n }\r\n.TYPE-page{\r\n  background: #fafafa;\r\n  margin: 22px 0px;\r\n  padding: 4px 20px 20px 20px;\r\n }\r\n}\r\n\r\n.RIGHT-compare_link.card-content,\r\n.STRUCTURE-compare_link {\r\n  &.card-content.content-view {\r\n    display: inline;\r\n    a {\r\n      background: $button-color;\r\n      font-size: 10px;\r\n      padding: 3px 5px;\r\n      margin-left: 10px;\r\n      color: white;\r\n      border-radius: 3px;\r\n      -moz-border-radius: 3px;\r\n    }\r\n  }\r\n}\r\n\r\n@media all and (max-width: 1280px) and (min-width: 1024px) {\r\nbody>.SELF-wikirate_footer > .consortium-logo-container {\r\nwidth: 102%;\r\n}\r\n}\r\n\r\n#social-icons a {\r\n display: inline-block;\r\n}\r\n\r\n.claim-counting {\r\n float: right;\r\n margin-right: 6%;\r\n}\r\n\r\n.RIGHT-company > div> select {\r\n width: 40%;\r\n}\r\n.RIGHT-topic > div> select {\r\n width: 40%;\r\n}\r\n.claim_p_disclosure_link{\r\nmargin-left: 7.5%;\r\nmargin-bottom: 26px;\r\nfloat: left;\r\n}\r\n\r\n.RIGHT-company>div>div>.chosen-choices li.search-choice {\r\nbackground: #d3741c;\r\nborder: none;\r\nbox-shadow: none;\r\ncolor: #fff;\r\npadding: 7px 8px 8px 6px;\r\n}\r\n.RIGHT-topic>div>div>.chosen-choices li.search-choice {\r\nbackground: #2b7ea0;\r\nborder: none;\r\nbox-shadow: none;\r\ncolor: #fff;\r\npadding: 7px 8px 8px 6px;\r\n}\r\n\r\n.claim-tip{\r\nbackground: #FFF9B3;\r\ntext-align: center;\r\npadding: 8px;\r\nposition: relative;\r\nspan{\r\nposition: absolute;\r\nright: 2px;\r\ntop: 2px;\r\ncursor:pointer;\r\n}\r\n}\r\n\r\n.analysis-link a.company,a.topic{\r\npadding: 2px 8px !important;\r\nfont-size: 0.9em;\r\ntext-decoration: none;\r\nfloat: left;\r\ncolor:#fff;\r\n}\r\n\r\n.analysis-link a.company {\r\nbackground: $claim-tag-companybg;\r\nborder-bottom-left-radius: 3px;\r\nborder-top-left-radius: 3px;\r\n&:hover{\r\nbackground: $claim-tag-companybg-hover;\r\n}\r\n}\r\n.analysis-link a.topic {\r\nbackground:  $claim-tag-topicbg;\r\nmargin-right: 10px;\r\nborder-bottom-right-radius: 3px;\r\nborder-top-right-radius: 3px;\r\n&:hover{\r\nbackground: $claim-tag-topicbg-hover;\r\n}\r\n}\r\n"
      },
      {
        "name": "chosen style",
        "type": "CSS",
        "content": "/*!\r\nChosen, a Select Box Enhancer for jQuery and Prototype\r\nby Patrick Filler for Harvest, http://getharvest.com\r\n\r\nVersion 1.1.0\r\nFull source at https://github.com/harvesthq/chosen\r\nCopyright (c) 2011 Harvest http://getharvest.com\r\n\r\nMIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md\r\nThis file is generated by `grunt build`, do not edit it by hand.\r\n*/\r\n\r\n/* @group Base */\r\n.chosen-container {\r\n  position: relative;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  font-size: 13px;\r\n  zoom: 1;\r\n  *display: inline;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  user-select: none;\r\n}\r\n.chosen-container .chosen-drop {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: -9999px;\r\n  z-index: 1010;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  border: 1px solid #aaa;\r\n  border-top: 0;\r\n  background: #fff;\r\n  box-shadow: 0 4px 5px rgba(0, 0, 0, 0.15);\r\n}\r\n.chosen-container.chosen-with-drop .chosen-drop {\r\n  left: 0;\r\n}\r\n.chosen-container a {\r\n  cursor: pointer;\r\n}\r\n\r\n/* @end */\r\n/* @group Single Chosen */\r\n.chosen-container-single .chosen-single {\r\n  position: relative;\r\n  display: block;\r\n  overflow: hidden;\r\n  padding: 0 0 0 8px;\r\n  height: 23px;\r\n  border: 1px solid #aaa;\r\n  border-radius: 5px;\r\n  background-color: #fff;\r\n  // background: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #ffffff), color-stop(50%, #f6f6f6), color-stop(52%, #eeeeee), color-stop(100%, #f4f4f4));\r\n  // background: -webkit-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  // background: -moz-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  // background: -o-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  // background: linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  background-clip: padding-box;\r\n  box-shadow: 0 0 3px white inset, 0 1px 1px rgba(0, 0, 0, 0.1);\r\n  color: #444;\r\n  text-decoration: none;\r\n  white-space: nowrap;\r\n  line-height: 24px;\r\n}\r\n.chosen-container-single .chosen-default {\r\n  color: #999;\r\n}\r\n.chosen-container-single .chosen-single span {\r\n  display: block;\r\n  overflow: hidden;\r\n  margin-right: 26px;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.chosen-container-single .chosen-single-with-deselect span {\r\n  margin-right: 38px;\r\n}\r\n.chosen-container-single .chosen-single abbr {\r\n  position: absolute;\r\n  top: 6px;\r\n  right: 26px;\r\n  display: block;\r\n  width: 12px;\r\n  height: 12px;\r\n  background: url('chosen-sprite.png') -42px 1px no-repeat;\r\n  font-size: 1px;\r\n}\r\n.chosen-container-single .chosen-single abbr:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chosen-container-single.chosen-disabled .chosen-single abbr:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chosen-container-single .chosen-single div {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  display: block;\r\n  width: 18px;\r\n  height: 100%;\r\n}\r\n.chosen-container-single .chosen-single div b {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: url('chosen-sprite.png') no-repeat 0px 2px;\r\n}\r\n.chosen-container-single .chosen-search {\r\n  position: relative;\r\n  z-index: 1010;\r\n  margin: 0;\r\n  padding: 3px 4px;\r\n  white-space: nowrap;\r\n}\r\n.chosen-container-single .chosen-search input[type=\"text\"] {\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  margin: 1px 0;\r\n  padding: 4px 20px 4px 5px;\r\n  width: 100%;\r\n  height: auto;\r\n  outline: 0;\r\n  border: 1px solid #aaa;\r\n  background: white url('chosen-sprite.png') no-repeat 100% -20px;\r\n  background: url('chosen-sprite.png') no-repeat 100% -20px;\r\n  font-size: 1em;\r\n  font-family: sans-serif;\r\n  line-height: normal;\r\n  border-radius: 0;\r\n}\r\n.chosen-container-single .chosen-drop {\r\n  margin-top: -1px;\r\n  border-radius: 0 0 4px 4px;\r\n  background-clip: padding-box;\r\n}\r\n.chosen-container-single.chosen-container-single-nosearch .chosen-search {\r\n  position: absolute;\r\n  left: -9999px;\r\n}\r\n\r\n/* @end */\r\n/* @group Results */\r\n.chosen-container .chosen-results {\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  margin: 0 4px 4px 0;\r\n  padding: 0 0 0 4px;\r\n  max-height: 240px;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n.chosen-container .chosen-results li {\r\n  display: none;\r\n  margin: 0;\r\n  padding: 5px 6px;\r\n  list-style: none;\r\n  line-height: 15px;\r\n  -webkit-touch-callout: none;\r\n}\r\n.chosen-container .chosen-results li.active-result {\r\n  display: list-item;\r\n  cursor: pointer;\r\n}\r\n.chosen-container .chosen-results li.disabled-result {\r\n  display: list-item;\r\n  color: #ccc;\r\n  cursor: default;\r\n}\r\n.chosen-container .chosen-results li.highlighted {\r\n  background-color: #03998D;\r\n  // background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #3875d7), color-stop(90%, #2a62bc));\r\n  // background-image: -webkit-linear-gradient(#3875d7 20%, #2a62bc 90%);\r\n  // background-image: -moz-linear-gradient(#3875d7 20%, #2a62bc 90%);\r\n  // background-image: -o-linear-gradient(#3875d7 20%, #2a62bc 90%);\r\n  // background-image: linear-gradient(#3875d7 20%, #2a62bc 90%);\r\n  color: #fff;\r\n}\r\n.chosen-container .chosen-results li.no-results {\r\n  display: list-item;\r\n  background: #f4f4f4;\r\n}\r\n.chosen-container .chosen-results li.group-result {\r\n  display: list-item;\r\n  font-weight: bold;\r\n  cursor: default;\r\n}\r\n.chosen-container .chosen-results li.group-option {\r\n  padding-left: 15px;\r\n}\r\n.chosen-container .chosen-results li em {\r\n  font-style: normal;\r\n  text-decoration: underline;\r\n}\r\n\r\n/* @end */\r\n/* @group Multi Chosen */\r\n.chosen-container-multi .chosen-choices {\r\n  position: relative;\r\n  overflow: hidden;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: auto !important;\r\n  height: 1%;\r\n  border: 1px solid #aaa;\r\n  background-color: #f5f5f5;\r\n  -webkit-border-radius: 3px;\r\n  -moz-border-radius: 3px;\r\n  border-radius: 3px;\r\n  // background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(1%, #eeeeee), color-stop(15%, #ffffff));\r\n  // background-image: -webkit-linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  // background-image: -moz-linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  // background-image: -o-linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  // background-image: linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  cursor: text;\r\n}\r\n.chosen-container-multi .chosen-choices li {\r\n  float: left;\r\n  list-style: none;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-field {\r\n  margin: 0;\r\n  padding: 0;\r\n  white-space: nowrap;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-field input[type=\"text\"] {\r\n  margin: 1px 0;\r\n  padding: 5px;\r\n  height: 22px;\r\n  outline: 0;\r\n  border: 0 !important;\r\n  background: transparent !important;\r\n  box-shadow: none;\r\n  color: #666;\r\n  font-size: 100%;\r\n  font-family: sans-serif;\r\n  line-height: normal;\r\n  border-radius: 0;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-field .default {\r\n  color: #999;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice {\r\n  position: relative;\r\n  margin: 3px 0 3px 5px;\r\n  padding: 3px 20px 3px 5px;\r\n  border: 1px solid #aaa;\r\n  border-radius: 3px;\r\n  background-color: #e4e4e4;\r\n  // background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));\r\n  // background-image: -webkit-linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: -moz-linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: -o-linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-clip: padding-box;\r\n  box-shadow: 0 0 2px white inset, 0 1px 0 rgba(0, 0, 0, 0.05);\r\n  color: #333;\r\n  line-height: 13px;\r\n  cursor: default;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice .search-choice-close {\r\n  position: absolute;\r\n  top: 4px;\r\n  right: 3px;\r\n  display: block;\r\n  width: 12px;\r\n  height: 12px;\r\n  background: url('chosen-sprite.png') -42px 1px no-repeat;\r\n  font-size: 1px;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice .search-choice-close:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice-disabled {\r\n  padding-right: 5px;\r\n  border: 1px solid #ccc;\r\n  background-color: #e4e4e4;\r\n  // background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));\r\n  // background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: -o-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  // background-image: linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  color: #666;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice-focus {\r\n  background: #d4d4d4;\r\n}\r\n.chosen-container-multi .chosen-choices li.search-choice-focus .search-choice-close {\r\n  background-position: -42px -10px;\r\n}\r\n.chosen-container-multi .chosen-results {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.chosen-container-multi .chosen-drop .result-selected {\r\n  display: list-item;\r\n  color: #ccc;\r\n  cursor: default;\r\n}\r\n\r\n/* @end */\r\n/* @group Active  */\r\n.chosen-container-active .chosen-single {\r\n  border: 1px solid #03998D;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\r\n}\r\n.chosen-container-active.chosen-with-drop .chosen-single {\r\n  border: 1px solid #aaa;\r\n  -moz-border-radius-bottomright: 0;\r\n  border-bottom-right-radius: 0;\r\n  -moz-border-radius-bottomleft: 0;\r\n  border-bottom-left-radius: 0;\r\n  // background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #eeeeee), color-stop(80%, #ffffff));\r\n  // background-image: -webkit-linear-gradient(#eeeeee 20%, #ffffff 80%);\r\n  // background-image: -moz-linear-gradient(#eeeeee 20%, #ffffff 80%);\r\n  // background-image: -o-linear-gradient(#eeeeee 20%, #ffffff 80%);\r\n  // background-image: linear-gradient(#eeeeee 20%, #ffffff 80%);\r\n  box-shadow: 0 1px 0 #fff inset;\r\n}\r\n.chosen-container-active.chosen-with-drop .chosen-single div {\r\n  border-left: none;\r\n  background: transparent;\r\n}\r\n.chosen-container-active.chosen-with-drop .chosen-single div b {\r\n  background-position: -18px 2px;\r\n}\r\n.chosen-container-active .chosen-choices {\r\n  border: 1px solid #03998D;\r\n  // box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\r\n  -webkit-border-radius: 3px;\r\n  -moz-border-radius: 3px;\r\n  border-radius: 3px;\r\n}\r\n.chosen-container-active .chosen-choices li.search-field input[type=\"text\"] {\r\n  color: #111 !important;\r\n}\r\n\r\n/* @end */\r\n/* @group Disabled Support */\r\n.chosen-disabled {\r\n  opacity: 0.5 !important;\r\n  cursor: default;\r\n}\r\n.chosen-disabled .chosen-single {\r\n  cursor: default;\r\n}\r\n.chosen-disabled .chosen-choices .search-choice .search-choice-close {\r\n  cursor: default;\r\n}\r\n\r\n/* @end */\r\n/* @group Right to Left */\r\n.chosen-rtl {\r\n  text-align: right;\r\n}\r\n.chosen-rtl .chosen-single {\r\n  overflow: visible;\r\n  padding: 0 8px 0 0;\r\n}\r\n.chosen-rtl .chosen-single span {\r\n  margin-right: 0;\r\n  margin-left: 26px;\r\n  direction: rtl;\r\n}\r\n.chosen-rtl .chosen-single-with-deselect span {\r\n  margin-left: 38px;\r\n}\r\n.chosen-rtl .chosen-single div {\r\n  right: auto;\r\n  left: 3px;\r\n}\r\n.chosen-rtl .chosen-single abbr {\r\n  right: auto;\r\n  left: 26px;\r\n}\r\n.chosen-rtl .chosen-choices li {\r\n  float: right;\r\n}\r\n.chosen-rtl .chosen-choices li.search-field input[type=\"text\"] {\r\n  direction: rtl;\r\n}\r\n.chosen-rtl .chosen-choices li.search-choice {\r\n  margin: 3px 5px 3px 0;\r\n  padding: 3px 5px 3px 19px;\r\n}\r\n.chosen-rtl .chosen-choices li.search-choice .search-choice-close {\r\n  right: auto;\r\n  left: 4px;\r\n}\r\n.chosen-rtl.chosen-container-single-nosearch .chosen-search,\r\n.chosen-rtl .chosen-drop {\r\n  left: 9999px;\r\n}\r\n.chosen-rtl.chosen-container-single .chosen-results {\r\n  margin: 0 0 4px 4px;\r\n  padding: 0 4px 0 0;\r\n}\r\n.chosen-rtl .chosen-results li.group-option {\r\n  padding-right: 15px;\r\n  padding-left: 0;\r\n}\r\n.chosen-rtl.chosen-container-active.chosen-with-drop .chosen-single div {\r\n  border-right: none;\r\n}\r\n.chosen-rtl .chosen-search input[type=\"text\"] {\r\n  padding: 4px 5px 4px 20px;\r\n  background: white url('chosen-sprite.png') no-repeat -30px -20px;\r\n  background: url('chosen-sprite.png') no-repeat -30px -20px;\r\n  direction: rtl;\r\n}\r\n.chosen-rtl.chosen-container-single .chosen-single div b {\r\n  background-position: 6px 2px;\r\n}\r\n.chosen-rtl.chosen-container-single.chosen-with-drop .chosen-single div b {\r\n  background-position: -12px 2px;\r\n}\r\n\r\n/* @end */\r\n/* @group Retina compatibility */\r\n@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-resolution: 144dpi) {\r\n  .chosen-rtl .chosen-search input[type=\"text\"],\r\n  .chosen-container-single .chosen-single abbr,\r\n  .chosen-container-single .chosen-single div b,\r\n  .chosen-container-single .chosen-search input[type=\"text\"],\r\n  .chosen-container-multi .chosen-choices .search-choice .search-choice-close,\r\n  .chosen-container .chosen-results-scroll-down span,\r\n  .chosen-container .chosen-results-scroll-up span {\r\n    background-image: url('chosen-sprite@2x.png') !important;\r\n    background-size: 52px 37px !important;\r\n    background-repeat: no-repeat !important;\r\n  }\r\n}\r\n/* @end */\r\n"
      },
      {
        "name": "customized classic skin",
        "type": "Skin",
        "content": "[[classic skin\r]]\n[[*css\r]]\n[[chosen style]]"
      },
      {
        "name": "tooltipjs",
        "type": "JavaScript",
        "content": "$(document).ready(function(){\r\n  var $helpText = $(\".instruction\");\r\n\r\n  $helpText.each(function(){\r\n    _this = $(this);\r\n    _this.children().hide();\r\n    _this.append('<div class=\"fa fa-question-circle helpTextQuestionMrk\"></div>');\r\n    _this.find(\".helpTextQuestionMrk\").mouseover(function(){\r\n      $(this).siblings('p').show();\r\n    });\r\n    _this.find(\".helpTextQuestionMrk\").mouseout(function(){\r\n      $(this).siblings('p').hide();\r\n    });\r\n  })\r\nvar $newView = $(\".TYPE-claim.new-view\").find(\"._pDisLink\");\r\n\r\nif($newView.length){\r\n  $newView.show();\r\n  $(\".RIGHT-basi,.RIGHT-tag,.RIGHT-year, .RIGHT-related_article\").hide();\r\n  $(\"#_addBasis\").click(function(){\r\n      $(\".RIGHT-basi\").show();\r\n      $(this).hide();\r\n  });\r\n  $(\"#_addMoreInfo\").click(function(){\r\n      $(\".RIGHT-tag,.RIGHT-year,.RIGHT-related_article\").show();\r\n      $(this).hide();\r\n  });\r\n}\r\n})\r\n"
      },
      {
        "name": "chosen proto script",
        "type": "JavaScript",
        "content": "/*!\r\nChosen, a Select Box Enhancer for jQuery and Prototype\r\nby Patrick Filler for Harvest, http://getharvest.com\r\n\r\nVersion 1.1.0\r\nFull source at https://github.com/harvesthq/chosen\r\nCopyright (c) 2011 Harvest http://getharvest.com\r\n\r\nMIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md\r\nThis file is generated by `grunt build`, do not edit it by hand.\r\n*/\r\n\r\n(function() {\r\n  var AbstractChosen, SelectParser, _ref,\r\n    __hasProp = {}.hasOwnProperty,\r\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\r\n\r\n  SelectParser = (function() {\r\n    function SelectParser() {\r\n      this.options_index = 0;\r\n      this.parsed = [];\r\n    }\r\n\r\n    SelectParser.prototype.add_node = function(child) {\r\n      if (child.nodeName.toUpperCase() === \"OPTGROUP\") {\r\n        return this.add_group(child);\r\n      } else {\r\n        return this.add_option(child);\r\n      }\r\n    };\r\n\r\n    SelectParser.prototype.add_group = function(group) {\r\n      var group_position, option, _i, _len, _ref, _results;\r\n      group_position = this.parsed.length;\r\n      this.parsed.push({\r\n        array_index: group_position,\r\n        group: true,\r\n        label: this.escapeExpression(group.label),\r\n        children: 0,\r\n        disabled: group.disabled\r\n      });\r\n      _ref = group.childNodes;\r\n      _results = [];\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        option = _ref[_i];\r\n        _results.push(this.add_option(option, group_position, group.disabled));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    SelectParser.prototype.add_option = function(option, group_position, group_disabled) {\r\n      if (option.nodeName.toUpperCase() === \"OPTION\") {\r\n        if (option.text !== \"\") {\r\n          if (group_position != null) {\r\n            this.parsed[group_position].children += 1;\r\n          }\r\n          this.parsed.push({\r\n            array_index: this.parsed.length,\r\n            options_index: this.options_index,\r\n            value: option.value,\r\n            text: option.text,\r\n            html: option.innerHTML,\r\n            selected: option.selected,\r\n            disabled: group_disabled === true ? group_disabled : option.disabled,\r\n            group_array_index: group_position,\r\n            classes: option.className,\r\n            style: option.style.cssText\r\n          });\r\n        } else {\r\n          this.parsed.push({\r\n            array_index: this.parsed.length,\r\n            options_index: this.options_index,\r\n            empty: true\r\n          });\r\n        }\r\n        return this.options_index += 1;\r\n      }\r\n    };\r\n\r\n    SelectParser.prototype.escapeExpression = function(text) {\r\n      var map, unsafe_chars;\r\n      if ((text == null) || text === false) {\r\n        return \"\";\r\n      }\r\n      if (!/[\\&\\<\\>\\\"\\'\\`]/.test(text)) {\r\n        return text;\r\n      }\r\n      map = {\r\n        \"<\": \"&lt;\",\r\n        \">\": \"&gt;\",\r\n        '\"': \"&quot;\",\r\n        \"'\": \"&#x27;\",\r\n        \"`\": \"&#x60;\"\r\n      };\r\n      unsafe_chars = /&(?!\\w+;)|[\\<\\>\\\"\\'\\`]/g;\r\n      return text.replace(unsafe_chars, function(chr) {\r\n        return map[chr] || \"&amp;\";\r\n      });\r\n    };\r\n\r\n    return SelectParser;\r\n\r\n  })();\r\n\r\n  SelectParser.select_to_array = function(select) {\r\n    var child, parser, _i, _len, _ref;\r\n    parser = new SelectParser();\r\n    _ref = select.childNodes;\r\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n      child = _ref[_i];\r\n      parser.add_node(child);\r\n    }\r\n    return parser.parsed;\r\n  };\r\n\r\n  AbstractChosen = (function() {\r\n    function AbstractChosen(form_field, options) {\r\n      this.form_field = form_field;\r\n      this.options = options != null ? options : {};\r\n      if (!AbstractChosen.browser_is_supported()) {\r\n        return;\r\n      }\r\n      this.is_multiple = this.form_field.multiple;\r\n      this.set_default_text();\r\n      this.set_default_values();\r\n      this.setup();\r\n      this.set_up_html();\r\n      this.register_observers();\r\n    }\r\n\r\n    AbstractChosen.prototype.set_default_values = function() {\r\n      var _this = this;\r\n      this.click_test_action = function(evt) {\r\n        return _this.test_active_click(evt);\r\n      };\r\n      this.activate_action = function(evt) {\r\n        return _this.activate_field(evt);\r\n      };\r\n      this.active_field = false;\r\n      this.mouse_on_container = false;\r\n      this.results_showing = false;\r\n      this.result_highlighted = null;\r\n      this.allow_single_deselect = (this.options.allow_single_deselect != null) && (this.form_field.options[0] != null) && this.form_field.options[0].text === \"\" ? this.options.allow_single_deselect : false;\r\n      this.disable_search_threshold = this.options.disable_search_threshold || 0;\r\n      this.disable_search = this.options.disable_search || false;\r\n      this.enable_split_word_search = this.options.enable_split_word_search != null ? this.options.enable_split_word_search : true;\r\n      this.group_search = this.options.group_search != null ? this.options.group_search : true;\r\n      this.search_contains = this.options.search_contains || false;\r\n      this.single_backstroke_delete = this.options.single_backstroke_delete != null ? this.options.single_backstroke_delete : true;\r\n      this.max_selected_options = this.options.max_selected_options || Infinity;\r\n      this.inherit_select_classes = this.options.inherit_select_classes || false;\r\n      this.display_selected_options = this.options.display_selected_options != null ? this.options.display_selected_options : true;\r\n      return this.display_disabled_options = this.options.display_disabled_options != null ? this.options.display_disabled_options : true;\r\n    };\r\n\r\n    AbstractChosen.prototype.set_default_text = function() {\r\n      if (this.form_field.getAttribute(\"data-placeholder\")) {\r\n        this.default_text = this.form_field.getAttribute(\"data-placeholder\");\r\n      } else if (this.is_multiple) {\r\n        this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || AbstractChosen.default_multiple_text;\r\n      } else {\r\n        this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || AbstractChosen.default_single_text;\r\n      }\r\n      return this.results_none_found = this.form_field.getAttribute(\"data-no_results_text\") || this.options.no_results_text || AbstractChosen.default_no_result_text;\r\n    };\r\n\r\n    AbstractChosen.prototype.mouse_enter = function() {\r\n      return this.mouse_on_container = true;\r\n    };\r\n\r\n    AbstractChosen.prototype.mouse_leave = function() {\r\n      return this.mouse_on_container = false;\r\n    };\r\n\r\n    AbstractChosen.prototype.input_focus = function(evt) {\r\n      var _this = this;\r\n      if (this.is_multiple) {\r\n        if (!this.active_field) {\r\n          return setTimeout((function() {\r\n            return _this.container_mousedown();\r\n          }), 50);\r\n        }\r\n      } else {\r\n        if (!this.active_field) {\r\n          return this.activate_field();\r\n        }\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.input_blur = function(evt) {\r\n      var _this = this;\r\n      if (!this.mouse_on_container) {\r\n        this.active_field = false;\r\n        return setTimeout((function() {\r\n          return _this.blur_test();\r\n        }), 100);\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.results_option_build = function(options) {\r\n      var content, data, _i, _len, _ref;\r\n      content = '';\r\n      _ref = this.results_data;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        data = _ref[_i];\r\n        if (data.group) {\r\n          content += this.result_add_group(data);\r\n        } else {\r\n          content += this.result_add_option(data);\r\n        }\r\n        if (options != null ? options.first : void 0) {\r\n          if (data.selected && this.is_multiple) {\r\n            this.choice_build(data);\r\n          } else if (data.selected && !this.is_multiple) {\r\n            this.single_set_selected_text(data.text);\r\n          }\r\n        }\r\n      }\r\n      return content;\r\n    };\r\n\r\n    AbstractChosen.prototype.result_add_option = function(option) {\r\n      var classes, option_el;\r\n      if (!option.search_match) {\r\n        return '';\r\n      }\r\n      if (!this.include_option_in_results(option)) {\r\n        return '';\r\n      }\r\n      classes = [];\r\n      if (!option.disabled && !(option.selected && this.is_multiple)) {\r\n        classes.push(\"active-result\");\r\n      }\r\n      if (option.disabled && !(option.selected && this.is_multiple)) {\r\n        classes.push(\"disabled-result\");\r\n      }\r\n      if (option.selected) {\r\n        classes.push(\"result-selected\");\r\n      }\r\n      if (option.group_array_index != null) {\r\n        classes.push(\"group-option\");\r\n      }\r\n      if (option.classes !== \"\") {\r\n        classes.push(option.classes);\r\n      }\r\n      option_el = document.createElement(\"li\");\r\n      option_el.className = classes.join(\" \");\r\n      option_el.style.cssText = option.style;\r\n      option_el.setAttribute(\"data-option-array-index\", option.array_index);\r\n      option_el.innerHTML = option.search_text;\r\n      return this.outerHTML(option_el);\r\n    };\r\n\r\n    AbstractChosen.prototype.result_add_group = function(group) {\r\n      var group_el;\r\n      if (!(group.search_match || group.group_match)) {\r\n        return '';\r\n      }\r\n      if (!(group.active_options > 0)) {\r\n        return '';\r\n      }\r\n      group_el = document.createElement(\"li\");\r\n      group_el.className = \"group-result\";\r\n      group_el.innerHTML = group.search_text;\r\n      return this.outerHTML(group_el);\r\n    };\r\n\r\n    AbstractChosen.prototype.results_update_field = function() {\r\n      this.set_default_text();\r\n      if (!this.is_multiple) {\r\n        this.results_reset_cleanup();\r\n      }\r\n      this.result_clear_highlight();\r\n      this.results_build();\r\n      if (this.results_showing) {\r\n        return this.winnow_results();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.reset_single_select_options = function() {\r\n      var result, _i, _len, _ref, _results;\r\n      _ref = this.results_data;\r\n      _results = [];\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        result = _ref[_i];\r\n        if (result.selected) {\r\n          _results.push(result.selected = false);\r\n        } else {\r\n          _results.push(void 0);\r\n        }\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    AbstractChosen.prototype.results_toggle = function() {\r\n      if (this.results_showing) {\r\n        return this.results_hide();\r\n      } else {\r\n        return this.results_show();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.results_search = function(evt) {\r\n      if (this.results_showing) {\r\n        return this.winnow_results();\r\n      } else {\r\n        return this.results_show();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.winnow_results = function() {\r\n      var escapedSearchText, option, regex, regexAnchor, results, results_group, searchText, startpos, text, zregex, _i, _len, _ref;\r\n      this.no_results_clear();\r\n      results = 0;\r\n      searchText = this.get_search_text();\r\n      escapedSearchText = searchText.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\r\n      regexAnchor = this.search_contains ? \"\" : \"^\";\r\n      regex = new RegExp(regexAnchor + escapedSearchText, 'i');\r\n      zregex = new RegExp(escapedSearchText, 'i');\r\n      _ref = this.results_data;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        option = _ref[_i];\r\n        option.search_match = false;\r\n        results_group = null;\r\n        if (this.include_option_in_results(option)) {\r\n          if (option.group) {\r\n            option.group_match = false;\r\n            option.active_options = 0;\r\n          }\r\n          if ((option.group_array_index != null) && this.results_data[option.group_array_index]) {\r\n            results_group = this.results_data[option.group_array_index];\r\n            if (results_group.active_options === 0 && results_group.search_match) {\r\n              results += 1;\r\n            }\r\n            results_group.active_options += 1;\r\n          }\r\n          if (!(option.group && !this.group_search)) {\r\n            option.search_text = option.group ? option.label : option.html;\r\n            option.search_match = this.search_string_match(option.search_text, regex);\r\n            if (option.search_match && !option.group) {\r\n              results += 1;\r\n            }\r\n            if (option.search_match) {\r\n              if (searchText.length) {\r\n                startpos = option.search_text.search(zregex);\r\n                text = option.search_text.substr(0, startpos + searchText.length) + '</em>' + option.search_text.substr(startpos + searchText.length);\r\n                option.search_text = text.substr(0, startpos) + '<em>' + text.substr(startpos);\r\n              }\r\n              if (results_group != null) {\r\n                results_group.group_match = true;\r\n              }\r\n            } else if ((option.group_array_index != null) && this.results_data[option.group_array_index].search_match) {\r\n              option.search_match = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      this.result_clear_highlight();\r\n      if (results < 1 && searchText.length) {\r\n        this.update_results_content(\"\");\r\n        return this.no_results(searchText);\r\n      } else {\r\n        this.update_results_content(this.results_option_build());\r\n        return this.winnow_results_set_highlight();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.search_string_match = function(search_string, regex) {\r\n      var part, parts, _i, _len;\r\n      if (regex.test(search_string)) {\r\n        return true;\r\n      } else if (this.enable_split_word_search && (search_string.indexOf(\" \") >= 0 || search_string.indexOf(\"[\") === 0)) {\r\n        parts = search_string.replace(/\\[|\\]/g, \"\").split(\" \");\r\n        if (parts.length) {\r\n          for (_i = 0, _len = parts.length; _i < _len; _i++) {\r\n            part = parts[_i];\r\n            if (regex.test(part)) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.choices_count = function() {\r\n      var option, _i, _len, _ref;\r\n      if (this.selected_option_count != null) {\r\n        return this.selected_option_count;\r\n      }\r\n      this.selected_option_count = 0;\r\n      _ref = this.form_field.options;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        option = _ref[_i];\r\n        if (option.selected) {\r\n          this.selected_option_count += 1;\r\n        }\r\n      }\r\n      return this.selected_option_count;\r\n    };\r\n\r\n    AbstractChosen.prototype.choices_click = function(evt) {\r\n      evt.preventDefault();\r\n      if (!(this.results_showing || this.is_disabled)) {\r\n        return this.results_show();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.keyup_checker = function(evt) {\r\n      var stroke, _ref;\r\n      stroke = (_ref = evt.which) != null ? _ref : evt.keyCode;\r\n      this.search_field_scale();\r\n      switch (stroke) {\r\n        case 8:\r\n          if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0) {\r\n            return this.keydown_backstroke();\r\n          } else if (!this.pending_backstroke) {\r\n            this.result_clear_highlight();\r\n            return this.results_search();\r\n          }\r\n          break;\r\n        case 13:\r\n          evt.preventDefault();\r\n          if (this.results_showing) {\r\n            return this.result_select(evt);\r\n          }\r\n          break;\r\n        case 27:\r\n          if (this.results_showing) {\r\n            this.results_hide();\r\n          }\r\n          return true;\r\n        case 9:\r\n        case 38:\r\n        case 40:\r\n        case 16:\r\n        case 91:\r\n        case 17:\r\n          break;\r\n        default:\r\n          return this.results_search();\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.clipboard_event_checker = function(evt) {\r\n      var _this = this;\r\n      return setTimeout((function() {\r\n        return _this.results_search();\r\n      }), 50);\r\n    };\r\n\r\n    AbstractChosen.prototype.container_width = function() {\r\n      if (this.options.width != null) {\r\n        return this.options.width;\r\n      } else {\r\n        return \"\" + this.form_field.offsetWidth + \"px\";\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.include_option_in_results = function(option) {\r\n      if (this.is_multiple && (!this.display_selected_options && option.selected)) {\r\n        return false;\r\n      }\r\n      if (!this.display_disabled_options && option.disabled) {\r\n        return false;\r\n      }\r\n      if (option.empty) {\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    AbstractChosen.prototype.search_results_touchstart = function(evt) {\r\n      this.touch_started = true;\r\n      return this.search_results_mouseover(evt);\r\n    };\r\n\r\n    AbstractChosen.prototype.search_results_touchmove = function(evt) {\r\n      this.touch_started = false;\r\n      return this.search_results_mouseout(evt);\r\n    };\r\n\r\n    AbstractChosen.prototype.search_results_touchend = function(evt) {\r\n      if (this.touch_started) {\r\n        return this.search_results_mouseup(evt);\r\n      }\r\n    };\r\n\r\n    AbstractChosen.prototype.outerHTML = function(element) {\r\n      var tmp;\r\n      if (element.outerHTML) {\r\n        return element.outerHTML;\r\n      }\r\n      tmp = document.createElement(\"div\");\r\n      tmp.appendChild(element);\r\n      return tmp.innerHTML;\r\n    };\r\n\r\n    AbstractChosen.browser_is_supported = function() {\r\n      if (window.navigator.appName === \"Microsoft Internet Explorer\") {\r\n        return document.documentMode >= 8;\r\n      }\r\n      if (/iP(od|hone)/i.test(window.navigator.userAgent)) {\r\n        return false;\r\n      }\r\n      if (/Android/i.test(window.navigator.userAgent)) {\r\n        if (/Mobile/i.test(window.navigator.userAgent)) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    AbstractChosen.default_multiple_text = \"Select Some Options\";\r\n\r\n    AbstractChosen.default_single_text = \"Select an Option\";\r\n\r\n    AbstractChosen.default_no_result_text = \"No results match\";\r\n\r\n    return AbstractChosen;\r\n\r\n  })();\r\n\r\n  this.Chosen = (function(_super) {\r\n    __extends(Chosen, _super);\r\n\r\n    function Chosen() {\r\n      _ref = Chosen.__super__.constructor.apply(this, arguments);\r\n      return _ref;\r\n    }\r\n\r\n    Chosen.prototype.setup = function() {\r\n      this.current_selectedIndex = this.form_field.selectedIndex;\r\n      return this.is_rtl = this.form_field.hasClassName(\"chosen-rtl\");\r\n    };\r\n\r\n    Chosen.prototype.set_default_values = function() {\r\n      Chosen.__super__.set_default_values.call(this);\r\n      this.single_temp = new Template('<a class=\"chosen-single chosen-default\" tabindex=\"-1\"><span>#{default}</span><div><b></b></div></a><div class=\"chosen-drop\"><div class=\"chosen-search\"><input type=\"text\" autocomplete=\"off\" /></div><ul class=\"chosen-results\"></ul></div>');\r\n      this.multi_temp = new Template('<ul class=\"chosen-choices\"><li class=\"search-field\"><input type=\"text\" value=\"#{default}\" class=\"default\" autocomplete=\"off\" style=\"width:25px;\" /></li></ul><div class=\"chosen-drop\"><ul class=\"chosen-results\"></ul></div>');\r\n      return this.no_results_temp = new Template('<li class=\"no-results\">' + this.results_none_found + ' \"<span>#{terms}</span>\"</li>');\r\n    };\r\n\r\n    Chosen.prototype.set_up_html = function() {\r\n      var container_classes, container_props;\r\n      container_classes = [\"chosen-container\"];\r\n      container_classes.push(\"chosen-container-\" + (this.is_multiple ? \"multi\" : \"single\"));\r\n      if (this.inherit_select_classes && this.form_field.className) {\r\n        container_classes.push(this.form_field.className);\r\n      }\r\n      if (this.is_rtl) {\r\n        container_classes.push(\"chosen-rtl\");\r\n      }\r\n      container_props = {\r\n        'class': container_classes.join(' '),\r\n        'style': \"width: \" + (this.container_width()) + \";\",\r\n        'title': this.form_field.title\r\n      };\r\n      if (this.form_field.id.length) {\r\n        container_props.id = this.form_field.id.replace(/[^\\w]/g, '_') + \"_chosen\";\r\n      }\r\n      this.container = this.is_multiple ? new Element('div', container_props).update(this.multi_temp.evaluate({\r\n        \"default\": this.default_text\r\n      })) : new Element('div', container_props).update(this.single_temp.evaluate({\r\n        \"default\": this.default_text\r\n      }));\r\n      this.form_field.hide().insert({\r\n        after: this.container\r\n      });\r\n      this.dropdown = this.container.down('div.chosen-drop');\r\n      this.search_field = this.container.down('input');\r\n      this.search_results = this.container.down('ul.chosen-results');\r\n      this.search_field_scale();\r\n      this.search_no_results = this.container.down('li.no-results');\r\n      if (this.is_multiple) {\r\n        this.search_choices = this.container.down('ul.chosen-choices');\r\n        this.search_container = this.container.down('li.search-field');\r\n      } else {\r\n        this.search_container = this.container.down('div.chosen-search');\r\n        this.selected_item = this.container.down('.chosen-single');\r\n      }\r\n      this.results_build();\r\n      this.set_tab_index();\r\n      this.set_label_behavior();\r\n      return this.form_field.fire(\"chosen:ready\", {\r\n        chosen: this\r\n      });\r\n    };\r\n\r\n    Chosen.prototype.register_observers = function() {\r\n      var _this = this;\r\n      this.container.observe(\"mousedown\", function(evt) {\r\n        return _this.container_mousedown(evt);\r\n      });\r\n      this.container.observe(\"mouseup\", function(evt) {\r\n        return _this.container_mouseup(evt);\r\n      });\r\n      this.container.observe(\"mouseenter\", function(evt) {\r\n        return _this.mouse_enter(evt);\r\n      });\r\n      this.container.observe(\"mouseleave\", function(evt) {\r\n        return _this.mouse_leave(evt);\r\n      });\r\n      this.search_results.observe(\"mouseup\", function(evt) {\r\n        return _this.search_results_mouseup(evt);\r\n      });\r\n      this.search_results.observe(\"mouseover\", function(evt) {\r\n        return _this.search_results_mouseover(evt);\r\n      });\r\n      this.search_results.observe(\"mouseout\", function(evt) {\r\n        return _this.search_results_mouseout(evt);\r\n      });\r\n      this.search_results.observe(\"mousewheel\", function(evt) {\r\n        return _this.search_results_mousewheel(evt);\r\n      });\r\n      this.search_results.observe(\"DOMMouseScroll\", function(evt) {\r\n        return _this.search_results_mousewheel(evt);\r\n      });\r\n      this.search_results.observe(\"touchstart\", function(evt) {\r\n        return _this.search_results_touchstart(evt);\r\n      });\r\n      this.search_results.observe(\"touchmove\", function(evt) {\r\n        return _this.search_results_touchmove(evt);\r\n      });\r\n      this.search_results.observe(\"touchend\", function(evt) {\r\n        return _this.search_results_touchend(evt);\r\n      });\r\n      this.form_field.observe(\"chosen:updated\", function(evt) {\r\n        return _this.results_update_field(evt);\r\n      });\r\n      this.form_field.observe(\"chosen:activate\", function(evt) {\r\n        return _this.activate_field(evt);\r\n      });\r\n      this.form_field.observe(\"chosen:open\", function(evt) {\r\n        return _this.container_mousedown(evt);\r\n      });\r\n      this.form_field.observe(\"chosen:close\", function(evt) {\r\n        return _this.input_blur(evt);\r\n      });\r\n      this.search_field.observe(\"blur\", function(evt) {\r\n        return _this.input_blur(evt);\r\n      });\r\n      this.search_field.observe(\"keyup\", function(evt) {\r\n        return _this.keyup_checker(evt);\r\n      });\r\n      this.search_field.observe(\"keydown\", function(evt) {\r\n        return _this.keydown_checker(evt);\r\n      });\r\n      this.search_field.observe(\"focus\", function(evt) {\r\n        return _this.input_focus(evt);\r\n      });\r\n      this.search_field.observe(\"cut\", function(evt) {\r\n        return _this.clipboard_event_checker(evt);\r\n      });\r\n      this.search_field.observe(\"paste\", function(evt) {\r\n        return _this.clipboard_event_checker(evt);\r\n      });\r\n      if (this.is_multiple) {\r\n        return this.search_choices.observe(\"click\", function(evt) {\r\n          return _this.choices_click(evt);\r\n        });\r\n      } else {\r\n        return this.container.observe(\"click\", function(evt) {\r\n          return evt.preventDefault();\r\n        });\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.destroy = function() {\r\n      this.container.ownerDocument.stopObserving(\"click\", this.click_test_action);\r\n      this.form_field.stopObserving();\r\n      this.container.stopObserving();\r\n      this.search_results.stopObserving();\r\n      this.search_field.stopObserving();\r\n      if (this.form_field_label != null) {\r\n        this.form_field_label.stopObserving();\r\n      }\r\n      if (this.is_multiple) {\r\n        this.search_choices.stopObserving();\r\n        this.container.select(\".search-choice-close\").each(function(choice) {\r\n          return choice.stopObserving();\r\n        });\r\n      } else {\r\n        this.selected_item.stopObserving();\r\n      }\r\n      if (this.search_field.tabIndex) {\r\n        this.form_field.tabIndex = this.search_field.tabIndex;\r\n      }\r\n      this.container.remove();\r\n      return this.form_field.show();\r\n    };\r\n\r\n    Chosen.prototype.search_field_disabled = function() {\r\n      this.is_disabled = this.form_field.disabled;\r\n      if (this.is_disabled) {\r\n        this.container.addClassName('chosen-disabled');\r\n        this.search_field.disabled = true;\r\n        if (!this.is_multiple) {\r\n          this.selected_item.stopObserving(\"focus\", this.activate_action);\r\n        }\r\n        return this.close_field();\r\n      } else {\r\n        this.container.removeClassName('chosen-disabled');\r\n        this.search_field.disabled = false;\r\n        if (!this.is_multiple) {\r\n          return this.selected_item.observe(\"focus\", this.activate_action);\r\n        }\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.container_mousedown = function(evt) {\r\n      if (!this.is_disabled) {\r\n        if (evt && evt.type === \"mousedown\" && !this.results_showing) {\r\n          evt.stop();\r\n        }\r\n        if (!((evt != null) && evt.target.hasClassName(\"search-choice-close\"))) {\r\n          if (!this.active_field) {\r\n            if (this.is_multiple) {\r\n              this.search_field.clear();\r\n            }\r\n            this.container.ownerDocument.observe(\"click\", this.click_test_action);\r\n            this.results_show();\r\n          } else if (!this.is_multiple && evt && (evt.target === this.selected_item || evt.target.up(\"a.chosen-single\"))) {\r\n            this.results_toggle();\r\n          }\r\n          return this.activate_field();\r\n        }\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.container_mouseup = function(evt) {\r\n      if (evt.target.nodeName === \"ABBR\" && !this.is_disabled) {\r\n        return this.results_reset(evt);\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.search_results_mousewheel = function(evt) {\r\n      var delta;\r\n      delta = -evt.wheelDelta || evt.detail;\r\n      if (delta != null) {\r\n        evt.preventDefault();\r\n        if (evt.type === 'DOMMouseScroll') {\r\n          delta = delta * 40;\r\n        }\r\n        return this.search_results.scrollTop = delta + this.search_results.scrollTop;\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.blur_test = function(evt) {\r\n      if (!this.active_field && this.container.hasClassName(\"chosen-container-active\")) {\r\n        return this.close_field();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.close_field = function() {\r\n      this.container.ownerDocument.stopObserving(\"click\", this.click_test_action);\r\n      this.active_field = false;\r\n      this.results_hide();\r\n      this.container.removeClassName(\"chosen-container-active\");\r\n      this.clear_backstroke();\r\n      this.show_search_field_default();\r\n      return this.search_field_scale();\r\n    };\r\n\r\n    Chosen.prototype.activate_field = function() {\r\n      this.container.addClassName(\"chosen-container-active\");\r\n      this.active_field = true;\r\n      this.search_field.value = this.search_field.value;\r\n      return this.search_field.focus();\r\n    };\r\n\r\n    Chosen.prototype.test_active_click = function(evt) {\r\n      if (evt.target.up('.chosen-container') === this.container) {\r\n        return this.active_field = true;\r\n      } else {\r\n        return this.close_field();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.results_build = function() {\r\n      this.parsing = true;\r\n      this.selected_option_count = null;\r\n      this.results_data = SelectParser.select_to_array(this.form_field);\r\n      if (this.is_multiple) {\r\n        this.search_choices.select(\"li.search-choice\").invoke(\"remove\");\r\n      } else if (!this.is_multiple) {\r\n        this.single_set_selected_text();\r\n        if (this.disable_search || this.form_field.options.length <= this.disable_search_threshold) {\r\n          this.search_field.readOnly = true;\r\n          this.container.addClassName(\"chosen-container-single-nosearch\");\r\n        } else {\r\n          this.search_field.readOnly = false;\r\n          this.container.removeClassName(\"chosen-container-single-nosearch\");\r\n        }\r\n      }\r\n      this.update_results_content(this.results_option_build({\r\n        first: true\r\n      }));\r\n      this.search_field_disabled();\r\n      this.show_search_field_default();\r\n      this.search_field_scale();\r\n      return this.parsing = false;\r\n    };\r\n\r\n    Chosen.prototype.result_do_highlight = function(el) {\r\n      var high_bottom, high_top, maxHeight, visible_bottom, visible_top;\r\n      this.result_clear_highlight();\r\n      this.result_highlight = el;\r\n      this.result_highlight.addClassName(\"highlighted\");\r\n      maxHeight = parseInt(this.search_results.getStyle('maxHeight'), 10);\r\n      visible_top = this.search_results.scrollTop;\r\n      visible_bottom = maxHeight + visible_top;\r\n      high_top = this.result_highlight.positionedOffset().top;\r\n      high_bottom = high_top + this.result_highlight.getHeight();\r\n      if (high_bottom >= visible_bottom) {\r\n        return this.search_results.scrollTop = (high_bottom - maxHeight) > 0 ? high_bottom - maxHeight : 0;\r\n      } else if (high_top < visible_top) {\r\n        return this.search_results.scrollTop = high_top;\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.result_clear_highlight = function() {\r\n      if (this.result_highlight) {\r\n        this.result_highlight.removeClassName('highlighted');\r\n      }\r\n      return this.result_highlight = null;\r\n    };\r\n\r\n    Chosen.prototype.results_show = function() {\r\n      if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\r\n        this.form_field.fire(\"chosen:maxselected\", {\r\n          chosen: this\r\n        });\r\n        return false;\r\n      }\r\n      this.container.addClassName(\"chosen-with-drop\");\r\n      this.results_showing = true;\r\n      this.search_field.focus();\r\n      this.search_field.value = this.search_field.value;\r\n      this.winnow_results();\r\n      return this.form_field.fire(\"chosen:showing_dropdown\", {\r\n        chosen: this\r\n      });\r\n    };\r\n\r\n    Chosen.prototype.update_results_content = function(content) {\r\n      return this.search_results.update(content);\r\n    };\r\n\r\n    Chosen.prototype.results_hide = function() {\r\n      if (this.results_showing) {\r\n        this.result_clear_highlight();\r\n        this.container.removeClassName(\"chosen-with-drop\");\r\n        this.form_field.fire(\"chosen:hiding_dropdown\", {\r\n          chosen: this\r\n        });\r\n      }\r\n      return this.results_showing = false;\r\n    };\r\n\r\n    Chosen.prototype.set_tab_index = function(el) {\r\n      var ti;\r\n      if (this.form_field.tabIndex) {\r\n        ti = this.form_field.tabIndex;\r\n        this.form_field.tabIndex = -1;\r\n        return this.search_field.tabIndex = ti;\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.set_label_behavior = function() {\r\n      var _this = this;\r\n      this.form_field_label = this.form_field.up(\"label\");\r\n      if (this.form_field_label == null) {\r\n        this.form_field_label = $$(\"label[for='\" + this.form_field.id + \"']\").first();\r\n      }\r\n      if (this.form_field_label != null) {\r\n        return this.form_field_label.observe(\"click\", function(evt) {\r\n          if (_this.is_multiple) {\r\n            return _this.container_mousedown(evt);\r\n          } else {\r\n            return _this.activate_field();\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.show_search_field_default = function() {\r\n      if (this.is_multiple && this.choices_count() < 1 && !this.active_field) {\r\n        this.search_field.value = this.default_text;\r\n        return this.search_field.addClassName(\"default\");\r\n      } else {\r\n        this.search_field.value = \"\";\r\n        return this.search_field.removeClassName(\"default\");\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.search_results_mouseup = function(evt) {\r\n      var target;\r\n      target = evt.target.hasClassName(\"active-result\") ? evt.target : evt.target.up(\".active-result\");\r\n      if (target) {\r\n        this.result_highlight = target;\r\n        this.result_select(evt);\r\n        return this.search_field.focus();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.search_results_mouseover = function(evt) {\r\n      var target;\r\n      target = evt.target.hasClassName(\"active-result\") ? evt.target : evt.target.up(\".active-result\");\r\n      if (target) {\r\n        return this.result_do_highlight(target);\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.search_results_mouseout = function(evt) {\r\n      if (evt.target.hasClassName('active-result') || evt.target.up('.active-result')) {\r\n        return this.result_clear_highlight();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.choice_build = function(item) {\r\n      var choice, close_link,\r\n        _this = this;\r\n      choice = new Element('li', {\r\n        \"class\": \"search-choice\"\r\n      }).update(\"<span>\" + item.html + \"</span>\");\r\n      if (item.disabled) {\r\n        choice.addClassName('search-choice-disabled');\r\n      } else {\r\n        close_link = new Element('a', {\r\n          href: '#',\r\n          \"class\": 'search-choice-close',\r\n          rel: item.array_index\r\n        });\r\n        close_link.observe(\"click\", function(evt) {\r\n          return _this.choice_destroy_link_click(evt);\r\n        });\r\n        choice.insert(close_link);\r\n      }\r\n      return this.search_container.insert({\r\n        before: choice\r\n      });\r\n    };\r\n\r\n    Chosen.prototype.choice_destroy_link_click = function(evt) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      if (!this.is_disabled) {\r\n        return this.choice_destroy(evt.target);\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.choice_destroy = function(link) {\r\n      if (this.result_deselect(link.readAttribute(\"rel\"))) {\r\n        this.show_search_field_default();\r\n        if (this.is_multiple && this.choices_count() > 0 && this.search_field.value.length < 1) {\r\n          this.results_hide();\r\n        }\r\n        link.up('li').remove();\r\n        return this.search_field_scale();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.results_reset = function() {\r\n      this.reset_single_select_options();\r\n      this.form_field.options[0].selected = true;\r\n      this.single_set_selected_text();\r\n      this.show_search_field_default();\r\n      this.results_reset_cleanup();\r\n      if (typeof Event.simulate === 'function') {\r\n        this.form_field.simulate(\"change\");\r\n      }\r\n      if (this.active_field) {\r\n        return this.results_hide();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.results_reset_cleanup = function() {\r\n      var deselect_trigger;\r\n      this.current_selectedIndex = this.form_field.selectedIndex;\r\n      deselect_trigger = this.selected_item.down(\"abbr\");\r\n      if (deselect_trigger) {\r\n        return deselect_trigger.remove();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.result_select = function(evt) {\r\n      var high, item;\r\n      if (this.result_highlight) {\r\n        high = this.result_highlight;\r\n        this.result_clear_highlight();\r\n        if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\r\n          this.form_field.fire(\"chosen:maxselected\", {\r\n            chosen: this\r\n          });\r\n          return false;\r\n        }\r\n        if (this.is_multiple) {\r\n          high.removeClassName(\"active-result\");\r\n        } else {\r\n          this.reset_single_select_options();\r\n        }\r\n        high.addClassName(\"result-selected\");\r\n        item = this.results_data[high.getAttribute(\"data-option-array-index\")];\r\n        item.selected = true;\r\n        this.form_field.options[item.options_index].selected = true;\r\n        this.selected_option_count = null;\r\n        if (this.is_multiple) {\r\n          this.choice_build(item);\r\n        } else {\r\n          this.single_set_selected_text(item.text);\r\n        }\r\n        if (!((evt.metaKey || evt.ctrlKey) && this.is_multiple)) {\r\n          this.results_hide();\r\n        }\r\n        this.search_field.value = \"\";\r\n        if (typeof Event.simulate === 'function' && (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex)) {\r\n          this.form_field.simulate(\"change\");\r\n        }\r\n        this.current_selectedIndex = this.form_field.selectedIndex;\r\n        return this.search_field_scale();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.single_set_selected_text = function(text) {\r\n      if (text == null) {\r\n        text = this.default_text;\r\n      }\r\n      if (text === this.default_text) {\r\n        this.selected_item.addClassName(\"chosen-default\");\r\n      } else {\r\n        this.single_deselect_control_build();\r\n        this.selected_item.removeClassName(\"chosen-default\");\r\n      }\r\n      return this.selected_item.down(\"span\").update(text);\r\n    };\r\n\r\n    Chosen.prototype.result_deselect = function(pos) {\r\n      var result_data;\r\n      result_data = this.results_data[pos];\r\n      if (!this.form_field.options[result_data.options_index].disabled) {\r\n        result_data.selected = false;\r\n        this.form_field.options[result_data.options_index].selected = false;\r\n        this.selected_option_count = null;\r\n        this.result_clear_highlight();\r\n        if (this.results_showing) {\r\n          this.winnow_results();\r\n        }\r\n        if (typeof Event.simulate === 'function') {\r\n          this.form_field.simulate(\"change\");\r\n        }\r\n        this.search_field_scale();\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.single_deselect_control_build = function() {\r\n      if (!this.allow_single_deselect) {\r\n        return;\r\n      }\r\n      if (!this.selected_item.down(\"abbr\")) {\r\n        this.selected_item.down(\"span\").insert({\r\n          after: \"<abbr class=\\\"search-choice-close\\\"></abbr>\"\r\n        });\r\n      }\r\n      return this.selected_item.addClassName(\"chosen-single-with-deselect\");\r\n    };\r\n\r\n    Chosen.prototype.get_search_text = function() {\r\n      if (this.search_field.value === this.default_text) {\r\n        return \"\";\r\n      } else {\r\n        return this.search_field.value.strip().escapeHTML();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.winnow_results_set_highlight = function() {\r\n      var do_high;\r\n      if (!this.is_multiple) {\r\n        do_high = this.search_results.down(\".result-selected.active-result\");\r\n      }\r\n      if (do_high == null) {\r\n        do_high = this.search_results.down(\".active-result\");\r\n      }\r\n      if (do_high != null) {\r\n        return this.result_do_highlight(do_high);\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.no_results = function(terms) {\r\n      this.search_results.insert(this.no_results_temp.evaluate({\r\n        terms: terms\r\n      }));\r\n      return this.form_field.fire(\"chosen:no_results\", {\r\n        chosen: this\r\n      });\r\n    };\r\n\r\n    Chosen.prototype.no_results_clear = function() {\r\n      var nr, _results;\r\n      nr = null;\r\n      _results = [];\r\n      while (nr = this.search_results.down(\".no-results\")) {\r\n        _results.push(nr.remove());\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    Chosen.prototype.keydown_arrow = function() {\r\n      var next_sib;\r\n      if (this.results_showing && this.result_highlight) {\r\n        next_sib = this.result_highlight.next('.active-result');\r\n        if (next_sib) {\r\n          return this.result_do_highlight(next_sib);\r\n        }\r\n      } else {\r\n        return this.results_show();\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.keyup_arrow = function() {\r\n      var actives, prevs, sibs;\r\n      if (!this.results_showing && !this.is_multiple) {\r\n        return this.results_show();\r\n      } else if (this.result_highlight) {\r\n        sibs = this.result_highlight.previousSiblings();\r\n        actives = this.search_results.select(\"li.active-result\");\r\n        prevs = sibs.intersect(actives);\r\n        if (prevs.length) {\r\n          return this.result_do_highlight(prevs.first());\r\n        } else {\r\n          if (this.choices_count() > 0) {\r\n            this.results_hide();\r\n          }\r\n          return this.result_clear_highlight();\r\n        }\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.keydown_backstroke = function() {\r\n      var next_available_destroy;\r\n      if (this.pending_backstroke) {\r\n        this.choice_destroy(this.pending_backstroke.down(\"a\"));\r\n        return this.clear_backstroke();\r\n      } else {\r\n        next_available_destroy = this.search_container.siblings().last();\r\n        if (next_available_destroy && next_available_destroy.hasClassName(\"search-choice\") && !next_available_destroy.hasClassName(\"search-choice-disabled\")) {\r\n          this.pending_backstroke = next_available_destroy;\r\n          if (this.pending_backstroke) {\r\n            this.pending_backstroke.addClassName(\"search-choice-focus\");\r\n          }\r\n          if (this.single_backstroke_delete) {\r\n            return this.keydown_backstroke();\r\n          } else {\r\n            return this.pending_backstroke.addClassName(\"search-choice-focus\");\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.clear_backstroke = function() {\r\n      if (this.pending_backstroke) {\r\n        this.pending_backstroke.removeClassName(\"search-choice-focus\");\r\n      }\r\n      return this.pending_backstroke = null;\r\n    };\r\n\r\n    Chosen.prototype.keydown_checker = function(evt) {\r\n      var stroke, _ref1;\r\n      stroke = (_ref1 = evt.which) != null ? _ref1 : evt.keyCode;\r\n      this.search_field_scale();\r\n      if (stroke !== 8 && this.pending_backstroke) {\r\n        this.clear_backstroke();\r\n      }\r\n      switch (stroke) {\r\n        case 8:\r\n          this.backstroke_length = this.search_field.value.length;\r\n          break;\r\n        case 9:\r\n          if (this.results_showing && !this.is_multiple) {\r\n            this.result_select(evt);\r\n          }\r\n          this.mouse_on_container = false;\r\n          break;\r\n        case 13:\r\n          evt.preventDefault();\r\n          break;\r\n        case 38:\r\n          evt.preventDefault();\r\n          this.keyup_arrow();\r\n          break;\r\n        case 40:\r\n          evt.preventDefault();\r\n          this.keydown_arrow();\r\n          break;\r\n      }\r\n    };\r\n\r\n    Chosen.prototype.search_field_scale = function() {\r\n      var div, f_width, h, style, style_block, styles, w, _i, _len;\r\n      if (this.is_multiple) {\r\n        h = 0;\r\n        w = 0;\r\n        style_block = \"position:absolute; left: -1000px; top: -1000px; display:none;\";\r\n        styles = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];\r\n        for (_i = 0, _len = styles.length; _i < _len; _i++) {\r\n          style = styles[_i];\r\n          style_block += style + \":\" + this.search_field.getStyle(style) + \";\";\r\n        }\r\n        div = new Element('div', {\r\n          'style': style_block\r\n        }).update(this.search_field.value.escapeHTML());\r\n        document.body.appendChild(div);\r\n        w = Element.measure(div, 'width') + 25;\r\n        div.remove();\r\n        f_width = this.container.getWidth();\r\n        if (w > f_width - 10) {\r\n          w = f_width - 10;\r\n        }\r\n        return this.search_field.setStyle({\r\n          'width': w + 'px'\r\n        });\r\n      }\r\n    };\r\n\r\n    return Chosen;\r\n\r\n  })(AbstractChosen);\r\n\r\n}).call(this);\r\n"
      },
      {
        "name": "chosen script",
        "type": "JavaScript",
        "content": "/*!\r\n\r\n### this is amended for adding new options when not found ###\r\nChosen, a Select Box Enhancer for jQuery and Prototype\r\nby Patrick Filler for Harvest, http://getharvest.com\r\n\r\nVersion 1.1.0\r\nFull source at https://github.com/harvesthq/chosen\r\nCopyright (c) 2011 Harvest http://getharvest.com\r\n\r\nMIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md\r\nThis file is generated by `grunt build`, do not edit it by hand.\r\n*/\r\n(function () {\r\n    var $, AbstractChosen, Chosen, SelectParser, _ref,\r\n        __hasProp = {}.hasOwnProperty,\r\n        __extends = function (child, parent) {\r\n            for (var key in parent) {\r\n                if (__hasProp.call(parent, key)) child[key] = parent[key];\r\n            }\r\n\r\n            function ctor() {\r\n                this.constructor = child;\r\n            }\r\n            ctor.prototype = parent.prototype;\r\n            child.prototype = new ctor();\r\n            child.__super__ = parent.prototype;\r\n            return child;\r\n        };\r\n\r\n    SelectParser = (function () {\r\n        function SelectParser() {\r\n            this.options_index = 0;\r\n            this.parsed = [];\r\n        }\r\n\r\n        SelectParser.prototype.add_node = function (child) {\r\n            if (child.nodeName.toUpperCase() === \"OPTGROUP\") {\r\n                return this.add_group(child);\r\n            } else {\r\n                return this.add_option(child);\r\n            }\r\n        };\r\n\r\n        SelectParser.prototype.add_group = function (group) {\r\n            var group_position, option, _i, _len, _ref, _results;\r\n            group_position = this.parsed.length;\r\n            this.parsed.push({\r\n                array_index: group_position,\r\n                group: true,\r\n                label: this.escapeExpression(group.label),\r\n                children: 0,\r\n                disabled: group.disabled\r\n            });\r\n            _ref = group.childNodes;\r\n            _results = [];\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                option = _ref[_i];\r\n                _results.push(this.add_option(option, group_position, group.disabled));\r\n            }\r\n            return _results;\r\n        };\r\n\r\n        SelectParser.prototype.add_option = function (option, group_position, group_disabled) {\r\n            if (option.nodeName.toUpperCase() === \"OPTION\") {\r\n                if (option.text !== \"\") {\r\n                    if (group_position != null) {\r\n                        this.parsed[group_position].children += 1;\r\n                    }\r\n                    this.parsed.push({\r\n                        array_index: this.parsed.length,\r\n                        options_index: this.options_index,\r\n                        value: option.value,\r\n                        text: option.text,\r\n                        html: option.innerHTML,\r\n                        selected: option.selected,\r\n                        disabled: group_disabled === true ? group_disabled : option.disabled,\r\n                        group_array_index: group_position,\r\n                        classes: option.className,\r\n                        style: option.style.cssText\r\n                    });\r\n                } else {\r\n                    this.parsed.push({\r\n                        array_index: this.parsed.length,\r\n                        options_index: this.options_index,\r\n                        empty: true\r\n                    });\r\n                }\r\n                return this.options_index += 1;\r\n            }\r\n        };\r\n\r\n        SelectParser.prototype.escapeExpression = function (text) {\r\n            var map, unsafe_chars;\r\n            if ((text == null) || text === false) {\r\n                return \"\";\r\n            }\r\n            if (!/[\\&\\<\\>\\\"\\'\\`]/.test(text)) {\r\n                return text;\r\n            }\r\n            map = {\r\n                \"<\": \"&lt;\",\r\n                \">\": \"&gt;\",\r\n                '\"': \"&quot;\",\r\n                \"'\": \"&#x27;\",\r\n                \"`\": \"&#x60;\"\r\n            };\r\n            unsafe_chars = /&(?!\\w+;)|[\\<\\>\\\"\\'\\`]/g;\r\n            return text.replace(unsafe_chars, function (chr) {\r\n                return map[chr] || \"&amp;\";\r\n            });\r\n        };\r\n\r\n        return SelectParser;\r\n\r\n    })();\r\n\r\n    SelectParser.select_to_array = function (select) {\r\n        var child, parser, _i, _len, _ref;\r\n        parser = new SelectParser();\r\n        _ref = select.childNodes;\r\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n            child = _ref[_i];\r\n            parser.add_node(child);\r\n        }\r\n        return parser.parsed;\r\n    };\r\n\r\n    AbstractChosen = (function () {\r\n        function AbstractChosen(form_field, options) {\r\n            this.form_field = form_field;\r\n            this.options = options != null ? options : {};\r\n            if (!AbstractChosen.browser_is_supported()) {\r\n                return;\r\n            }\r\n            this.is_multiple = this.form_field.multiple;\r\n            this.set_default_text();\r\n            this.set_default_values();\r\n            this.setup();\r\n            this.set_up_html();\r\n            this.register_observers();\r\n        }\r\n\r\n        AbstractChosen.prototype.set_default_values = function () {\r\n            var _this = this;\r\n            this.click_test_action = function (evt) {\r\n                return _this.test_active_click(evt);\r\n            };\r\n            this.activate_action = function (evt) {\r\n                return _this.activate_field(evt);\r\n            };\r\n            this.active_field = false;\r\n            this.mouse_on_container = false;\r\n            this.results_showing = false;\r\n            this.result_highlighted = null;\r\n            this.allow_single_deselect = (this.options.allow_single_deselect != null) && (this.form_field.options[0] != null) && this.form_field.options[0].text === \"\" ? this.options.allow_single_deselect : false;\r\n            this.disable_search_threshold = this.options.disable_search_threshold || 0;\r\n            this.disable_search = this.options.disable_search || false;\r\n            this.enable_split_word_search = this.options.enable_split_word_search != null ? this.options.enable_split_word_search : true;\r\n            this.group_search = this.options.group_search != null ? this.options.group_search : true;\r\n            this.search_contains = this.options.search_contains || false;\r\n            this.single_backstroke_delete = this.options.single_backstroke_delete != null ? this.options.single_backstroke_delete : true;\r\n            this.max_selected_options = this.options.max_selected_options || Infinity;\r\n            this.inherit_select_classes = this.options.inherit_select_classes || false;\r\n            this.display_selected_options = this.options.display_selected_options != null ? this.options.display_selected_options : true;\r\n            return this.display_disabled_options = this.options.display_disabled_options != null ? this.options.display_disabled_options : true;\r\n        };\r\n\r\n        AbstractChosen.prototype.set_default_text = function () {\r\n            if (this.form_field.getAttribute(\"data-placeholder\")) {\r\n                this.default_text = this.form_field.getAttribute(\"data-placeholder\");\r\n            } else if (this.is_multiple) {\r\n                this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || AbstractChosen.default_multiple_text;\r\n            } else {\r\n                this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || AbstractChosen.default_single_text;\r\n            }\r\n            return this.results_none_found = this.form_field.getAttribute(\"data-no_results_text\") || this.options.no_results_text || AbstractChosen.default_no_result_text;\r\n        };\r\n\r\n        AbstractChosen.prototype.mouse_enter = function () {\r\n            return this.mouse_on_container = true;\r\n        };\r\n\r\n        AbstractChosen.prototype.mouse_leave = function () {\r\n            return this.mouse_on_container = false;\r\n        };\r\n\r\n        AbstractChosen.prototype.input_focus = function (evt) {\r\n            var _this = this;\r\n            if (this.is_multiple) {\r\n                if (!this.active_field) {\r\n                    return setTimeout((function () {\r\n                        return _this.container_mousedown();\r\n                    }), 50);\r\n                }\r\n            } else {\r\n                if (!this.active_field) {\r\n                    return this.activate_field();\r\n                }\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.input_blur = function (evt) {\r\n            var _this = this;\r\n            if (!this.mouse_on_container) {\r\n                this.active_field = false;\r\n                return setTimeout((function () {\r\n                    return _this.blur_test();\r\n                }), 100);\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.results_option_build = function (options) {\r\n            var content, data, _i, _len, _ref;\r\n            content = '';\r\n            _ref = this.results_data;\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                data = _ref[_i];\r\n                if (data.group) {\r\n                    content += this.result_add_group(data);\r\n                } else {\r\n                    content += this.result_add_option(data);\r\n                }\r\n                if (options != null ? options.first : void 0) {\r\n                    if (data.selected && this.is_multiple) {\r\n                        this.choice_build(data);\r\n                    } else if (data.selected && !this.is_multiple) {\r\n                        this.single_set_selected_text(data.text);\r\n                    }\r\n                }\r\n            }\r\n            return content;\r\n        };\r\n\r\n        AbstractChosen.prototype.result_add_option = function (option) {\r\n            var classes, option_el;\r\n            if (!option.search_match) {\r\n                return '';\r\n            }\r\n            if (!this.include_option_in_results(option)) {\r\n                return '';\r\n            }\r\n            classes = [];\r\n            if (!option.disabled && !(option.selected && this.is_multiple)) {\r\n                classes.push(\"active-result\");\r\n            }\r\n            if (option.disabled && !(option.selected && this.is_multiple)) {\r\n                classes.push(\"disabled-result\");\r\n            }\r\n            if (option.selected) {\r\n                classes.push(\"result-selected\");\r\n            }\r\n            if (option.group_array_index != null) {\r\n                classes.push(\"group-option\");\r\n            }\r\n            if (option.classes !== \"\") {\r\n                classes.push(option.classes);\r\n            }\r\n            option_el = document.createElement(\"li\");\r\n            option_el.className = classes.join(\" \");\r\n            option_el.style.cssText = option.style;\r\n            option_el.setAttribute(\"data-option-array-index\", option.array_index);\r\n            option_el.innerHTML = option.search_text;\r\n            return this.outerHTML(option_el);\r\n        };\r\n\r\n        AbstractChosen.prototype.result_add_group = function (group) {\r\n            var group_el;\r\n            if (!(group.search_match || group.group_match)) {\r\n                return '';\r\n            }\r\n            if (!(group.active_options > 0)) {\r\n                return '';\r\n            }\r\n            group_el = document.createElement(\"li\");\r\n            group_el.className = \"group-result\";\r\n            group_el.innerHTML = group.search_text;\r\n            return this.outerHTML(group_el);\r\n        };\r\n\r\n        AbstractChosen.prototype.results_update_field = function () {\r\n            this.set_default_text();\r\n            if (!this.is_multiple) {\r\n                this.results_reset_cleanup();\r\n            }\r\n            this.result_clear_highlight();\r\n            this.results_build();\r\n            if (this.results_showing) {\r\n                return this.winnow_results();\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.reset_single_select_options = function () {\r\n            var result, _i, _len, _ref, _results;\r\n            _ref = this.results_data;\r\n            _results = [];\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                result = _ref[_i];\r\n                if (result.selected) {\r\n                    _results.push(result.selected = false);\r\n                } else {\r\n                    _results.push(void 0);\r\n                }\r\n            }\r\n            return _results;\r\n        };\r\n\r\n        AbstractChosen.prototype.results_toggle = function () {\r\n            if (this.results_showing) {\r\n                return this.results_hide();\r\n            } else {\r\n                return this.results_show();\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.results_search = function (evt) {\r\n            if (this.results_showing) {\r\n                return this.winnow_results();\r\n            } else {\r\n                return this.results_show();\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.winnow_results = function () {\r\n            var escapedSearchText, option, regex, regexAnchor, results, results_group, searchText, startpos, text, zregex, _i, _len, _ref;\r\n            this.no_results_clear();\r\n            results = 0;\r\n            searchText = this.get_search_text();\r\n            escapedSearchText = searchText.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\r\n            regexAnchor = this.search_contains ? \"\" : \"^\";\r\n            regex = new RegExp(regexAnchor + escapedSearchText, 'i');\r\n            zregex = new RegExp(escapedSearchText, 'i');\r\n            _ref = this.results_data;\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                option = _ref[_i];\r\n                option.search_match = false;\r\n                results_group = null;\r\n                if (this.include_option_in_results(option)) {\r\n                    if (option.group) {\r\n                        option.group_match = false;\r\n                        option.active_options = 0;\r\n                    }\r\n                    if ((option.group_array_index != null) && this.results_data[option.group_array_index]) {\r\n                        results_group = this.results_data[option.group_array_index];\r\n                        if (results_group.active_options === 0 && results_group.search_match) {\r\n                            results += 1;\r\n                        }\r\n                        results_group.active_options += 1;\r\n                    }\r\n                    if (!(option.group && !this.group_search)) {\r\n                        option.search_text = option.group ? option.label : option.html;\r\n                        option.search_match = this.search_string_match(option.search_text, regex);\r\n                        if (option.search_match && !option.group) {\r\n                            results += 1;\r\n                        }\r\n                        if (option.search_match) {\r\n                            if (searchText.length) {\r\n                                startpos = option.search_text.search(zregex);\r\n                                text = option.search_text.substr(0, startpos + searchText.length) + '</em>' + option.search_text.substr(startpos + searchText.length);\r\n                                option.search_text = text.substr(0, startpos) + '<em>' + text.substr(startpos);\r\n                            }\r\n                            if (results_group != null) {\r\n                                results_group.group_match = true;\r\n                            }\r\n                        } else if ((option.group_array_index != null) && this.results_data[option.group_array_index].search_match) {\r\n                            option.search_match = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.result_clear_highlight();\r\n            if (results < 1 && searchText.length) {\r\n                this.update_results_content(\"\");\r\n                return this.no_results(searchText);\r\n            } else {\r\n                this.update_results_content(this.results_option_build());\r\n                return this.winnow_results_set_highlight();\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.search_string_match = function (search_string, regex) {\r\n            var part, parts, _i, _len;\r\n            if (regex.test(search_string)) {\r\n                return true;\r\n            } else if (this.enable_split_word_search && (search_string.indexOf(\" \") >= 0 || search_string.indexOf(\"[\") === 0)) {\r\n                parts = search_string.replace(/\\[|\\]/g, \"\").split(\" \");\r\n                if (parts.length) {\r\n                    for (_i = 0, _len = parts.length; _i < _len; _i++) {\r\n                        part = parts[_i];\r\n                        if (regex.test(part)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.choices_count = function () {\r\n            var option, _i, _len, _ref;\r\n            if (this.selected_option_count != null) {\r\n                return this.selected_option_count;\r\n            }\r\n            this.selected_option_count = 0;\r\n            _ref = this.form_field.options;\r\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n                option = _ref[_i];\r\n                if (option.selected) {\r\n                    this.selected_option_count += 1;\r\n                }\r\n            }\r\n            return this.selected_option_count;\r\n        };\r\n\r\n        AbstractChosen.prototype.choices_click = function (evt) {\r\n            evt.preventDefault();\r\n            if (!(this.results_showing || this.is_disabled)) {\r\n                return this.results_show();\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.keyup_checker = function (evt) {\r\n            var stroke, _ref;\r\n            stroke = (_ref = evt.which) != null ? _ref : evt.keyCode;\r\n            this.search_field_scale();\r\n            switch (stroke) {\r\n            case 8:\r\n                if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0) {\r\n                    return this.keydown_backstroke();\r\n                } else if (!this.pending_backstroke) {\r\n                    this.result_clear_highlight();\r\n                    return this.results_search();\r\n                }\r\n                break;\r\n            case 13:\r\n                evt.preventDefault();\r\n                if (this.results_showing) {\r\n                    if (!this.is_multiple || this.result_highlight) {\r\n                        return this.result_select(evt);\r\n                    }\r\n                    $(this.form_field).append('<option>' + $(evt.target).val() + '</option>');\r\n                    $(this.form_field).trigger(\"chosen:updated\");\r\n\r\n                    this.result_highlight = this.search_results.find('li.active-result').last();\r\n                    return this.result_select(evt);\r\n                }\r\n\r\n                break;\r\n            case 27:\r\n                if (this.results_showing) {\r\n                    this.results_hide();\r\n                }\r\n                return true;\r\n            case 9:\r\n            case 38:\r\n            case 40:\r\n            case 16:\r\n            case 91:\r\n            case 17:\r\n                break;\r\n            default:\r\n                var result = this.results_search();\r\n                this.result_clear_highlight();\r\n                return result;\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.clipboard_event_checker = function (evt) {\r\n            var _this = this;\r\n            return setTimeout((function () {\r\n                return _this.results_search();\r\n            }), 50);\r\n        };\r\n\r\n        AbstractChosen.prototype.container_width = function () {\r\n            if (this.options.width != null) {\r\n                return this.options.width;\r\n            } else {\r\n                return \"\" + this.form_field.offsetWidth + \"px\";\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.include_option_in_results = function (option) {\r\n            if (this.is_multiple && (!this.display_selected_options && option.selected)) {\r\n                return false;\r\n            }\r\n            if (!this.display_disabled_options && option.disabled) {\r\n                return false;\r\n            }\r\n            if (option.empty) {\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        AbstractChosen.prototype.search_results_touchstart = function (evt) {\r\n            this.touch_started = true;\r\n            return this.search_results_mouseover(evt);\r\n        };\r\n\r\n        AbstractChosen.prototype.search_results_touchmove = function (evt) {\r\n            this.touch_started = false;\r\n            return this.search_results_mouseout(evt);\r\n        };\r\n\r\n        AbstractChosen.prototype.search_results_touchend = function (evt) {\r\n            if (this.touch_started) {\r\n                return this.search_results_mouseup(evt);\r\n            }\r\n        };\r\n\r\n        AbstractChosen.prototype.outerHTML = function (element) {\r\n            var tmp;\r\n            if (element.outerHTML) {\r\n                return element.outerHTML;\r\n            }\r\n            tmp = document.createElement(\"div\");\r\n            tmp.appendChild(element);\r\n            return tmp.innerHTML;\r\n        };\r\n\r\n        AbstractChosen.browser_is_supported = function () {\r\n            if (window.navigator.appName === \"Microsoft Internet Explorer\") {\r\n                return document.documentMode >= 8;\r\n            }\r\n            if (/iP(od|hone)/i.test(window.navigator.userAgent)) {\r\n                return false;\r\n            }\r\n            if (/Android/i.test(window.navigator.userAgent)) {\r\n                if (/Mobile/i.test(window.navigator.userAgent)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n\r\n        AbstractChosen.default_multiple_text = \"Select Some Options\";\r\n\r\n        AbstractChosen.default_single_text = \"Select an Option\";\r\n\r\n        AbstractChosen.default_no_result_text = \"No results match\";\r\n\r\n        return AbstractChosen;\r\n\r\n    })();\r\n\r\n    $ = jQuery;\r\n\r\n    $.fn.extend({\r\n        chosen: function (options) {\r\n            if (!AbstractChosen.browser_is_supported()) {\r\n                return this;\r\n            }\r\n            return this.each(function (input_field) {\r\n                var $this, chosen;\r\n                $this = $(this);\r\n                chosen = $this.data('chosen');\r\n                if (options === 'destroy' && chosen) {\r\n                    chosen.destroy();\r\n                } else if (!chosen) {\r\n                    $this.data('chosen', new Chosen(this, options));\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    Chosen = (function (_super) {\r\n        __extends(Chosen, _super);\r\n\r\n        function Chosen() {\r\n            _ref = Chosen.__super__.constructor.apply(this, arguments);\r\n            return _ref;\r\n        }\r\n\r\n        Chosen.prototype.setup = function () {\r\n            this.form_field_jq = $(this.form_field);\r\n            this.current_selectedIndex = this.form_field.selectedIndex;\r\n            return this.is_rtl = this.form_field_jq.hasClass(\"chosen-rtl\");\r\n        };\r\n\r\n        Chosen.prototype.set_up_html = function () {\r\n            var container_classes, container_props;\r\n            container_classes = [\"chosen-container\"];\r\n            container_classes.push(\"chosen-container-\" + (this.is_multiple ? \"multi\" : \"single\"));\r\n            if (this.inherit_select_classes && this.form_field.className) {\r\n                container_classes.push(this.form_field.className);\r\n            }\r\n            if (this.is_rtl) {\r\n                container_classes.push(\"chosen-rtl\");\r\n            }\r\n            container_props = {\r\n                'class': container_classes.join(' '),\r\n                'style': \"width: \" + (this.container_width()) + \";\",\r\n                'title': this.form_field.title\r\n            };\r\n            if (this.form_field.id.length) {\r\n                container_props.id = this.form_field.id.replace(/[^\\w]/g, '_') + \"_chosen\";\r\n            }\r\n            this.container = $(\"<div />\", container_props);\r\n            if (this.is_multiple) {\r\n                this.container.html('<ul class=\"chosen-choices\"><li class=\"search-field\"><input type=\"text\" value=\"' + this.default_text + '\" class=\"default\" autocomplete=\"off\" style=\"width:25px;\" /></li></ul><div class=\"chosen-drop\"><ul class=\"chosen-results\"></ul></div>');\r\n            } else {\r\n                this.container.html('<a class=\"chosen-single chosen-default\" tabindex=\"-1\"><span>' + this.default_text + '</span><div><b></b></div></a><div class=\"chosen-drop\"><div class=\"chosen-search\"><input type=\"text\" autocomplete=\"off\" /></div><ul class=\"chosen-results\"></ul></div>');\r\n            }\r\n            this.form_field_jq.hide().after(this.container);\r\n            this.dropdown = this.container.find('div.chosen-drop').first();\r\n            this.search_field = this.container.find('input').first();\r\n            this.search_results = this.container.find('ul.chosen-results').first();\r\n            this.search_field_scale();\r\n            this.search_no_results = this.container.find('li.no-results').first();\r\n            if (this.is_multiple) {\r\n                this.search_choices = this.container.find('ul.chosen-choices').first();\r\n                this.search_container = this.container.find('li.search-field').first();\r\n            } else {\r\n                this.search_container = this.container.find('div.chosen-search').first();\r\n                this.selected_item = this.container.find('.chosen-single').first();\r\n            }\r\n            this.results_build();\r\n            this.set_tab_index();\r\n            this.set_label_behavior();\r\n            return this.form_field_jq.trigger(\"chosen:ready\", {\r\n                chosen: this\r\n            });\r\n        };\r\n\r\n        Chosen.prototype.register_observers = function () {\r\n            var _this = this;\r\n            this.container.bind('mousedown.chosen', function (evt) {\r\n                _this.container_mousedown(evt);\r\n            });\r\n            this.container.bind('mouseup.chosen', function (evt) {\r\n                _this.container_mouseup(evt);\r\n            });\r\n            this.container.bind('mouseenter.chosen', function (evt) {\r\n                _this.mouse_enter(evt);\r\n            });\r\n            this.container.bind('mouseleave.chosen', function (evt) {\r\n                _this.mouse_leave(evt);\r\n            });\r\n            this.search_results.bind('mouseup.chosen', function (evt) {\r\n                _this.search_results_mouseup(evt);\r\n            });\r\n            this.search_results.bind('mouseover.chosen', function (evt) {\r\n                _this.search_results_mouseover(evt);\r\n            });\r\n            this.search_results.bind('mouseout.chosen', function (evt) {\r\n                _this.search_results_mouseout(evt);\r\n            });\r\n            this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen', function (evt) {\r\n                _this.search_results_mousewheel(evt);\r\n            });\r\n            this.search_results.bind('touchstart.chosen', function (evt) {\r\n                _this.search_results_touchstart(evt);\r\n            });\r\n            this.search_results.bind('touchmove.chosen', function (evt) {\r\n                _this.search_results_touchmove(evt);\r\n            });\r\n            this.search_results.bind('touchend.chosen', function (evt) {\r\n                _this.search_results_touchend(evt);\r\n            });\r\n            this.form_field_jq.bind(\"chosen:updated.chosen\", function (evt) {\r\n                _this.results_update_field(evt);\r\n            });\r\n            this.form_field_jq.bind(\"chosen:activate.chosen\", function (evt) {\r\n                _this.activate_field(evt);\r\n            });\r\n            this.form_field_jq.bind(\"chosen:open.chosen\", function (evt) {\r\n                _this.container_mousedown(evt);\r\n            });\r\n            this.form_field_jq.bind(\"chosen:close.chosen\", function (evt) {\r\n                _this.input_blur(evt);\r\n            });\r\n            this.search_field.bind('blur.chosen', function (evt) {\r\n                _this.input_blur(evt);\r\n            });\r\n            this.search_field.bind('keyup.chosen', function (evt) {\r\n                _this.keyup_checker(evt);\r\n            });\r\n            this.search_field.bind('keydown.chosen', function (evt) {\r\n                _this.keydown_checker(evt);\r\n            });\r\n            this.search_field.bind('focus.chosen', function (evt) {\r\n                _this.input_focus(evt);\r\n            });\r\n            this.search_field.bind('cut.chosen', function (evt) {\r\n                _this.clipboard_event_checker(evt);\r\n            });\r\n            this.search_field.bind('paste.chosen', function (evt) {\r\n                _this.clipboard_event_checker(evt);\r\n            });\r\n            if (this.is_multiple) {\r\n                return this.search_choices.bind('click.chosen', function (evt) {\r\n                    _this.choices_click(evt);\r\n                });\r\n            } else {\r\n                return this.container.bind('click.chosen', function (evt) {\r\n                    evt.preventDefault();\r\n                });\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.destroy = function () {\r\n            $(this.container[0].ownerDocument).unbind(\"click.chosen\", this.click_test_action);\r\n            if (this.search_field[0].tabIndex) {\r\n                this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex;\r\n            }\r\n            this.container.remove();\r\n            this.form_field_jq.removeData('chosen');\r\n            return this.form_field_jq.show();\r\n        };\r\n\r\n        Chosen.prototype.search_field_disabled = function () {\r\n            this.is_disabled = this.form_field_jq[0].disabled;\r\n            if (this.is_disabled) {\r\n                this.container.addClass('chosen-disabled');\r\n                this.search_field[0].disabled = true;\r\n                if (!this.is_multiple) {\r\n                    this.selected_item.unbind(\"focus.chosen\", this.activate_action);\r\n                }\r\n                return this.close_field();\r\n            } else {\r\n                this.container.removeClass('chosen-disabled');\r\n                this.search_field[0].disabled = false;\r\n                if (!this.is_multiple) {\r\n                    return this.selected_item.bind(\"focus.chosen\", this.activate_action);\r\n                }\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.container_mousedown = function (evt) {\r\n            if (!this.is_disabled) {\r\n                if (evt && evt.type === \"mousedown\" && !this.results_showing) {\r\n                    evt.preventDefault();\r\n                }\r\n                if (!((evt != null) && ($(evt.target)).hasClass(\"search-choice-close\"))) {\r\n                    if (!this.active_field) {\r\n                        if (this.is_multiple) {\r\n                            this.search_field.val(\"\");\r\n                        }\r\n                        $(this.container[0].ownerDocument).bind('click.chosen', this.click_test_action);\r\n                        this.results_show();\r\n                    } else if (!this.is_multiple && evt && (($(evt.target)[0] === this.selected_item[0]) || $(evt.target).parents(\"a.chosen-single\").length)) {\r\n                        evt.preventDefault();\r\n                        this.results_toggle();\r\n                    }\r\n                    return this.activate_field();\r\n                }\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.container_mouseup = function (evt) {\r\n            if (evt.target.nodeName === \"ABBR\" && !this.is_disabled) {\r\n                return this.results_reset(evt);\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.search_results_mousewheel = function (evt) {\r\n            var delta;\r\n            if (evt.originalEvent) {\r\n                delta = -evt.originalEvent.wheelDelta || evt.originalEvent.detail;\r\n            }\r\n            if (delta != null) {\r\n                evt.preventDefault();\r\n                if (evt.type === 'DOMMouseScroll') {\r\n                    delta = delta * 40;\r\n                }\r\n                return this.search_results.scrollTop(delta + this.search_results.scrollTop());\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.blur_test = function (evt) {\r\n            if (!this.active_field && this.container.hasClass(\"chosen-container-active\")) {\r\n                return this.close_field();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.close_field = function () {\r\n            $(this.container[0].ownerDocument).unbind(\"click.chosen\", this.click_test_action);\r\n            this.active_field = false;\r\n            this.results_hide();\r\n            this.container.removeClass(\"chosen-container-active\");\r\n            this.clear_backstroke();\r\n            this.show_search_field_default();\r\n            return this.search_field_scale();\r\n        };\r\n\r\n        Chosen.prototype.activate_field = function () {\r\n            this.container.addClass(\"chosen-container-active\");\r\n            this.active_field = true;\r\n            this.search_field.val(this.search_field.val());\r\n            return this.search_field.focus();\r\n        };\r\n\r\n        Chosen.prototype.test_active_click = function (evt) {\r\n            var active_container;\r\n            active_container = $(evt.target).closest('.chosen-container');\r\n            if (active_container.length && this.container[0] === active_container[0]) {\r\n                return this.active_field = true;\r\n            } else {\r\n                return this.close_field();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.results_build = function () {\r\n            this.parsing = true;\r\n            this.selected_option_count = null;\r\n            this.results_data = SelectParser.select_to_array(this.form_field);\r\n            if (this.is_multiple) {\r\n                this.search_choices.find(\"li.search-choice\").remove();\r\n            } else if (!this.is_multiple) {\r\n                this.single_set_selected_text();\r\n                if (this.disable_search || this.form_field.options.length <= this.disable_search_threshold) {\r\n                    this.search_field[0].readOnly = true;\r\n                    this.container.addClass(\"chosen-container-single-nosearch\");\r\n                } else {\r\n                    this.search_field[0].readOnly = false;\r\n                    this.container.removeClass(\"chosen-container-single-nosearch\");\r\n                }\r\n            }\r\n            this.update_results_content(this.results_option_build({\r\n                first: true\r\n            }));\r\n            this.search_field_disabled();\r\n            this.show_search_field_default();\r\n            this.search_field_scale();\r\n            return this.parsing = false;\r\n        };\r\n\r\n        Chosen.prototype.result_do_highlight = function (el) {\r\n            var high_bottom, high_top, maxHeight, visible_bottom, visible_top;\r\n            if (el.length) {\r\n                this.result_clear_highlight();\r\n                this.result_highlight = el;\r\n                this.result_highlight.addClass(\"highlighted\");\r\n                maxHeight = parseInt(this.search_results.css(\"maxHeight\"), 10);\r\n                visible_top = this.search_results.scrollTop();\r\n                visible_bottom = maxHeight + visible_top;\r\n                high_top = this.result_highlight.position().top + this.search_results.scrollTop();\r\n                high_bottom = high_top + this.result_highlight.outerHeight();\r\n                if (high_bottom >= visible_bottom) {\r\n                    return this.search_results.scrollTop((high_bottom - maxHeight) > 0 ? high_bottom - maxHeight : 0);\r\n                } else if (high_top < visible_top) {\r\n                    return this.search_results.scrollTop(high_top);\r\n                }\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.result_clear_highlight = function () {\r\n            if (this.result_highlight) {\r\n                this.result_highlight.removeClass(\"highlighted\");\r\n            }\r\n            return this.result_highlight = null;\r\n        };\r\n\r\n        Chosen.prototype.results_show = function () {\r\n            if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\r\n                this.form_field_jq.trigger(\"chosen:maxselected\", {\r\n                    chosen: this\r\n                });\r\n                return false;\r\n            }\r\n            this.container.addClass(\"chosen-with-drop\");\r\n            this.results_showing = true;\r\n            this.search_field.focus();\r\n            this.search_field.val(this.search_field.val());\r\n            this.winnow_results();\r\n            return this.form_field_jq.trigger(\"chosen:showing_dropdown\", {\r\n                chosen: this\r\n            });\r\n        };\r\n\r\n        Chosen.prototype.update_results_content = function (content) {\r\n            return this.search_results.html(content);\r\n        };\r\n\r\n        Chosen.prototype.results_hide = function () {\r\n            if (this.results_showing) {\r\n                this.result_clear_highlight();\r\n                this.container.removeClass(\"chosen-with-drop\");\r\n                this.form_field_jq.trigger(\"chosen:hiding_dropdown\", {\r\n                    chosen: this\r\n                });\r\n            }\r\n            return this.results_showing = false;\r\n        };\r\n\r\n        Chosen.prototype.set_tab_index = function (el) {\r\n            var ti;\r\n            if (this.form_field.tabIndex) {\r\n                ti = this.form_field.tabIndex;\r\n                this.form_field.tabIndex = -1;\r\n                return this.search_field[0].tabIndex = ti;\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.set_label_behavior = function () {\r\n            var _this = this;\r\n            this.form_field_label = this.form_field_jq.parents(\"label\");\r\n            if (!this.form_field_label.length && this.form_field.id.length) {\r\n                this.form_field_label = $(\"label[for='\" + this.form_field.id + \"']\");\r\n            }\r\n            if (this.form_field_label.length > 0) {\r\n                return this.form_field_label.bind('click.chosen', function (evt) {\r\n                    if (_this.is_multiple) {\r\n                        return _this.container_mousedown(evt);\r\n                    } else {\r\n                        return _this.activate_field();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.show_search_field_default = function () {\r\n            if (this.is_multiple && this.choices_count() < 1 && !this.active_field) {\r\n                this.search_field.val(this.default_text);\r\n                return this.search_field.addClass(\"default\");\r\n            } else {\r\n                this.search_field.val(\"\");\r\n                return this.search_field.removeClass(\"default\");\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.search_results_mouseup = function (evt) {\r\n            var target;\r\n            target = $(evt.target).hasClass(\"active-result\") ? $(evt.target) : $(evt.target).parents(\".active-result\").first();\r\n            if (target.length) {\r\n                this.result_highlight = target;\r\n                this.result_select(evt);\r\n                return this.search_field.focus();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.search_results_mouseover = function (evt) {\r\n            var target;\r\n            target = $(evt.target).hasClass(\"active-result\") ? $(evt.target) : $(evt.target).parents(\".active-result\").first();\r\n            if (target) {\r\n                return this.result_do_highlight(target);\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.search_results_mouseout = function (evt) {\r\n            if ($(evt.target).hasClass(\"active-result\" || $(evt.target).parents('.active-result').first())) {\r\n                return this.result_clear_highlight();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.choice_build = function (item) {\r\n            var choice, close_link,\r\n                _this = this;\r\n            choice = $('<li />', {\r\n                \"class\": \"search-choice\"\r\n            }).html(\"<span>\" + item.html + \"</span>\");\r\n            if (item.disabled) {\r\n                choice.addClass('search-choice-disabled');\r\n            } else {\r\n                close_link = $('<a />', {\r\n                    \"class\": 'search-choice-close',\r\n                    'data-option-array-index': item.array_index\r\n                });\r\n                close_link.bind('click.chosen', function (evt) {\r\n                    return _this.choice_destroy_link_click(evt);\r\n                });\r\n                choice.append(close_link);\r\n            }\r\n            return this.search_container.before(choice);\r\n        };\r\n\r\n        Chosen.prototype.choice_destroy_link_click = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            if (!this.is_disabled) {\r\n                return this.choice_destroy($(evt.target));\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.choice_destroy = function (link) {\r\n            if (this.result_deselect(link[0].getAttribute(\"data-option-array-index\"))) {\r\n                this.show_search_field_default();\r\n                if (this.is_multiple && this.choices_count() > 0 && this.search_field.val().length < 1) {\r\n                    this.results_hide();\r\n                }\r\n                link.parents('li').first().remove();\r\n                return this.search_field_scale();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.results_reset = function () {\r\n            this.reset_single_select_options();\r\n            this.form_field.options[0].selected = true;\r\n            this.single_set_selected_text();\r\n            this.show_search_field_default();\r\n            this.results_reset_cleanup();\r\n            this.form_field_jq.trigger(\"change\");\r\n            if (this.active_field) {\r\n                return this.results_hide();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.results_reset_cleanup = function () {\r\n            this.current_selectedIndex = this.form_field.selectedIndex;\r\n            return this.selected_item.find(\"abbr\").remove();\r\n        };\r\n\r\n        Chosen.prototype.result_select = function (evt) {\r\n            var high, item;\r\n            if (this.result_highlight) {\r\n                high = this.result_highlight;\r\n                this.result_clear_highlight();\r\n                if (this.is_multiple && this.max_selected_options <= this.choices_count()) {\r\n                    this.form_field_jq.trigger(\"chosen:maxselected\", {\r\n                        chosen: this\r\n                    });\r\n                    return false;\r\n                }\r\n                if (this.is_multiple) {\r\n                    high.removeClass(\"active-result\");\r\n                } else {\r\n                    this.reset_single_select_options();\r\n                }\r\n                item = this.results_data[high[0].getAttribute(\"data-option-array-index\")];\r\n                item.selected = true;\r\n                this.form_field.options[item.options_index].selected = true;\r\n                this.selected_option_count = null;\r\n                if (this.is_multiple) {\r\n                    this.choice_build(item);\r\n                } else {\r\n                    this.single_set_selected_text(item.text);\r\n                }\r\n                if (!((evt.metaKey || evt.ctrlKey) && this.is_multiple)) {\r\n                    this.results_hide();\r\n                }\r\n                this.search_field.val(\"\");\r\n                if (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex) {\r\n                    this.form_field_jq.trigger(\"change\", {\r\n                        'selected': this.form_field.options[item.options_index].value\r\n                    });\r\n                }\r\n                this.current_selectedIndex = this.form_field.selectedIndex;\r\n                return this.search_field_scale();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.single_set_selected_text = function (text) {\r\n            if (text == null) {\r\n                text = this.default_text;\r\n            }\r\n            if (text === this.default_text) {\r\n                this.selected_item.addClass(\"chosen-default\");\r\n            } else {\r\n                this.single_deselect_control_build();\r\n                this.selected_item.removeClass(\"chosen-default\");\r\n            }\r\n            return this.selected_item.find(\"span\").text(text);\r\n        };\r\n\r\n        Chosen.prototype.result_deselect = function (pos) {\r\n            var result_data;\r\n            result_data = this.results_data[pos];\r\n            if (!this.form_field.options[result_data.options_index].disabled) {\r\n                result_data.selected = false;\r\n                this.form_field.options[result_data.options_index].selected = false;\r\n                this.selected_option_count = null;\r\n                this.result_clear_highlight();\r\n                if (this.results_showing) {\r\n                    this.winnow_results();\r\n                }\r\n                this.form_field_jq.trigger(\"change\", {\r\n                    deselected: this.form_field.options[result_data.options_index].value\r\n                });\r\n                this.search_field_scale();\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.single_deselect_control_build = function () {\r\n            if (!this.allow_single_deselect) {\r\n                return;\r\n            }\r\n            if (!this.selected_item.find(\"abbr\").length) {\r\n                this.selected_item.find(\"span\").first().after(\"<abbr class=\\\"search-choice-close\\\"></abbr>\");\r\n            }\r\n            return this.selected_item.addClass(\"chosen-single-with-deselect\");\r\n        };\r\n\r\n        Chosen.prototype.get_search_text = function () {\r\n            if (this.search_field.val() === this.default_text) {\r\n                return \"\";\r\n            } else {\r\n                return $('<div/>').text($.trim(this.search_field.val())).html();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.winnow_results_set_highlight = function () {\r\n            var do_high, selected_results;\r\n            selected_results = !this.is_multiple ? this.search_results.find(\".result-selected.active-result\") : [];\r\n            do_high = selected_results.length ? selected_results.first() : this.search_results.find(\".active-result\").first();\r\n            if (do_high != null) {\r\n                return this.result_do_highlight(do_high);\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.no_results = function (terms) {\r\n            var no_results_html;\r\n            no_results_html = $('<li class=\"no-results\">' + this.results_none_found + ' \"<span></span>\"</li>');\r\n            no_results_html.find(\"span\").first().html(terms);\r\n            this.search_results.append(no_results_html);\r\n            return this.form_field_jq.trigger(\"chosen:no_results\", {\r\n                chosen: this\r\n            });\r\n        };\r\n\r\n        Chosen.prototype.no_results_clear = function () {\r\n            return this.search_results.find(\".no-results\").remove();\r\n        };\r\n\r\n        Chosen.prototype.keydown_arrow = function () {\r\n            var next_sib;\r\n            if (this.results_showing && this.result_highlight) {\r\n                next_sib = this.result_highlight.nextAll(\"li.active-result\").first();\r\n                if (next_sib) {\r\n                    return this.result_do_highlight(next_sib);\r\n                }\r\n            } else {\r\n                return this.results_show();\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.keyup_arrow = function () {\r\n            var prev_sibs;\r\n            if (!this.results_showing && !this.is_multiple) {\r\n                return this.results_show();\r\n            } else if (this.result_highlight) {\r\n                prev_sibs = this.result_highlight.prevAll(\"li.active-result\");\r\n                if (prev_sibs.length) {\r\n                    return this.result_do_highlight(prev_sibs.first());\r\n                } else {\r\n                    if (this.choices_count() > 0) {\r\n                        this.results_hide();\r\n                    }\r\n                    return this.result_clear_highlight();\r\n                }\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.keydown_backstroke = function () {\r\n            var next_available_destroy;\r\n            if (this.pending_backstroke) {\r\n                this.choice_destroy(this.pending_backstroke.find(\"a\").first());\r\n                return this.clear_backstroke();\r\n            } else {\r\n                next_available_destroy = this.search_container.siblings(\"li.search-choice\").last();\r\n                if (next_available_destroy.length && !next_available_destroy.hasClass(\"search-choice-disabled\")) {\r\n                    this.pending_backstroke = next_available_destroy;\r\n                    if (this.single_backstroke_delete) {\r\n                        return this.keydown_backstroke();\r\n                    } else {\r\n                        return this.pending_backstroke.addClass(\"search-choice-focus\");\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.clear_backstroke = function () {\r\n            if (this.pending_backstroke) {\r\n                this.pending_backstroke.removeClass(\"search-choice-focus\");\r\n            }\r\n            return this.pending_backstroke = null;\r\n        };\r\n\r\n        Chosen.prototype.keydown_checker = function (evt) {\r\n            var stroke, _ref1;\r\n            stroke = (_ref1 = evt.which) != null ? _ref1 : evt.keyCode;\r\n            this.search_field_scale();\r\n            if (stroke !== 8 && this.pending_backstroke) {\r\n                this.clear_backstroke();\r\n            }\r\n            switch (stroke) {\r\n            case 8:\r\n                this.backstroke_length = this.search_field.val().length;\r\n                break;\r\n            case 9:\r\n                if (this.results_showing && !this.is_multiple) {\r\n                    this.result_select(evt);\r\n                }\r\n                this.mouse_on_container = false;\r\n                break;\r\n            case 13:\r\n                evt.preventDefault();\r\n                break;\r\n            case 38:\r\n                evt.preventDefault();\r\n                this.keyup_arrow();\r\n                break;\r\n            case 40:\r\n                evt.preventDefault();\r\n                this.keydown_arrow();\r\n                break;\r\n            }\r\n        };\r\n\r\n        Chosen.prototype.search_field_scale = function () {\r\n            var div, f_width, h, style, style_block, styles, w, _i, _len;\r\n            if (this.is_multiple) {\r\n                h = 0;\r\n                w = 0;\r\n                style_block = \"position:absolute; left: -1000px; top: -1000px; display:none;\";\r\n                styles = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];\r\n                for (_i = 0, _len = styles.length; _i < _len; _i++) {\r\n                    style = styles[_i];\r\n                    style_block += style + \":\" + this.search_field.css(style) + \";\";\r\n                }\r\n                div = $('<div />', {\r\n                    'style': style_block\r\n                });\r\n                div.text(this.search_field.val());\r\n                $('body').append(div);\r\n                w = div.width() + 25;\r\n                div.remove();\r\n                f_width = this.container.outerWidth();\r\n                if (w > f_width - 10) {\r\n                    w = f_width - 10;\r\n                }\r\n                return this.search_field.css({\r\n                    'width': w + 'px'\r\n                });\r\n            }\r\n        };\r\n\r\n        return Chosen;\r\n\r\n    })(AbstractChosen);\r\n\r\n}).call(this);"
      },
      {
        "name": "wikirate coffee",
        "type": "CoffeeScript",
        "content": "\r\n###\r\nThis adds the special source editor (which is overwritten in right/source.rb)\r\nto this long-named map which gets triggered whenever we need javascript\r\nto translate fancy editor content into something friendly to the REST API.\r\n\r\nIt basically loops through each item in the list and gets the card name from the\r\nstandard \"data-card-name\" attribute.\r\n### \r\n\r\nwagn.editorContentFunctionMap['.source-editor .pointer-list'] = ->\r\n  pointerContent @find('.TYPE-page').map( -> $(this).attr 'data-card-name' )\r\n\r\n###\r\nFIXME\r\nThe following code is cut and pasted from wagn_mod.js.coffee.  We need to scope\r\nit so that we can just refer to it and get rid of it here.\r\n###\r\n\r\npointerContent = (vals) ->\r\n  list = $.map $.makeArray(vals), (v)-> if v then '[[' + v + ']]'\r\n  $.makeArray(list).join \"\\n\"\r\n\r\n$(window).ready ->\r\n\r\n\r\n  ###\r\n  The following is what translates the sourcebox into the form that we need\r\n  it for the REST API and handles the request/response.\r\n  ###\r\n\r\n  $('body').on 'click', '.TYPE-claim .sourcebox button', ->\r\n    button = $(this)\r\n    field = $(this).closest('.sourcebox').find('input')\r\n    unless field.val().match /^http/\r\n      alert 'please enter a valid url'\r\n      return false\r\n    listDiv = field.closest( '.content-editor' ).find '.pointer-list' \r\n    button.html 'Adding...'\r\n    button.attr 'disabled', true\r\n\r\n    $.ajax wagn.rootPath + '/card/create', {\r\n      data : {\r\n        success: { view : 'content' }\r\n        slot: { structure: 'source preview' } #fixme -- need codename\r\n        sourcebox: 'true'\r\n        card: {\r\n          type_code: 'webpage'\r\n          subcards    : { '+Link' : { 'content' : field.val() } }\r\n        }\r\n      }\r\n      success: (data) ->\r\n        itemSlot = $('<div class=\"card-slot\"></div>')\r\n        listDiv.append itemSlot\r\n        itemSlot.slotSuccess data\r\n        field.val ''\r\n      error: (xhr) -> button.slot().slotError xhr.status, xhr.responseText\r\n      complete: ->\r\n        button.html 'Add'\r\n        button.attr 'disabled', false    \r\n    }\r\n    \r\n    false #disable other events\r\n\r\n\r\n# we need to replace the following to retain decent 'add source' behavior'\r\n\r\n#  $('.TYPE-page .RIGHT-link').on 'change', 'input', ->  \r\n#   field = $(this)\r\n#    frameslot = getFrameslot field\r\n#    frameslot.html $('<iframe src=\"' + field.val()  + '\"></iframe>')\r\n\r\n\r\n# the following may no longer be necessary.  it was a pre-\"chosen\" attempt at a topics editor\"\r\n\r\n  $('body').on 'click', '.wikirate-topic-list', (event) ->\r\n    listlink = $(this)\r\n    dialogDiv = listlink.data 'dialog'\r\n    dialogOptions = { minWidth: 400, maxHeight:400, position: { my: \"center\", at: \"center\", of: window } }\r\n    if dialogDiv\r\n      dialogDiv.dialog dialogOptions\r\n    else\r\n      $.ajax( url: listlink.attr('href') ).done (data)->\r\n        dialogDiv = listlink.slot().find '.wikirate-topic-dialog'\r\n        wagn.dd = dialogDiv\r\n        dialogDiv.html data\r\n        listlink.data 'dialog', dialogDiv\r\n        dialogDiv.dialog dialogOptions\r\n        dialogDiv.find('a').attr 'target','topics'\r\n    event.preventDefault()\r\n  \r\n  $('#menu-bar').on 'mouseenter', '.main-links > div', ->\r\n    ul = $(this).find('ul').first()\r\n    ul.menu()\r\n    ul.show()\r\n    ul.position my: 'left top', at: 'left bottom', of: this\r\n    \r\n  $('#menu-bar').on 'mouseleave', '.main-links > div', ->\r\n    ul = $(this).find('ul').first()\r\n    ul.hide()\r\n  \r\n  $('body').on 'change', '.SELF-company_comparison select', ->\r\n    $(this).closest('form').submit()\r\n\r\n#warn = (stuff) -> console.log stuff if console?",
        "codename": "wikirate_coffee"
      },
      {
        "name": "claim chosen",
        "type": "JavaScript",
        "content": "wagn.slotReady( function ( slot ) {\r\n    slot.find('.pointer-multiselect').each(function (i) {\r\n        $(this).attr(\"data-placeholder\", \"　\");\r\n        $(this).chosen({\r\n            no_results_text: 'Press Enter to add new',\r\n            skip_no_results: true, \r\n            width: \"100%\"\r\n        });\r\n    });\r\n\r\n  slot.find('.pointer-select').each( function (i) {\r\n        $(this).attr(\"data-placeholder\", \"　\");\r\n        $(this).chosen({\r\n            no_results_text: 'Not in current year range',\r\n            skip_no_results: true, \r\n            width: \"100%\"\r\n        });\r\n  });\r\n});"
      },
      {
        "name": "newClaimJs",
        "type": "JavaScript",
        "content": "function byteCount(s) {\r\n   return encodeURI(s).split(/%..|./).length - 1;\r\n}\r\n\r\nwagn.slotReady(function(slot){\r\n  \r\n  slot.find(\"#card_name\").keyup(function( event ) {\r\n    var maxlimit = 100;\r\n    var countField =$('.claim-counting .claim-counting-number');\r\n\r\n    if (byteCount(this.value) > maxlimit) {\r\n      this.value = this.value.substring(0, maxlimit);\r\n      //need to recommend basis here\r\n    } \r\n    countField.html((maxlimit - byteCount(this.value)));\r\n  });\r\n\r\n  var $helpText = slot.find(\".instruction\");\r\n\r\n  $helpText.each(function(){\r\n    _this = $(this);\r\n    _this.children().hide();\r\n    _this.append('<div class=\"fa fa-question-circle helpTextQuestionMrk\"></div>');\r\n    _this.find(\".helpTextQuestionMrk\").mouseover(function(){\r\n      $(this).siblings('p').show();\r\n    });\r\n    _this.find(\".helpTextQuestionMrk\").mouseout(function(){\r\n      $(this).siblings('p').hide();\r\n    });\r\n  })\r\n\r\n\r\n  var $disclosureLinks = slot.filter('.TYPE-claim.new-view').find(\"._pDisLink\");\r\n\r\n  if($disclosureLinks.length){\r\n      $disclosureLinks.show();\r\n    $(\".RIGHT-basi,.RIGHT-tag,.RIGHT-year, .RIGHT-related_article, .RIGHT-discussion\").hide();\r\n    $(\"#_addBasis\").click(function(){\r\n        $(\".RIGHT-basi\").show();\r\n        $(this).hide();\r\n    });\r\n    $(\"#_addMoreInfo\").click(function(){\r\n        $(\".RIGHT-tag,.RIGHT-year,.RIGHT-related_article, .RIGHT-discussion\").show();\r\n        $(this).hide();\r\n    });\r\n  }\r\n\r\n$slotContainer = slot.filter(\".TYPE-claim.new-view, .TYPE-claim.edit-view\");\r\n\r\n$slotContainer.on({\r\n  mouseenter: function(){\r\n    $(this).find(\".remove-source\").show();\r\n  },\r\n  mouseleave: function(){\r\n    $(this).find(\".remove-source\").hide();\r\n  }\r\n},\".TYPE-page\");\r\n\r\n$slotContainer.on(\"click\",\".TYPE-page .remove-source\",function(){\r\n  $(this).slot().remove();\r\n});\r\n\r\n\r\n  slot.find(\"#close-tip\").click(function(){\r\n    $(\".claim-tip\").hide();\r\n  })\r\n\r\n  \r\n})\r\n\r\n$('document').ready( function() {\r\n  $('.card-slot').trigger('slotReady');\r\n})"
      },
      {
        "name": "*all+*script",
        "type": "Pointer",
        "content": "[[script: jquery\r]]\n[[script: tinymce\r]]\n[[script: slot\r]]\n[[script: card menu\r]]\n[[script: jquery helper\r]]\n[[wikirate coffee\r]]\n[[userreport\r]]\n[[chosen proto script\r]]\n[[chosen script\r]]\n[[claim chosen\r]]\n[[newClaimJs]]"
      },
      {
        "name": "related articles",
        "type": "Basic",
        "content": "",
        "codename": "related_articles"
      },
      {
        "name": "related articles+*right+*structure",
        "type": "HTML",
        "content": ""
      },
      {
        "name": "Claim+*type+*structure",
        "type": "HTML",
        "content": "<div class=\"creator-credit\">{{_self | structure:creator credit}}</div>\r\n{{_self|tip}}\r\n\r\n<div class=\"source-side\">\r\n  <a id=\"_addBasis\" class=\"claim_p_disclosure_link _pDisLink\" href=\"javascript:void(0)\" style=\"display:none;\">Add basis </a>\r\n  {{+Basis|title:Basis}}\r\n  {{+Companies|titled;title:Companies;show:menu|link}}\r\n  {{+Topics|titled;title:Topics;show:menu|link}} \r\n <a id=\"_addMoreInfo\" class=\"claim_p_disclosure_link _pDisLink\" href=\"javascript:void(0)\" style=\"display:none;\">Add more info </a>\r\n  {{+tag|labeled;title:Tags;show:menu|link}}\r\n  {{+Year|labeled;title:Year}}\r\n  {{+related articles|titled;title:Related articles}}\r\n  {{+discussion|titled;title:Discussion;show:comment_box,menu}}\r\n\r\n</div>\r\n<div class=\"meta-side\">\r\n  {{+Source|titled; title:Sources;show:menu|content;structure: source preview}}\r\n</div>"
      },
      {
        "name": "Page+*type+*structure",
        "type": "HTML",
        "content": "\r\n<div class=\"meta-side\">\r\n  {{+Link|titled}}\r\n  {{+Title|titled}}\r\n  {{+Description|titled}}\r\n  {{+Website|titled|link}}\r\n</div>\r\n<div class=\"source-side\">\r\n  {{+Companies|titled|content;structure:company link}}\r\n  {{+Topics|titled|content;structure:topic link}}\r\n  {{+Tags|titled; item:link}}\r\n  {{+Claims|titled|link}}\r\n  [[/new/Claim?_Source={{_|linkname}}|Make a Claim!]]\r\n</div>\r\n\r\n"
      },
      {
        "name": "companies+*right+*input",
        "type": "Pointer",
        "content": "[[multiselect]]"
      },
      {
        "name": "tags+*right+*input",
        "type": "Pointer",
        "content": "[[multiselect]]"
      },
      {
        "name": "topics+*right+*input",
        "type": "Pointer",
        "content": "[[multiselect]]"
      },
      {
        "name": "source preview",
        "type": "HTML",
        "content": "<div class=\"fa fa-times-circle remove-source\"></div>\r\n<a class=\"preview-page-link\" href=\"{{_|url}}\" target=\"_blank\"> {{_+title|needed}} </a>\r\n{{_+description}}\r\n<a class=\"preview-visit-link\" href=\"{{_+link|raw}}\" target=\"_blank\">Visit</a>"
      },
      {
        "name": "creator credit",
        "type": "HTML",
        "content": "added  \r\n{{_self | created_at }}  \r\nago by   \r\n{{+*creator | core | link }}"
      },
      {
        "name": "Claim+Company+*type plus right+*options",
        "type": "Search",
        "content": "{\r\n  \"type\":\"Company\",\r\n  \"sort\":\"name\",\r\n  \"limit\":0\r\n}"
      },
      {
        "name": "Claim+Topic+*type plus right+*options",
        "type": "Search",
        "content": "{\r\n  \"type\":\"Topic\", \r\n  \"sort\":\"name\",\r\n  \"limit\":0\r\n}"
      },
      {
        "name": "Year+*right+*default",
        "type": "Pointer",
        "content": ""
      },
      {
        "name": "Year+*right+*input",
        "type": "Pointer",
        "content": "[[select]]"
      },
      {
        "name": "Year+*right+*options",
        "type": "Search",
        "content": "{\"type\":\"Year\",\"sort\":\"name\",\"dir\":\"desc\",\"limit\":\"0\"}"
      }
    ]
  }
}